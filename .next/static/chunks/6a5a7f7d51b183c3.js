(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67861,(e,t,r)=>{var s={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],s=t[1];return(r+s)*3/4-s},t.toByteArray=function(e){var t,r,a=l(e),i=a[0],o=a[1],c=new n((i+o)*3/4-o),u=0,d=o>0?i-4:i;for(r=0;r<d;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===o&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===o&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,s=e.length,n=s%3,a=[],i=0,o=s-n;i<o;i+=16383)a.push(function(e,t,s){for(var n,a=[],i=t;i<s;i+=3)n=(e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(r[n>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return a.join("")}(e,i,i+16383>o?o:i+16383));return 1===n?a.push(r[(t=e[s-1])>>2]+r[t<<4&63]+"=="):2===n&&a.push(r[(t=(e[s-2]<<8)+e[s-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")};for(var r=[],s=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=a.length;i<o;++i)r[i]=a[i],s[a.charCodeAt(i)]=i;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var s=r===t?0:4-r%4;return[r,s]}s[45]=62,s[95]=63},72:function(e,t,r){"use strict";var s=r(675),n=r(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function i(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var s=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);var a=0|f(s,n),l=i(a),c=l.write(s,n);return c!==a&&(l=l.slice(0,c)),l}if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(T(e,ArrayBuffer)||e&&T(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(T(e,SharedArrayBuffer)||e&&T(e.buffer,SharedArrayBuffer)))return function(e,t,r){var s;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),s}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var u=e.valueOf&&e.valueOf();if(null!=u&&u!==e)return o.from(u,t,r);var p=function(e){if(o.isBuffer(e)){var t=0|h(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?i(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),i(e<0?0:0|h(e))}function d(e){for(var t=e.length<0?0:0|h(e.length),r=i(t),s=0;s<t;s+=1)r[s]=255&e[s];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(c(e),e<=0)?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)};function h(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||T(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return S(e).length;default:if(n)return s?-1:N(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,r){var n,a,i,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var s=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>s)&&(r=s);for(var n="",a=t;a<r;++a)n+=C[e[a]];return n}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){var s="";r=Math.min(e.length,r);for(var n=t;n<r;++n)s+=String.fromCharCode(127&e[n]);return s}(this,t,r);case"latin1":case"binary":return function(e,t,r){var s="";r=Math.min(e.length,r);for(var n=t;n<r;++n)s+=String.fromCharCode(e[n]);return s}(this,t,r);case"base64":return n=this,a=t,i=r,0===a&&i===n.length?s.fromByteArray(n):s.fromByteArray(n.slice(a,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var s=e.slice(t,r),n="",a=0;a<s.length;a+=2)n+=String.fromCharCode(s[a]+256*s[a+1]);return n}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,r){var s=e[t];e[t]=e[r],e[r]=s}function g(e,t,r,s,n){var a;if(0===e.length)return -1;if("string"==typeof r?(s=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(a=r*=1)!=a&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(n)return -1;else r=e.length-1;else if(r<0)if(!n)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,s)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,s,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,s,n)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,s,n){var a,i=1,o=e.length,l=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return -1;i=2,o/=2,l/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){var u=-1;for(a=r;a<o;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*i}else -1!==u&&(a-=a-u),u=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(c(e,a+h)!==c(t,h)){d=!1;break}if(d)return a}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(T(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),T(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,s=t.length,n=0,a=Math.min(r,s);n<a;++n)if(e[n]!==t[n]){r=e[n],s=t[n];break}return r<s?-1:+(s<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,s=o.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var a=e[r];if(T(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(s,n),n+=a.length}return s},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(o.prototype[a]=o.prototype.inspect),o.prototype.compare=function(e,t,r,s,n){if(T(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),t<0||r>e.length||s<0||n>this.length)throw RangeError("out of range index");if(s>=n&&t>=r)return 0;if(s>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,s>>>=0,n>>>=0,this===e)return 0;for(var a=n-s,i=r-t,l=Math.min(a,i),c=this.slice(s,n),u=e.slice(t,r),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],i=u[d];break}return a<i?-1:+(i<a)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function b(e,t,r){r=Math.min(e.length,r);for(var s=[],n=t;n<r;){var a,i,o,l,c=e[n],u=null,d=c>239?4:c>223?3:c>191?2:1;if(n+d<=r)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(a=e[n+1]))==128&&(l=(31&c)<<6|63&a)>127&&(u=l);break;case 3:a=e[n+1],i=e[n+2],(192&a)==128&&(192&i)==128&&(l=(15&c)<<12|(63&a)<<6|63&i)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=e[n+1],i=e[n+2],o=e[n+3],(192&a)==128&&(192&i)==128&&(192&o)==128&&(l=(15&c)<<18|(63&a)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,s.push(u>>>10&1023|55296),u=56320|1023&u),s.push(u),n+=d}var h=s,f=h.length;if(f<=4096)return String.fromCharCode.apply(String,h);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,h.slice(m,m+=4096));return p}function x(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,s,n,a){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw RangeError('"value" argument is out of bounds');if(r+s>e.length)throw RangeError("Index out of range")}function v(e,t,r,s,n,a){if(r+s>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,r,s,a){return t*=1,r>>>=0,a||v(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,s,23,4),r+4}function j(e,t,r,s,a){return t*=1,r>>>=0,a||v(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,s,52,8),r+8}o.prototype.write=function(e,t,r,s){if(void 0===t)s="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)s=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===s&&(s="utf8")):(s=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,a,i,o,l,c,u,d,h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var f=!1;;)switch(s){case"hex":return function(e,t,r,s){r=Number(r)||0;var n=e.length-r;s?(s=Number(s))>n&&(s=n):s=n;var a=t.length;s>a/2&&(s=a/2);for(var i=0;i<s;++i){var o,l=parseInt(t.substr(2*i,2),16);if((o=l)!=o)break;e[r+i]=l}return i}(this,e,t,r);case"utf8":case"utf-8":return n=t,a=r,R(N(e,this.length-n),this,n,a);case"ascii":return i=t,o=r,R(E(e),this,i,o);case"latin1":case"binary":return function(e,t,r,s){return R(E(t),e,r,s)}(this,e,t,r);case"base64":return l=t,c=r,R(S(e),this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,d=r,R(function(e,t){for(var r,s,n=[],a=0;a<e.length&&!((t-=2)<0);++a)s=(r=e.charCodeAt(a))>>8,n.push(r%256),n.push(s);return n}(e,this.length-u),this,u,d);default:if(f)throw TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var s=this.subarray(e,t);return Object.setPrototypeOf(s,o.prototype),s},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var s=this[e],n=1,a=0;++a<t&&(n*=256);)s+=this[e+a]*n;return s},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var s=this[e+--t],n=1;t>0&&(n*=256);)s+=this[e+--t]*n;return s},o.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var s=this[e],n=1,a=0;++a<t&&(n*=256);)s+=this[e+a]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var s=t,n=1,a=this[e+--s];s>0&&(n*=256);)a+=this[e+--s]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return(e>>>=0,t||x(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,s){if(e*=1,t>>>=0,r>>>=0,!s){var n=Math.pow(2,8*r)-1;w(this,e,t,r,n,0)}var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,s){if(e*=1,t>>>=0,r>>>=0,!s){var n=Math.pow(2,8*r)-1;w(this,e,t,r,n,0)}var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,s){if(e*=1,t>>>=0,!s){var n=Math.pow(2,8*r-1);w(this,e,t,r,n-1,-n)}var a=0,i=1,o=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,s){if(e*=1,t>>>=0,!s){var n=Math.pow(2,8*r-1);w(this,e,t,r,n-1,-n)}var a=r-1,i=1,o=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,s){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(s<0)throw RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);var n=s-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,s);else if(this===e&&r<t&&t<s)for(var a=n-1;a>=0;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,s),t);return n},o.prototype.fill=function(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw TypeError("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);if(1===e.length){var n,a=e.charCodeAt(0);("utf8"===s&&a<128||"latin1"===s)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var i=o.isBuffer(e)?e:o.from(e,s),l=i.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=i[n%l]}return this};var _=/[^+/0-9A-Za-z-_]/g;function N(e,t){t=t||1/0;for(var r,s=e.length,n=null,a=[],i=0;i<s;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!n){if(r>56319||i+1===s){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function E(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function S(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(_,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,r,s){for(var n=0;n<s&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function T(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var C=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var s=16*r,n=0;n<16;++n)t[s+n]=e[r]+e[n];return t}()},783:function(e,t){t.read=function(e,t,r,s,n){var a,i,o=8*n-s-1,l=(1<<o)-1,c=l>>1,u=-7,d=r?n-1:0,h=r?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-u)-1,f>>=-u,u+=o;u>0;a=256*a+e[t+d],d+=h,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,s),a-=c}return(f?-1:1)*i*Math.pow(2,a-s)},t.write=function(e,t,r,s,n,a){var i,o,l,c=8*a-n-1,u=(1<<c)-1,d=u>>1,h=5960464477539062e-23*(23===n),f=s?0:a-1,p=s?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=u?(o=0,i=u):i+d>=1?(o=(t*l-1)*Math.pow(2,n),i+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,n),i=0));n>=8;e[r+f]=255&o,f+=p,o/=256,n-=8);for(i=i<<n|o,c+=n;c>0;e[r+f]=255&i,f+=p,i/=256,c-=8);e[r+f-p]|=128*m}}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}},i=!0;try{s[e](r,r.exports,a),i=!1}finally{i&&delete n[e]}return r.exports}a.ab="/ROOT/my-lms-project/node_modules/next/dist/compiled/buffer/",t.exports=a(72)},80653,e=>{"use strict";let t,r,s,n,a,i,o,l,c,u;var d,h,f,p,m,g,y,b,x,w,v,k,j,_,N,E,S,R,T,C,A,O,P,I,$,D,z,L,M,U,B=e.i(9016),q=e.i(91780),F=e.i(79767);class W extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class V extends W{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class K extends W{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class H extends W{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(d=R||(R={})).Any="any",d.ApNortheast1="ap-northeast-1",d.ApNortheast2="ap-northeast-2",d.ApSouth1="ap-south-1",d.ApSoutheast1="ap-southeast-1",d.ApSoutheast2="ap-southeast-2",d.CaCentral1="ca-central-1",d.EuCentral1="eu-central-1",d.EuWest1="eu-west-1",d.EuWest2="eu-west-2",d.EuWest3="eu-west-3",d.SaEast1="sa-east-1",d.UsEast1="us-east-1",d.UsWest1="us-west-1",d.UsWest2="us-west-2";var G=function(){return(G=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function J(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}"function"==typeof SuppressedError&&SuppressedError;class Y{constructor(e,{headers:t={},customFetch:r,region:s=R.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){var t,r,s,n;return t=this,r=arguments,s=void 0,n=function*(e,t={}){var r;let s,n;try{let a,{headers:i,method:o,body:l,signal:c,timeout:u}=t,d={},{region:h}=t;h||(h=this.region);let f=new URL(`${this.url}/${e}`);h&&"any"!==h&&(d["x-region"]=h,f.searchParams.set("forceFunctionRegion",h)),l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?"undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",a=l):"string"==typeof l?(d["Content-Type"]="text/plain",a=l):"undefined"!=typeof FormData&&l instanceof FormData?a=l:(d["Content-Type"]="application/json",a=JSON.stringify(l)):a=l;let p=c;u&&(n=new AbortController,s=setTimeout(()=>n.abort(),u),c?(p=n.signal,c.addEventListener("abort",()=>n.abort())):p=n.signal);let m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),i),body:a,signal:p}).catch(e=>{throw new V(e)}),g=m.headers.get("x-relay-error");if(g&&"true"===g)throw new K(m);if(!m.ok)throw new H(m);let y=(null!=(r=m.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===y?yield m.json():"application/octet-stream"===y||"application/pdf"===y?yield m.blob():"text/event-stream"===y?m:"multipart/form-data"===y?yield m.formData():yield m.text(),error:null,response:m}}catch(e){return{data:null,error:e,response:e instanceof H||e instanceof K?e.context:void 0}}finally{s&&clearTimeout(s)}},new(s||(s=Promise))(function(e,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof s?r:new s(function(e){e(r)})).then(i,o)}l((n=n.apply(t,r||[])).next())})}}var X=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Z=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,n,a;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==r.method){let t=await e.text();""===t||(o="text/csv"===r.headers.get("Accept")||r.headers.get("Accept")&&(null==(n=r.headers.get("Accept"))?void 0:n.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}let a=null==(t=r.headers.get("Prefer"))?void 0:t.match(/count=(exact|planned|estimated)/),d=null==(s=e.headers.get("content-range"))?void 0:s.split("/");a&&d&&d.length>1&&(l=parseInt(d[1])),r.isMaybeSingle&&"GET"===r.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(r){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&r.isMaybeSingle&&(null==i||null==(a=i.details)?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&r.shouldThrowOnError)throw new X(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,r,s,n,a,i;let o="",l=null==e?void 0:e.cause;if(l){let t=null!=(r=null==l?void 0:l.message)?r:"",i=null!=(s=null==l?void 0:l.code)?s:"";o=`${null!=(n=null==e?void 0:e.name)?n:"FetchError"}: ${null==e?void 0:e.message}

Caused by: ${null!=(a=null==l?void 0:l.name)?a:"Error"}: ${t}`,i&&(o+=` (${i})`),(null==l?void 0:l.stack)&&(o+=`
${l.stack}`)}else o=null!=(i=null==e?void 0:e.stack)?i:"";return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Q=class extends Z{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){let a=n?`${n}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){let n=void 0===s?"offset":`${s}.offset`,a=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:a="text"}={}){var i;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!=(i=this.headers.get("Accept"))?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};let ee=RegExp("[,()]");var et=class extends Q{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&ee.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&ee.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";"plain"===s?n="pl":"phrase"===s?n="ph":"websearch"===s&&(n="w");let a=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},er=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},n=!1,a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new et({method:r?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new et({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(s=this.fetch)?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new et({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(a=this.fetch)?a:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new et({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new et({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}},es=class e{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new er(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:n}={}){var a;let i,o,l=new URL(`${this.url}/rpc/${e}`);r||s?(i=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(i="POST",o=t);let c=new Headers(this.headers);return n&&c.set("Prefer",`count=${n}`),new et({method:i,url:l,headers:c,schema:this.schemaName,body:o,fetch:null!=(a=this.fetch)?a:fetch})}};let en=class{static detectEnvironment(){var t;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(void 0!==F.default){let e=F.default.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},ea="1.0.0";(h=T||(T={}))[h.connecting=0]="connecting",h[h.open=1]="open",h[h.closing=2]="closing",h[h.closed=3]="closed",(f=C||(C={})).closed="closed",f.errored="errored",f.joined="joined",f.joining="joining",f.leaving="leaving",(p=A||(A={})).close="phx_close",p.error="phx_error",p.join="phx_join",p.reply="phx_reply",p.leave="phx_leave",p.access_token="access_token",(O||(O={})).websocket="websocket",(m=P||(P={})).Connecting="connecting",m.Open="open",m.Closing="closing",m.Closed="closed";class ei{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){return e.event!==this.BROADCAST_EVENT||e.payload instanceof ArrayBuffer||"string"!=typeof e.payload.event?t(JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload])):t(this._binaryEncodeUserBroadcastPush(e))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null==(t=e.payload)?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:{},n=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,n)}_encodeUserBroadcastPush(e,t,r){let s=e.topic,n=null!=(f=e.ref)?f:"",a=null!=(p=e.join_ref)?p:"",i=e.payload.event,o=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},l=0===Object.keys(o).length?"":JSON.stringify(o);if(a.length>255)throw Error(`joinRef length ${a.length} exceeds maximum of 255`);if(n.length>255)throw Error(`ref length ${n.length} exceeds maximum of 255`);if(s.length>255)throw Error(`topic length ${s.length} exceeds maximum of 255`);if(i.length>255)throw Error(`userEvent length ${i.length} exceeds maximum of 255`);if(l.length>255)throw Error(`metadata length ${l.length} exceeds maximum of 255`);let c=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+n.length+s.length+i.length+l.length,u=new ArrayBuffer(this.HEADER_LENGTH+c),d=new DataView(u),h=0;d.setUint8(h++,this.KINDS.userBroadcastPush),d.setUint8(h++,a.length),d.setUint8(h++,n.length),d.setUint8(h++,s.length),d.setUint8(h++,i.length),d.setUint8(h++,l.length),d.setUint8(h++,t),Array.from(a,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(n,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(s,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(i,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(l,e=>d.setUint8(h++,e.charCodeAt(0)));var f,p,m=new Uint8Array(u.byteLength+r.byteLength);return m.set(new Uint8Array(u),0),m.set(new Uint8Array(r),u.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){let[r,s,n,a,i]=JSON.parse(e);return t({join_ref:r,ref:s,topic:n,event:a,payload:i})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,s)}_decodeUserBroadcast(e,t,r){let s=t.getUint8(1),n=t.getUint8(2),a=t.getUint8(3),i=t.getUint8(4),o=this.HEADER_LENGTH+4,l=r.decode(e.slice(o,o+s));o+=s;let c=r.decode(e.slice(o,o+n));o+=n;let u=r.decode(e.slice(o,o+a));o+=a;let d=e.slice(o,e.byteLength),h=i===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return a>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||(null==(t=null==e?void 0:e.constructor)?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class eo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(g=I||(I={})).abstime="abstime",g.bool="bool",g.date="date",g.daterange="daterange",g.float4="float4",g.float8="float8",g.int2="int2",g.int4="int4",g.int4range="int4range",g.int8="int8",g.int8range="int8range",g.json="json",g.jsonb="jsonb",g.money="money",g.numeric="numeric",g.oid="oid",g.reltime="reltime",g.text="text",g.time="time",g.timestamp="timestamp",g.timestamptz="timestamptz",g.timetz="timetz",g.tsrange="tsrange",g.tstzrange="tstzrange";let el=(e,t,r={})=>{var s;let n=null!=(s=r.skipTypes)?s:[];return t?Object.keys(t).reduce((r,s)=>(r[s]=ec(s,e,t,n),r),{}):{}},ec=(e,t,r,s)=>{let n=t.find(t=>t.name===e),a=null==n?void 0:n.type,i=r[e];return a&&!s.includes(a)?eu(a,i):ed(i)},eu=(e,t)=>{if("_"===e.charAt(0))return em(t,e.slice(1,e.length));switch(e){case I.bool:return eh(t);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return ef(t);case I.json:case I.jsonb:return ep(t);case I.timestamp:return eg(t);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:default:return ed(t)}},ed=e=>e,eh=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ef=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ep=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e},em=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s,n=e.slice(1,r);try{s=JSON.parse("["+n+"]")}catch(e){s=n?n.split(","):[]}return s.map(e=>eu(t,e))}return e},eg=e=>"string"==typeof e?e.replace(" ","T"):e,ey=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class eb{constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(y=$||($={})).SYNC="sync",y.JOIN="join",y.LEAVE="leave";class ex{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ex.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=ex.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ex.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){let n=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{let r=n[e];if(r){let s=t.map(e=>e.presence_ref),n=r.map(e=>e.presence_ref),a=t.filter(e=>0>n.indexOf(e.presence_ref)),l=r.filter(e=>0>s.indexOf(e.presence_ref));a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},r,s)}static syncDiff(e,t,r,s){let{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(t,s)=>{var n;let a=null!=(n=e[t])?n:[];if(e[t]=this.cloneDeep(s),a.length>0){let r=e[t].map(e=>e.presence_ref),s=a.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...s)}r(t,a,s)}),this.map(a,(t,r)=>{let n=e[t];if(!n)return;let a=r.map(e=>e.presence_ref);n=n.filter(e=>0>a.indexOf(e.presence_ref)),e[t]=n,s(t,n,r),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let s=e[r];return"metas"in s?t[r]=s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(b=D||(D={})).ALL="*",b.INSERT="INSERT",b.UPDATE="UPDATE",b.DELETE="DELETE",(x=z||(z={})).BROADCAST="broadcast",x.PRESENCE="presence",x.POSTGRES_CHANGES="postgres_changes",x.SYSTEM="system",(w=L||(L={})).SUBSCRIBED="SUBSCRIBED",w.TIMED_OUT="TIMED_OUT",w.CLOSED="CLOSED",w.CHANNEL_ERROR="CHANNEL_ERROR";class ew{constructor(e,t={config:{}},r){var s,n;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=C.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new eb(this,A.join,this.params,this.timeout),this.rejoinTimer=new eo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=C.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=C.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=C.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=C.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=C.errored,this.rejoinTimer.scheduleTimeout())}),this._on(A.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ex(this),this.broadcastEndpointURL=ey(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(n=null==(s=this.params.config)?void 0:s.broadcast)?void 0:n.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==C.closed){let{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!=(s=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?s:[],c=!!this.bindings[z.PRESENCE]&&this.bindings[z.PRESENCE].length>0||(null==(n=this.params.config.presence)?void 0:n.enabled)===!0,u={},d={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(L.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(L.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket._isManualToken()||this.socket.setAuth(),void 0===t){null==e||e(L.SUBSCRIBED);return}{let s=this.bindings.postgres_changes,n=null!=(r=null==s?void 0:s.length)?r:0,a=[];for(let r=0;r<n;r++){let n=s[r],{filter:{event:i,schema:o,table:l,filter:c}}=n,u=t&&t[r];if(u&&u.event===i&&ew.isFilterValueEqual(u.schema,o)&&ew.isFilterValueEqual(u.table,l)&&ew.isFilterValueEqual(u.filter,c))a.push(Object.assign(Object.assign({},n),{id:u.id}));else{this.unsubscribe(),this.state=C.errored,null==e||e(L.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=a,e&&e(L.SUBSCRIBED);return}}).receive("error",t=>{this.state=C.errored,null==e||e(L.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(L.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===C.joined&&e===z.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;if(null==t)return Promise.reject("Payload is required for httpSend()");let n={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(n.Authorization=`Bearer ${this.socket.accessTokenValue}`);let a={method:"POST",headers:n,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(s=r.timeout)?s:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{let e=await i.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e,t={}){var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,n,a;let i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(a=null==(n=null==(s=this.params)?void 0:s.config)?void 0:n.broadcast)?void 0:a.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:n,payload:a}=e,i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);let o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!=(r=t.timeout)?r:this.timeout);return await (null==(s=e.body)?void 0:s.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=C.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(A.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{(r=new eb(this,A.leave,{},e)).receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=C.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let s=new AbortController,n=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new eb(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;let a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=A;if(r&&[i,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let u=this._onMessage(a,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null==(s=this.bindings.postgres_changes)||s.filter(e=>{var t,r,s;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(s=null==(r=e.filter)?void 0:r.event)?void 0:s.toLocaleLowerCase())===a}).map(e=>e.callback(u,r)):null==(n=this.bindings[a])||n.filter(e=>{var r,s,n,i,o,l;if(!["broadcast","presence","postgres_changes"].includes(a))return e.type.toLocaleLowerCase()===a;if("id"in e){let a=e.id,i=null==(r=e.filter)?void 0:r.event;return a&&(null==(s=t.ids)?void 0:s.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null==(n=t.data)?void 0:n.type.toLocaleLowerCase()))}{let r=null==(o=null==(i=null==e?void 0:e.filter)?void 0:i.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof u&&"ids"in u){let e=u.data,{schema:t,table:r,commit_timestamp:s,type:n,errors:a}=e;u=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:s,eventType:n,new:{},old:{},errors:a}),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===C.closed}_isJoined(){return this.state===C.joined}_isJoining(){return this.state===C.joining}_isLeaving(){return this.state===C.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null==(s=e.type)?void 0:s.toLocaleLowerCase())===r&&ew.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(A.close,{},e)}_onError(e){this._on(A.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=C.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=el(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=el(e.columns,e.old_record)),t}}let ev=()=>{},ek=[1e3,2e3,5e3,1e4],ej=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class e_{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ev,this.ref=0,this.reconnectTimer=null,this.vsn=ea,this.logger=ev,this.conn=null,this.sendBuffer=[],this.serializer=new ei,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null==(r=null==t?void 0:t.params)?void 0:r.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${O.websocket}`,this.httpEndpoint=ey(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=en.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case T.connecting:return P.Connecting;case T.open:return P.Open;case T.closing:return P.Closing;default:return P.Closed}}isConnected(){return this.connectionState()===P.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){let r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{let r=new ew(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:s,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${n})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(e){this.log("error","error in heartbeat callback",e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:t,event:r,payload:s,ref:n}=e,a=n?`(${n})`:"",i=s.status||"";this.log("receive",`${i} ${t} ${r} ${a}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===T.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===T.open||this.conn.readyState===T.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(A.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([ej],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(e){this.log("error","Error fetching access token from callback",e),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{let r={access_token:t,version:"realtime-js/2.89.0"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(A.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new eo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,a,i,o,l,c,u,d,h;switch(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(s=null==e?void 0:e.heartbeatIntervalMs)?s:25e3,this.worker=null!=(n=null==e?void 0:e.worker)&&n,this.accessToken=null!=(a=null==e?void 0:e.accessToken)?a:null,this.heartbeatCallback=null!=(i=null==e?void 0:e.heartbeatCallback)?i:ev,this.vsn=null!=(o=null==e?void 0:e.vsn)?o:ea,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(l=null==e?void 0:e.reconnectAfterMs)?l:e=>ek[e-1]||1e4,this.vsn){case ea:this.encode=null!=(c=null==e?void 0:e.encode)?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(u=null==e?void 0:e.decode)?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!=(d=null==e?void 0:e.encode)?d:this.serializer.encode.bind(this.serializer),this.decode=null!=(h=null==e?void 0:e.decode)?h:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var eN=e.i(67861),eE=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function eS(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function eR(e){return e.join("\x1f")}var eT=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:eR(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${eR(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${eR(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${eR(e.namespace)}`}),!0}catch(e){if(e instanceof eE&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof eE&&409===e.status)return;throw e}}};function eC(e){return e.join("\x1f")}var eA=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${eC(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${eC(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${eC(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${eC(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${eC(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${eC(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof eE&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof eE&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},eO=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=function(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:a,headers:i}){let o=function(e,t,r){let s=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&s.searchParams.set(e,t);return s.toString()}(e.baseUrl,s,n),l=await eS(e.auth),c=await t(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...i},body:a?JSON.stringify(a):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){let e=d?h:void 0,t=e?.error;throw new eE(t?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:c.status,headers:c.headers,data:h}}}}({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new eT(this.client,t),this.tableOps=new eA(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},eP=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function eI(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var e$=class extends eP{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},eD=class extends eP{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};let ez=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),eL=e=>{if(Array.isArray(e))return e.map(e=>eL(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=eL(r)}),t};function eM(e){return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function eB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eU(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=eM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=eM(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==eM(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eq=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)},eF=async(e,t,r)=>{e instanceof await Response&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{let s=e.status||500,n=(null==r?void 0:r.statusCode)||s+"";t(new e$(eq(r),s,n))}).catch(e=>{t(new eD(eq(e),e))}):t(new eD(eq(e),e))};async function eW(e,t,r,s,n,a){return new Promise((i,o)=>{let l;e(r,(l={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||!a?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(l.headers=eB({"Content-Type":"application/json"},null==s?void 0:s.headers),l.body=JSON.stringify(a)):l.body=a,(null==s?void 0:s.duplex)&&(l.duplex=s.duplex),eB(eB({},l),n)))).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>eF(e,o,s))})}async function eV(e,t,r,s){return eW(e,"GET",t,r,s)}async function eK(e,t,r,s,n){return eW(e,"POST",t,s,n,r)}async function eH(e,t,r,s,n){return eW(e,"PUT",t,s,n,r)}async function eG(e,t,r,s){return eW(e,"HEAD",t,eB(eB({},r),{},{noResolveJson:!0}),s)}async function eJ(e,t,r,s,n){return eW(e,"DELETE",t,s,n,r)}var eY=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}};t=Symbol.toStringTag;var eX=class{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[t]="BlobDownloadBuilder",this.promise=null}asStream(){return new eY(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}};let eZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eQ={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var e0=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=ez(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){try{let n,a=eB(eB({},eQ),s),i=eB(eB({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)}),o=a.metadata;"undefined"!=typeof Blob&&r instanceof Blob?((n=new FormData).append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o)),n.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?((n=r).has("cacheControl")||n.append("cacheControl",a.cacheControl),o&&!n.has("metadata")&&n.append("metadata",this.encodeMetadata(o))):(n=r,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o))),("undefined"!=typeof ReadableStream&&n instanceof ReadableStream||n&&"object"==typeof n&&"pipe"in n&&"function"==typeof n.pipe)&&!a.duplex&&(a.duplex="half")),(null==s?void 0:s.headers)&&(i=eB(eB({},i),s.headers));let l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=await ("PUT"==e?eH:eK)(this.fetch,`${this.url}/object/${c}`,n,eB({headers:i},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){let n=this._removeEmptyFolders(e),a=this._getFinalPath(n),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e,t=eB({upsert:eQ.upsert},s),a=eB(eB({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType),{data:{path:n,fullPath:(await eH(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async createSignedUploadUrl(e,t){try{let r=this._getFinalPath(e),s=eB({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");let n=await eK(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+n.url),i=a.searchParams.get("token");if(!i)throw new eP("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){try{return{data:await eK(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async copy(e,t,r){try{return{data:{path:(await eK(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async createSignedUrl(e,t,r){try{let s=this._getFinalPath(e),n=await eK(this.fetch,`${this.url}/object/sign/${s}`,eB({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async createSignedUrls(e,t,r){var s=this;try{let n=await eK(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>eB(eB({},e),{},{signedUrl:e.signedURL?encodeURI(`${s.url}${e.signedURL}${a}`):null})),error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),n=s?`?${s}`:"",a=this._getFinalPath(e);return new eX(()=>eV(this.fetch,`${this.url}/${r}/${a}${n}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){let t=this._getFinalPath(e);try{return{data:eL(await eV(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async exists(e){let t=this._getFinalPath(e);try{return await eG(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e)&&e instanceof eD){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}getPublicUrl(e,t){let r=this._getFinalPath(e),s=[],n=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==n&&s.push(n);let a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}async remove(e){try{return{data:await eJ(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async list(e,t,r){try{let s=eB(eB(eB({},eZ),t),{},{prefix:e||""});return{data:await eK(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async listV2(e,t){try{let r=eB({},e);return{data:await eK(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==eN.Buffer?eN.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};let e1="2.89.0",e2={"X-Client-Info":`storage-js/${e1}`};var e5=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const n=new URL(e);(null==s?void 0:s.useNewHostname)&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=eB(eB({},e2),t),this.fetch=ez(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){try{let t=this.listBucketOptionsToQueryString(e);return{data:await eV(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await eV(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async createBucket(e,t={public:!1}){try{return{data:await eK(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async updateBucket(e,t){try{return{data:await eH(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async emptyBucket(e){try{return{data:await eK(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await eJ(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},e6=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=eB(eB({},e2),t),this.fetch=ez(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await eK(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async listBuckets(e){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:await eV(this.fetch,s,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await eJ(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eI(e))return{data:null,error:e};throw e}}from(e){var t=this;if(!(!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))throw new eP("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let r=new eO({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(e,t){let r=e[t];return"function"!=typeof r?r:async(...t)=>{try{return{data:await r.apply(e,t),error:null}}catch(e){if(s)throw e;return{data:null,error:e}}}}})}};let e4={"X-Client-Info":`storage-js/${e1}`,"Content-Type":"application/json"};var e8=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function e3(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}var e9=class extends e8{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},e7=class extends e8{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};let te=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),tt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tr=async(e,t,r)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){let r=e.status||500;"function"==typeof e.json?e.json().then(e=>{let s=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new e9(tt(e),r,s))}).catch(()=>{t(new e9(e.statusText||`HTTP ${r} error`,r,r+""))}):t(new e9(e.statusText||`HTTP ${r} error`,r,r+""))}else t(new e7(tt(e),e))};async function ts(e,t,r,s,n,a){return new Promise((i,o)=>{let l;e(r,(l={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||!a?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(l.headers=eB({"Content-Type":"application/json"},null==s?void 0:s.headers),l.body=JSON.stringify(a)):l.body=a,eB(eB({},l),n)))).then(e=>{if(!e.ok)throw e;if(null==s?void 0:s.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>tr(e,o,s))})}async function tn(e,t,r,s,n){return ts(e,"POST",t,s,n,r)}var ta=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=eB(eB({},e4),t),this.fetch=te(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){try{return{data:await tn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async getIndex(e,t){try{return{data:await tn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async listIndexes(e){try{return{data:await tn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async deleteIndex(e,t){try{return{data:await tn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}},ti=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=eB(eB({},e4),t),this.fetch=te(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:await tn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async getVectors(e){try{return{data:await tn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async listVectors(e){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await tn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async queryVectors(e){try{return{data:await tn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async deleteVectors(e){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:await tn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}},to=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=eB(eB({},e4),t),this.fetch=te(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){try{return{data:await tn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async getBucket(e){try{return{data:await tn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async listBuckets(e={}){try{return{data:await tn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}async deleteBucket(e){try{return{data:await tn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers})||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(e3(e))return{data:null,error:e};throw e}}},tl=class extends to{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new tc(this.url,this.headers,e,this.fetch)}async createBucket(e){return super.createBucket.call(this,e)}async getBucket(e){return super.getBucket.call(this,e)}async listBuckets(e={}){return super.listBuckets.call(this,e)}async deleteBucket(e){return super.deleteBucket.call(this,e)}},tc=class extends ta{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){return super.createIndex.call(this,eB(eB({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return super.listIndexes.call(this,eB(eB({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return super.getIndex.call(this,this.vectorBucketName,e)}async deleteIndex(e){return super.deleteIndex.call(this,this.vectorBucketName,e)}index(e){return new tu(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},tu=class extends ti{constructor(e,t,r,s,n){super(e,t,n),this.vectorBucketName=r,this.indexName=s}async putVectors(e){return super.putVectors.call(this,eB(eB({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(e){return super.getVectors.call(this,eB(eB({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(e={}){return super.listVectors.call(this,eB(eB({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(e){return super.queryVectors.call(this,eB(eB({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(e){return super.deleteVectors.call(this,eB(eB({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}},td=class extends e5{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new e0(this.url,this.headers,e,this.fetch)}get vectors(){return new tl(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new e6(this.url+"/iceberg",this.headers,this.fetch)}};let th="2.89.0",tf={"X-Client-Info":`gotrue-js/${th}`},tp="X-Supabase-Api-Version",tm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ty extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function tb(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class tx extends ty{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class tw extends ty{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class tv extends ty{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class tk extends tv{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class tj extends tv{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class t_ extends tv{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tN extends tv{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tE extends tv{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tS extends tv{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class tR extends tv{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function tT(e){return tb(e)&&"AuthRetryableFetchError"===e.name}class tC extends tv{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class tA extends tv{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}let tO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tP=" 	\n\r=".split(""),tI=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tP.length;t+=1)e[tP[t].charCodeAt(0)]=-2;for(let t=0;t<tO.length;t+=1)e[tO[t].charCodeAt(0)]=t;return e})();function t$(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)r(tO[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)r(tO[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function tD(e,t,r){let s=tI[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(-2===s)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function tz(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let t=0;t<e.length;t+=1)tD(e.charCodeAt(t),n,a);return t.join("")}function tL(e){let t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)tD(e.charCodeAt(t),r,s);return new Uint8Array(t)}function tM(e){let t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>t$(e,r,s)),t$(null,r,s),t.join("")}let tU=()=>"undefined"!=typeof window&&"undefined"!=typeof document,tB={tested:!1,writable:!1},tq=()=>{if(!tU())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(tB.tested)return tB.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tB.tested=!0,tB.writable=!0}catch(e){tB.tested=!0,tB.writable=!1}return tB.writable},tF=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),tW=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},tV=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},tK=async(e,t)=>{await e.removeItem(t)};class tH{constructor(){this.promise=new tH.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function tG(e){let t=e.split(".");if(3!==t.length)throw new tA("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!tg.test(t[e]))throw new tA("JWT not in base64url format");return{header:JSON.parse(tz(t[0])),payload:JSON.parse(tz(t[1])),signature:tL(t[2]),raw:{header:t[0],payload:t[1]}}}async function tJ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function tY(e){return("0"+e.toString(16)).substr(-2)}async function tX(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function tZ(e){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e):btoa(await tX(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function tQ(e,t,r=!1){let s=function(){let e=new Uint32Array(56);if("undefined"==typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,tY).join("")}(),n=s;r&&(n+="/PASSWORD_RECOVERY"),await tW(e,`${t}-code-verifier`,n);let a=await tZ(s),i=s===a?"plain":"s256";return[a,i]}tH.promiseConstructor=Promise;let t0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,t1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function t2(e){if(!t1.test(e))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function t5(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){let e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function t6(e){return JSON.parse(JSON.stringify(e))}let t4=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),t8=[502,503,504];async function t3(e){var t;let r,s;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new tR(t4(e),0);if(t8.includes(e.status))throw new tR(t4(e),e.status);try{r=await e.json()}catch(e){throw new tw(t4(e),e)}let n=function(e){let t=e.headers.get(tp);if(!t||!t.match(t0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(n&&n.getTime()>=tm["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new tC(t4(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===s)throw new tk}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new tC(t4(r),e.status,r.weak_password.reasons);throw new tx(t4(r),e.status||500,s)}async function t9(e,t,r,s){var n;let a=Object.assign({},null==s?void 0:s.headers);a[tp]||(a[tp]=tm["2024-01-01"].name),(null==s?void 0:s.jwt)&&(a.Authorization=`Bearer ${s.jwt}`);let i=null!=(n=null==s?void 0:s.query)?n:{};(null==s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);let o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await t7(e,t,r+o,{headers:a,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function t7(e,t,r,s,n,a){let i,o,l=(o={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==s?void 0:s.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),n)));try{i=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new tR(t4(e),0)}if(i.ok||await t3(i),null==s?void 0:s.noResolveJson)return i;try{return await i.json()}catch(e){await t3(e)}}function re(e){var t,r,s;let n=null;(s=e).access_token&&s.refresh_token&&s.expires_in&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!=(t=e.user)?t:e},error:null}}function rt(e){let t=re(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function rr(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function rs(e){return{data:e,error:null}}function rn(e){let{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},user:Object.assign({},J(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function ra(e){return e}let ri=["global","local","others"];class ro{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=tF(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=ri[0]){if(0>ri.indexOf(t))throw Error(`@supabase/auth-js: Parameter scope must be one of ${ri.join(", ")}`);try{return await t9(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(tb(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await t9(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rr})}catch(e){if(tb(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=J(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null==r?void 0:r.newEmail,delete s.newEmail),await t9(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:rn,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(tb(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await t9(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rr})}catch(e){if(tb(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,s,n,a,i,o;try{let l={nextPage:null,lastPage:0,total:0},c=await t9(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(n=null==(s=null==e?void 0:e.perPage)?void 0:s.toString())?n:""},xform:ra});if(c.error)throw c.error;let u=await c.json(),d=null!=(a=c.headers.get("x-total-count"))?a:0,h=null!=(o=null==(i=c.headers.get("link"))?void 0:i.split(","))?o:[];return h.length>0&&(h.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(tb(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){t2(e);try{return await t9(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rr})}catch(e){if(tb(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){t2(e);try{return await t9(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rr})}catch(e){if(tb(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){t2(e);try{return await t9(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rr})}catch(e){if(tb(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){t2(e.userId);try{let{data:t,error:r}=await t9(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(tb(e))return{data:null,error:e};throw e}}async _deleteFactor(e){t2(e.userId),t2(e.id);try{return{data:await t9(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(tb(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,r,s,n,a,i,o;try{let l={nextPage:null,lastPage:0,total:0},c=await t9(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(n=null==(s=null==e?void 0:e.perPage)?void 0:s.toString())?n:""},xform:ra});if(c.error)throw c.error;let u=await c.json(),d=null!=(a=c.headers.get("x-total-count"))?a:0,h=null!=(o=null==(i=c.headers.get("link"))?void 0:i.split(","))?o:[];return h.length>0&&(h.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(tb(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await t9(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tb(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await t9(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tb(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await t9(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tb(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await t9(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(tb(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await t9(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(tb(e))return{data:null,error:e};throw e}}}function rl(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let rc={debug:!!(globalThis&&tq()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class ru extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rd extends ru{}async function rh(e,t,r){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),rc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(s){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}if(0===t)throw rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new rd(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rc.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}))}function rf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}class rp extends Error{constructor({message:e,code:t,cause:r,name:s}){var n;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!=(n=null!=s?s:r instanceof Error?r.name:void 0)?n:"Unknown Error",this.code=t}}class rm extends rp{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}let rg=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function ry(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function rb(){var e,t;return!!(tU()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null==(e=null==navigator?void 0:navigator.credentials)?void 0:e.create)&&"function"==typeof(null==(t=null==navigator?void 0:navigator.credentials)?void 0:t.get))}async function rx(e){try{let t=await navigator.credentials.create(e);if(!t)return{data:null,error:new rm("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new rm("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){var r,s,n;let{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new rp({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if((null==(r=a.authenticatorSelection)?void 0:r.requireResidentKey)===!0)return new rp({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});else if("conditional"===t.mediation&&(null==(s=a.authenticatorSelection)?void 0:s.userVerification)==="required")return new rp({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});else if((null==(n=a.authenticatorSelection)?void 0:n.userVerification)==="required")return new rp({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else if("InvalidStateError"===e.name)return new rp({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});else if("NotAllowedError"===e.name)return new rp({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("NotSupportedError"===e.name)return new rp(0===a.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!ry(t))return new rp({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(a.rp.id!==t)return new rp({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new rp({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new rp({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new rp({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}async function rw(e){try{let t=await navigator.credentials.get(e);if(!t)return{data:null,error:new rm("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new rm("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new rp({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("NotAllowedError"===e.name)return new rp({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!ry(t))return new rp({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new rp({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new rp({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new rp({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}let rv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},rk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function rj(...e){let t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),s={};for(let n of e)if(n)for(let e in n){let a=n[e];if(void 0!==a)if(Array.isArray(a))s[e]=a;else if(r(a))s[e]=a;else if(t(a)){let r=s[e];t(r)?s[e]=rj(r,a):s[e]=rj(a)}else s[e]=a}return s}class r_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},n){try{var a,i,o,l;let{data:c,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:u};let d=null!=s?s:rg.createNewAbortSignal();if("create"===c.webauthn.type){let{user:e}=c.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(c.webauthn.type){case"create":{let t=(a=c.webauthn.credential_options.publicKey,i=null==n?void 0:n.create,rj(rv,a,i||{})),{data:r,error:s}=await rx({publicKey:t,signal:d});if(r)return{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:r}},error:null};return{data:null,error:s}}case"request":{let t=(o=c.webauthn.credential_options.publicKey,l=null==n?void 0:n.request,rj(rk,o,l||{})),{data:r,error:s}=await rw(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:t,signal:d}));if(r)return{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:r}},error:null};return{data:null,error:s}}}}catch(e){if(tb(e))return{data:null,error:e};return{data:null,error:new tw("Unexpected error in challenge",e)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:r="undefined"!=typeof window?[window.location.origin]:void 0,signal:s}={}},n){if(!t)return{data:null,error:new ty("rpId is required for WebAuthn authentication")};try{if(!rb())return{data:null,error:new tw("Browser does not support WebAuthn",null)};let{data:a,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:n});if(!a)return{data:null,error:i};let{webauthn:o}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(e){if(tb(e))return{data:null,error:e};return{data:null,error:new tw("Unexpected error in authenticate",e)}}}async _register({friendlyName:e,webauthn:{rpId:t="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:r="undefined"!=typeof window?[window.location.origin]:void 0,signal:s}={}},n){if(!t)return{data:null,error:new ty("rpId is required for WebAuthn registration")};try{if(!rb())return{data:null,error:new tw("Browser does not support WebAuthn",null)};let{data:a,error:i}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(t=>{var r;return null==(r=t.data)?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};let{data:o,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:n});if(!o)return{data:null,error:l};return this._verify({factorId:a.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}})}catch(e){if(tb(e))return{data:null,error:e};return{data:null,error:new tw("Unexpected error in register",e)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}let rN={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function rE(e,t,r){return await r()}let rS={};class rR{get jwks(){var e,t;return null!=(t=null==(e=rS[this.storageKey])?void 0:e.jwks)?t:{keys:[]}}set jwks(e){rS[this.storageKey]=Object.assign(Object.assign({},rS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!=(t=null==(e=rS[this.storageKey])?void 0:e.cachedAt)?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){rS[this.storageKey]=Object.assign(Object.assign({},rS[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const n=Object.assign(Object.assign({},rN),e);if(this.storageKey=n.storageKey,this.instanceID=null!=(t=rR.nextInstanceID[this.storageKey])?t:0,rR.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.instanceID>0&&tU()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=n.persistSession,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ro({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=tF(n.fetch),this.lock=n.lock||rE,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,this.throwOnError=n.throwOnError,n.lock?this.lock=n.lock:this.persistSession&&tU()&&(null==(r=null==globalThis?void 0:globalThis.navigator)?void 0:r.locks)?this.lock=rh:this.lock=rE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new r_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:tq()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rl(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=rl(this.memoryStorage)),tU()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(s=this.broadcastChannel)||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${th}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(tU()&&(t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),tU()&&this.detectSessionInUrl&&"none"!==r){let{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),tb(n)&&"AuthImplicitGrantRedirectError"===n.name){let t=null==(e=n.details)?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}let{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(tb(e))return this._returnResult({error:e});return this._returnResult({error:new tw("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{let{data:n,error:a}=await t9(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(s=null==e?void 0:e.options)?void 0:s.captchaToken}},xform:re});if(a||!n)return this._returnResult({data:{user:null,session:null},error:a});let i=n.session,o=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",i)),this._returnResult({data:{user:o,session:i},error:null})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signUp(e){var t,r,s;try{let n;if("email"in e){let{email:r,password:s,options:a}=e,i=null,o=null;"pkce"===this.flowType&&([i,o]=await tQ(this.storage,this.storageKey)),n=await t9(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:r,password:s,data:null!=(t=null==a?void 0:a.data)?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:re})}else if("phone"in e){let{phone:t,password:a,options:i}=e;n=await t9(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!=(r=null==i?void 0:i.data)?r:{},channel:null!=(s=null==i?void 0:i.channel)?s:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:re})}else throw new t_("You must provide either an email or phone number and a password");let{data:a,error:i}=n;if(i||!a)return await tK(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:i});let o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(await tK(this.storage,`${this.storageKey}-code-verifier`),tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:s,options:n}=e;t=await t9(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:rt})}else if("phone"in e){let{phone:r,password:s,options:n}=e;t=await t9(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:rt})}else throw new t_("You must provide either an email or phone number and a password");let{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){let e=new tj;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(s=e.options)?void 0:s.queryParams,skipBrowserRedirect:null==(n=e.options)?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,n,a,i,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{let u,{chain:d,wallet:m,statement:g,options:y}=e;if(tU())if("object"==typeof m)u=m;else{let e=window;if("ethereum"in e&&"object"==typeof e.ethereum&&"request"in e.ethereum&&"function"==typeof e.ethereum.request)u=e.ethereum;else throw Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");u=m}let b=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href),x=await u.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||0===x.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let w=rf(x[0]),v=null==(r=null==y?void 0:y.signInWithEthereum)?void 0:r.chainId;v||(v=parseInt(await u.request({method:"eth_chainId"}),16)),f=function(e){var t;let{chainId:r,domain:s,expirationTime:n,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null==(t=e.statement)?void 0:t.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let f=rf(e.address),p=u?`${u}://${s}`:s,m=e.statement?`${e.statement}
`:"",g=`${p} wants you to sign in with your Ethereum account:
${f}

${m}`,y=`URI: ${d}
Version: ${h}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(n&&(y+=`
Expiration Time: ${n.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let e="\nResources:";for(let t of c){if(!t||"string"!=typeof t)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`
- ${t}`}y+=e}return`${g}
${y}`}({domain:b.host,address:w,statement:g,uri:b.href,version:"1",chainId:v,nonce:null==(s=null==y?void 0:y.signInWithEthereum)?void 0:s.nonce,issuedAt:null!=(a=null==(n=null==y?void 0:y.signInWithEthereum)?void 0:n.issuedAt)?a:new Date,expirationTime:null==(i=null==y?void 0:y.signInWithEthereum)?void 0:i.expirationTime,notBefore:null==(o=null==y?void 0:y.signInWithEthereum)?void 0:o.notBefore,requestId:null==(l=null==y?void 0:y.signInWithEthereum)?void 0:l.requestId,resources:null==(c=null==y?void 0:y.signInWithEthereum)?void 0:c.resources}),p=await u.request({method:"personal_sign",params:[(h=f,"0x"+Array.from(new TextEncoder().encode(h),e=>e.toString(16).padStart(2,"0")).join("")),w]})}try{let{data:t,error:r}=await t9(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:p},(null==(u=e.options)?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null==(d=e.options)?void 0:d.captchaToken}}:null),xform:re});if(r)throw r;if(!t||!t.session||!t.user){let e=new tj;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSolana(e){var t,r,s,n,a,i,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{let d,{chain:h,wallet:m,statement:g,options:y}=e;if(tU())if("object"==typeof m)d=m;else{let e=window;if("solana"in e&&"object"==typeof e.solana&&("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))d=e.solana;else throw Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");d=m}let b=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href);if("signIn"in d&&d.signIn){let e,t=await d.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==y?void 0:y.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),g?{statement:g}:null));if(Array.isArray(t)&&t[0]&&"object"==typeof t[0])e=t[0];else if(t&&"object"==typeof t&&"signedMessage"in t&&"signature"in t)e=t;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in e&&"signature"in e&&("string"==typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array)f="string"==typeof e.signedMessage?e.signedMessage:new TextDecoder().decode(e.signedMessage),p=e.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in d)||"function"!=typeof d.signMessage||!("publicKey"in d)||"object"!=typeof d||!d.publicKey||!("toBase58"in d.publicKey)||"function"!=typeof d.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${b.host} wants you to sign in with your Solana account:`,d.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${null!=(s=null==(r=null==y?void 0:y.signInWithSolana)?void 0:r.issuedAt)?s:new Date().toISOString()}`,...(null==(n=null==y?void 0:y.signInWithSolana)?void 0:n.notBefore)?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...(null==(a=null==y?void 0:y.signInWithSolana)?void 0:a.expirationTime)?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...(null==(i=null==y?void 0:y.signInWithSolana)?void 0:i.chainId)?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...(null==(o=null==y?void 0:y.signInWithSolana)?void 0:o.nonce)?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...(null==(l=null==y?void 0:y.signInWithSolana)?void 0:l.requestId)?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...(null==(u=null==(c=null==y?void 0:y.signInWithSolana)?void 0:c.resources)?void 0:u.length)?["Resources",...y.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");let e=await d.signMessage(new TextEncoder().encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{let{data:t,error:r}=await t9(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:tM(p)},(null==(d=e.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null==(h=e.options)?void 0:h.captchaToken}}:null),xform:re});if(r)throw r;if(!t||!t.session||!t.user){let e=new tj;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _exchangeCodeForSession(e){let t=await tV(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!=t?t:"").split("/");try{if(!r&&"pkce"===this.flowType)throw new tS;let{data:t,error:n}=await t9(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:re});if(await tK(this.storage,`${this.storageKey}-code-verifier`),n)throw n;if(!t||!t.session||!t.user){let e=new tj;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:n})}catch(e){if(await tK(this.storage,`${this.storageKey}-code-verifier`),tb(e))return this._returnResult({data:{user:null,session:null,redirectType:null},error:e});throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:s,access_token:n,nonce:a}=e,{data:i,error:o}=await t9(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:re});if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let e=new tj;return this._returnResult({data:{user:null,session:null},error:e})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:i,error:o})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(e){var t,r,s,n,a;try{if("email"in e){let{email:s,options:n}=e,a=null,i=null;"pkce"===this.flowType&&([a,i]=await tQ(this.storage,this.storageKey));let{error:o}=await t9(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!=(t=null==n?void 0:n.data)?t:{},create_user:null==(r=null==n?void 0:n.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==n?void 0:n.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){let{phone:t,options:r}=e,{data:i,error:o}=await t9(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(s=null==r?void 0:r.data)?s:{},create_user:null==(n=null==r?void 0:r.shouldCreateUser)||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(a=null==r?void 0:r.channel)?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o})}throw new t_("You must provide either an email or phone number.")}catch(e){if(await tK(this.storage,`${this.storageKey}-code-verifier`),tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=null==(t=e.options)?void 0:t.redirectTo,n=null==(r=e.options)?void 0:r.captchaToken);let{data:a,error:i}=await t9(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:re});if(i)throw i;if(!a)throw Error("An error occurred on token verification.");let o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSSO(e){var t,r,s,n,a;try{let i=null,o=null;"pkce"===this.flowType&&([i,o]=await tQ(this.storage,this.storageKey));let l=await t9(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(s=null==e?void 0:e.options)?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:rs});return(null==(n=l.data)?void 0:n.url)&&tU()&&!(null==(a=e.options)?void 0:a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(e){if(await tK(this.storage,`${this.storageKey}-code-verifier`),tb(e))return this._returnResult({data:null,error:e});throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new tk;let{error:s}=await t9(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:s,options:n}=e,{error:a}=await t9(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},redirectTo:null==n?void 0:n.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if("phone"in e){let{phone:r,type:s,options:n}=e,{data:a,error:i}=await t9(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i})}throw new t_("You must provide either an email or phone number and a type")}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,r=await tV(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let s=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){let e=await tV(this.userStorage,this.storageKey+"-user");(null==e?void 0:e.user)?t.user=e.user:t.user=t5()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){var e;let r={value:this.suppressGetSessionWarning};t.user=(e=t.user,new Proxy(e,{get:(e,t,s)=>{if("__isInsecureUserWarningProxy"===t)return!0;if("symbol"==typeof t){let r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r||"Symbol(nodejs.util.inspect.custom)"===r)return Reflect.get(e,t,s)}return r.value||"string"!=typeof t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,s)}})),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:n,error:a}=await this._callRefreshToken(t.refresh_token);if(a)return this._returnResult({data:{session:null},error:a});return this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;let t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{if(e)return await t9(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rr});return await this._useSession(async e=>{var t,r,s;let{data:n,error:a}=e;if(a)throw a;return(null==(t=n.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await t9(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(s=null==(r=n.session)?void 0:r.access_token)?s:void 0,xform:rr}):{data:{user:null},error:new tk}})}catch(e){if(tb(e))return tb(e)&&"AuthSessionMissingError"===e.name&&(await this._removeSession(),await tK(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new tk;let a=s.session,i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await tQ(this.storage,this.storageKey));let{data:l,error:c}=await t9(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:rr});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(e){if(await tK(this.storage,`${this.storageKey}-code-verifier`),tb(e))return this._returnResult({data:{user:null},error:e});throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tk;let t=Date.now()/1e3,r=t,s=!0,n=null,{payload:a}=tG(e.access_token);if(a.exp&&(s=(r=a.exp)<=t),s){let{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};n=t}else{let{data:s,error:a}=await this._getUser(e.access_token);if(a)throw a;n={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return this._returnResult({data:{user:n.user,session:n},error:null})}catch(e){if(tb(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:s,error:n}=t;if(n)throw n;e=null!=(r=s.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new tk;let{data:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?this._returnResult({data:{user:null,session:null},error:n}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(e,t){try{if(!tU())throw new tN("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tN(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new tE("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new tN("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tE("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!n||!i||!a||!l)throw new tN("No session defined in URL");let c=Math.round(Date.now()/1e3),u=parseInt(i),d=c+u;o&&(d=parseInt(o));let h=d-c;1e3*h<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);let f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);let{data:p,error:m}=await this._getUser(n);if(m)throw m;let g={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:u,expires_at:d,refresh_token:a,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(e){if(tb(e))return this._returnResult({data:{session:null,redirectType:null},error:e});throw e}}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await tV(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:s,error:n}=t;if(n)return this._returnResult({error:n});let a=null==(r=s.session)?void 0:r.access_token;if(a){let{error:t}=await this.admin.signOut(a,e);if(t&&!(tb(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await tK(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{let{data:{session:s},error:n}=t;if(n)throw n;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await (null==(s=this.stateChangeEmitters.get(e))?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;"pkce"===this.flowType&&([r,s]=await tQ(this.storage,this.storageKey,!0));try{return await t9(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(await tK(this.storage,`${this.storageKey}-code-verifier`),tb(e))return this._returnResult({data:null,error:e});throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!=(e=t.user.identities)?e:[]},error:null})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{let{data:r,error:s}=await this._useSession(async t=>{var r,s,n,a,i;let{data:o,error:l}=t;if(l)throw l;let c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(s=e.options)?void 0:s.scopes,queryParams:null==(n=e.options)?void 0:n.queryParams,skipBrowserRedirect:!0});return await t9(this.fetch,"GET",c,{headers:this.headers,jwt:null!=(i=null==(a=o.session)?void 0:a.access_token)?i:void 0})});if(s)throw s;return!tU()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(t){if(tb(t))return this._returnResult({data:{provider:e.provider,url:null},error:t});throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{let{error:s,data:{session:n}}=t;if(s)throw s;let{options:a,provider:i,token:o,access_token:l,nonce:c}=e,{data:u,error:d}=await t9(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(r=null==n?void 0:n.access_token)?r:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:re});if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user)return this._returnResult({data:{user:null,session:null},error:new tj});return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:d})}catch(e){if(await tK(this.storage,`${this.storageKey}-code-verifier`),tb(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;let{data:n,error:a}=t;if(a)throw a;return await t9(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(s=null==(r=n.session)?void 0:r.access_token)?s:void 0})})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,s;let n=Date.now();return await (r=async r=>(r>0&&await tJ(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await t9(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:re})),s=(e,t)=>{let r=200*Math.pow(2,e);return t&&tT(t)&&Date.now()+r-n<3e4},new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{let t=await r(n);if(!s(n,null,t))return void e(t)}catch(e){if(!s(n,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),tb(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),tU()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=await tV(this.storage,this.storageKey);if(s&&this.userStorage){let t=await tV(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!t&&(t={user:s.user},await tW(this.userStorage,this.storageKey+"-user",t)),s.user=null!=(e=null==t?void 0:t.user)?e:t5()}else if(s&&!s.user&&!s.user){let e=await tV(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await tK(this.storage,this.storageKey+"-user"),await tW(this.storage,this.storageKey,s)):s.user=t5()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),null!==s&&await this._removeSession();return}let n=(null!=(t=s.expires_at)?t:1/0)*1e3-Date.now()<9e4;if(this._debug(r,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&s.refresh_token){let{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),tT(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{let{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(r,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(e){this._debug(r,"error",e),console.error(e);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new tk;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new tH;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new tk;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let s={data:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),tb(e)){let r={data:null,error:e};return tT(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let s=[],n=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){s.push(e)}});if(await Promise.all(n),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await tK(this.storage,`${this.storageKey}-code-verifier`);let t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await tW(this.userStorage,this.storageKey+"-user",{user:t.user});let e=Object.assign({},t);delete e.user;let s=t6(e);await tW(this.storage,this.storageKey,s)}else{let e=t6(t);await tW(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await tK(this.storage,this.storageKey),await tK(this.storage,this.storageKey+"-code-verifier"),await tK(this.storage,this.storageKey+"-user"),this.userStorage&&await tK(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tU()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let s=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ru)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tU()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let s=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await tQ(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:s,error:n}=t;return n?this._returnResult({data:null,error:n}):await t9(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token})})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;let{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});let i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await t9(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null==(s=null==o?void 0:o.totp)?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r,s,n;let{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});let o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?(s=e.webauthn.credential_response,"toJSON"in s&&"function"==typeof s.toJSON?s.toJSON():{id:s.id,rawId:s.id,response:{attestationObject:tM(new Uint8Array(s.response.attestationObject)),clientDataJSON:tM(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:null!=(n=s.authenticatorAttachment)?n:void 0}):function(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();let r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:tM(new Uint8Array(s.authenticatorData)),clientDataJSON:tM(new Uint8Array(s.clientDataJSON)),signature:tM(new Uint8Array(s.signature)),userHandle:s.userHandle?tM(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!=(t=e.authenticatorAttachment)?t:void 0}}(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await t9(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null==(r=null==a?void 0:a.session)?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:s,error:n}=t;if(n)return this._returnResult({data:null,error:n});let a=await t9(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token});if(a.error)return a;let{data:i}=a;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:r,excludeCredentials:s}=e,n=J(e,["challenge","user","excludeCredentials"]),a=tL(t).buffer,i=Object.assign(Object.assign({},r),{id:tL(r.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:a,user:i});if(s&&s.length>0){o.excludeCredentials=Array(s.length);for(let e=0;e<s.length;e++){let t=s[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:tL(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:r}=e,s=J(e,["challenge","allowCredentials"]),n=tL(t).buffer,a=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){a.allowCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:tL(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;let{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};let s={all:[],phone:[],totp:[],webauthn:[]};for(let r of null!=(e=null==t?void 0:t.factors)?e:[])s.all.push(r),"verified"===r.status&&s[r.factor_type].push(r);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;let{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:n}=tG(r.access_token),a=null;n.aal&&(a=n.aal);let i=a;return(null!=(t=null==(e=r.user.factors)?void 0:e.filter(e=>"verified"===e.status))?t:[]).length>0&&(i="aal2"),{data:{currentLevel:a,nextLevel:i,currentAuthenticationMethods:n.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await t9(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new tk})})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:s},error:n}=r;if(n)return this._returnResult({data:null,error:n});if(!s)return this._returnResult({data:null,error:new tk});let a=await t9(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&tU()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:s},error:n}=r;if(n)return this._returnResult({data:null,error:n});if(!s)return this._returnResult({data:null,error:new tk});let a=await t9(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&tU()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await t9(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new tk})})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{let{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await t9(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new tk})})}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;let s=Date.now();if((r=this.jwks.keys.find(t=>t.kid===e))&&this.jwks_cached_at+6e5>s)return r;let{data:n,error:a}=await t9(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length&&(this.jwks=n,this.jwks_cached_at=s,r=n.keys.find(t=>t.kid===e))?r:null}async getClaims(e,t={}){try{var r;let s,n=e;if(!n){let{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}let{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=tG(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(i.exp);let u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks);if(!u){let{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:a,signature:o},error:null}}let d=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,(r=`${l}.${c}`,s=[],!function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){let t=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(s,t)}}(r,e=>s.push(e)),new Uint8Array(s))))throw new tA("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(e){if(tb(e))return this._returnResult({data:null,error:e});throw e}}}rR.nextInstanceID={};let rT=rR,rC="";rC="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let rA={headers:{"X-Client-Info":`supabase-js-${rC}/2.89.0`}},rO={schema:"public"},rP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rI={};function r$(e){return(r$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function rz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=r$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=r$(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==r$(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rL=class extends rT{constructor(e){super(e)}},rM=class{constructor(e,t,r){var s,n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,s;let{db:n,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:rz(rz({},l),n),auth:rz(rz({},c),a),realtime:rz(rz({},u),i),storage:{},global:rz(rz(rz({},d),o),{},{headers:rz(rz({},null!=(r=null==d?void 0:d.headers)?r:{}),null!=(s=null==o?void 0:o.headers)?s:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:rO,realtime:rI,auth:rz(rz({},rP),{},{storageKey:o}),global:rA});this.storageKey=null!=(s=l.auth.storageKey)?s:"",this.headers=null!=(n=l.global.headers)?n:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(a=l.auth)?a:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let s=r?(...e)=>r(...e):(...e)=>fetch(...e),n=Headers;return async(r,a)=>{var i;let o=null!=(i=await t())?i:e,l=new n(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,rz(rz({},a),{},{headers:l}))}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(rz({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new es(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new td(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Y(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(e=null==(t=r.session)?void 0:t.access_token)?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:a,flowType:i,lock:o,debug:l,throwOnError:c},u,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rL({url:this.authUrl.href,headers:rz(rz({},h),u),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:n,flowType:i,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new e_(this.realtimeUrl.href,rz(rz({},e),{},{params:rz(rz({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}};(function(){if("undefined"!=typeof window||void 0===F.default)return!1;let e=F.default.version;if(null==e)return!1;let t=e.match(/^v(\d+)\./);return!!t&&18>=parseInt(t[1],10)})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let rU=new rM("https://ukfljyhpkhzadjwhsvzf.supabase.co","sb_publishable_KKQJ_me6VhhkNQDeoJvEZw_9vJFPeIW",void 0);function rB(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function rq(...e){return t=>{let r=!1,s=e.map(e=>{let s=rB(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():rB(e[t],null)}}}}function rF(...e){return q.useCallback(rq(...e),e)}var rW=Symbol.for("react.lazy"),rV=q[" use ".trim().toString()];function rK(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===rW&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function rH(e){var t;let r,s=(t=e,(r=q.forwardRef((e,t)=>{let{children:r,...s}=e;if(rK(r)&&"function"==typeof rV&&(r=rV(r._payload)),q.isValidElement(r)){var n;let e,a,i=(n=r,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==q.Fragment&&(o.ref=t?rq(t,i):i),q.cloneElement(r,o)}return q.Children.count(r)>1?q.Children.only(null):null})).displayName=`${t}.SlotClone`,r),n=q.forwardRef((e,t)=>{let{children:r,...n}=e;rK(r)&&"function"==typeof rV&&(r=rV(r._payload));let a=q.Children.toArray(r),i=a.find(rY);if(i){let e=i.props.children,r=a.map(t=>t!==i?t:q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null);return(0,B.jsx)(s,{...n,ref:t,children:q.isValidElement(e)?q.cloneElement(e,void 0,r):null})}return(0,B.jsx)(s,{...n,ref:t,children:r})});return n.displayName=`${e}.Slot`,n}var rG=rH("Slot"),rJ=Symbol("radix.slottable");function rY(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===rJ}function rX(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(s=e(t[r]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}(e))&&(s&&(s+=" "),s+=t);return s}let rZ=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,rQ=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return rX(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:a}=t,i=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],s=null==a?void 0:a[e];if(null===t)return null;let i=rZ(t)||rZ(s);return n[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return rX(e,i,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...o}[t]):({...a,...o})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)},r0=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),r1=[],r2=(e,t,r)=>{if(0==e.length-t)return r.classGroupId;let s=e[t],n=r.nextPart.get(s);if(n){let r=r2(e,t+1,n);if(r)return r}let a=r.validators;if(null===a)return;let i=0===t?e.join("-"):e.slice(t).join("-"),o=a.length;for(let e=0;e<o;e++){let t=a[e];if(t.validator(i))return t.classGroupId}},r5=(e,t)=>{let r=r0();for(let s in e)r6(e[s],r,s,t);return r},r6=(e,t,r,s)=>{let n=e.length;for(let a=0;a<n;a++)r4(e[a],t,r,s)},r4=(e,t,r,s)=>{"string"==typeof e?r8(e,t,r):"function"==typeof e?r3(e,t,r,s):r9(e,t,r,s)},r8=(e,t,r)=>{(""===e?t:r7(t,e)).classGroupId=r},r3=(e,t,r,s)=>{se(e)?r6(e(s),t,r,s):(null===t.validators&&(t.validators=[]),t.validators.push({classGroupId:r,validator:e}))},r9=(e,t,r,s)=>{let n=Object.entries(e),a=n.length;for(let e=0;e<a;e++){let[a,i]=n[e];r6(i,r7(t,a),r,s)}},r7=(e,t)=>{let r=e,s=t.split("-"),n=s.length;for(let e=0;e<n;e++){let t=s[e],n=r.nextPart.get(t);n||(n=r0(),r.nextPart.set(t,n)),r=n}return r},se=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,st=[],sr=(e,t,r,s,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:s,isExternal:n}),ss=/\s+/,sn=e=>{let t;if("string"==typeof e)return e;let r="";for(let s=0;s<e.length;s++)e[s]&&(t=sn(e[s]))&&(r&&(r+=" "),r+=t);return r},sa=[],si=e=>{let t=t=>t[e]||sa;return t.isThemeGetter=!0,t},so=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sl=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sc=/^\d+\/\d+$/,su=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sh=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,sf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sp=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,sm=e=>sc.test(e),sg=e=>!!e&&!Number.isNaN(Number(e)),sy=e=>!!e&&Number.isInteger(Number(e)),sb=e=>e.endsWith("%")&&sg(e.slice(0,-1)),sx=e=>su.test(e),sw=()=>!0,sv=e=>sd.test(e)&&!sh.test(e),sk=()=>!1,sj=e=>sf.test(e),s_=e=>sp.test(e),sN=e=>!sS(e)&&!sP(e),sE=e=>sU(e,sW,sk),sS=e=>so.test(e),sR=e=>sU(e,sV,sv),sT=e=>sU(e,sK,sg),sC=e=>sU(e,sq,sk),sA=e=>sU(e,sF,s_),sO=e=>sU(e,sG,sj),sP=e=>sl.test(e),sI=e=>sB(e,sV),s$=e=>sB(e,sH),sD=e=>sB(e,sq),sz=e=>sB(e,sW),sL=e=>sB(e,sF),sM=e=>sB(e,sG,!0),sU=(e,t,r)=>{let s=so.exec(e);return!!s&&(s[1]?t(s[1]):r(s[2]))},sB=(e,t,r=!1)=>{let s=sl.exec(e);return!!s&&(s[1]?t(s[1]):r)},sq=e=>"position"===e||"percentage"===e,sF=e=>"image"===e||"url"===e,sW=e=>"length"===e||"size"===e||"bg-size"===e,sV=e=>"length"===e,sK=e=>"number"===e,sH=e=>"family-name"===e,sG=e=>"shadow"===e,sJ=((e,...t)=>{let r,s,n,a,i=e=>{let t=s(e);if(t)return t;let a=((e,t)=>{let{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:a}=t,i=[],o=e.trim().split(ss),l="";for(let e=o.length-1;e>=0;e-=1){let t=o[e],{isExternal:c,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=r(t);if(c){l=t+(l.length>0?" "+l:l);continue}let p=!!f,m=s(p?h.substring(0,f):h);if(!m){if(!p||!(m=s(h))){l=t+(l.length>0?" "+l:l);continue}p=!1}let g=0===u.length?"":1===u.length?u[0]:a(u).join(":"),y=d?g+"!":g,b=y+m;if(i.indexOf(b)>-1)continue;i.push(b);let x=n(m,p);for(let e=0;e<x.length;++e){let t=x[e];i.push(y+t)}l=t+(l.length>0?" "+l:l)}return l})(e,r);return n(e,a),a};return a=o=>{var l;let c;return s=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=Object.create(null),s=Object.create(null),n=(n,a)=>{r[n]=a,++t>e&&(t=0,s=r,r=Object.create(null))};return{get(e){let t=r[e];return void 0!==t?t:void 0!==(t=s[e])?(n(e,t),t):void 0},set(e,t){e in r?r[e]=t:n(e,t)}}})((l=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:r}=e,s=e=>{let t,r=[],s=0,n=0,a=0,i=e.length;for(let o=0;o<i;o++){let i=e[o];if(0===s&&0===n){if(":"===i){r.push(e.slice(a,o)),a=o+1;continue}if("/"===i){t=o;continue}}"["===i?s++:"]"===i?s--:"("===i?n++:")"===i&&n--}let o=0===r.length?e:e.slice(a),l=o,c=!1;return o.endsWith("!")?(l=o.slice(0,-1),c=!0):o.startsWith("!")&&(l=o.slice(1),c=!0),sr(r,c,l,t&&t>a?t-a:void 0)};if(t){let e=t+":",r=s;s=t=>t.startsWith(e)?r(t.slice(e.length)):sr(st,!1,t,void 0,!0)}if(r){let e=s;s=t=>r({className:t,parseClassName:e})}return s})(l),sortModifiers:(c=new Map,l.orderSensitiveModifiers.forEach((e,t)=>{c.set(e,1e6+t)}),e=>{let t=[],r=[];for(let s=0;s<e.length;s++){let n=e[s],a="["===n[0],i=c.has(n);a||i?(r.length>0&&(r.sort(),t.push(...r),r=[]),t.push(n)):r.push(n)}return r.length>0&&(r.sort(),t.push(...r)),t}),...(e=>{let t=(e=>{let{theme:t,classGroups:r}=e;return r5(r,t)})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]")){var r;let t,s,n;return -1===(r=e).slice(1,-1).indexOf(":")?void 0:(s=(t=r.slice(1,-1)).indexOf(":"),(n=t.slice(0,s))?"arbitrary.."+n:void 0)}let s=e.split("-"),n=+(""===s[0]&&s.length>1);return r2(s,n,t)},getConflictingClassGroupIds:(e,t)=>{if(t){let t=s[e],n=r[e];if(t){if(n){let e=Array(n.length+t.length);for(let t=0;t<n.length;t++)e[t]=n[t];for(let r=0;r<t.length;r++)e[n.length+r]=t[r];return e}return t}return n||r1}return r[e]||r1}}})(l)}).cache.get,n=r.cache.set,a=i,i(o)},(...e)=>a(((...e)=>{let t,r,s=0,n="";for(;s<e.length;)(t=e[s++])&&(r=sn(t))&&(n&&(n+=" "),n+=r);return n})(...e))})(()=>{let e=si("color"),t=si("font"),r=si("text"),s=si("font-weight"),n=si("tracking"),a=si("leading"),i=si("breakpoint"),o=si("container"),l=si("spacing"),c=si("radius"),u=si("shadow"),d=si("inset-shadow"),h=si("text-shadow"),f=si("drop-shadow"),p=si("blur"),m=si("perspective"),g=si("aspect"),y=si("ease"),b=si("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...w(),sP,sS],k=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],_=()=>[sP,sS,l],N=()=>[sm,"full","auto",..._()],E=()=>[sy,"none","subgrid",sP,sS],S=()=>["auto",{span:["full",sy,sP,sS]},sy,sP,sS],R=()=>[sy,"auto",sP,sS],T=()=>["auto","min","max","fr",sP,sS],C=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],A=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",..._()],P=()=>[sm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],I=()=>[e,sP,sS],$=()=>[...w(),sD,sC,{position:[sP,sS]}],D=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",sz,sE,{size:[sP,sS]}],L=()=>[sb,sI,sR],M=()=>["","none","full",c,sP,sS],U=()=>["",sg,sI,sR],B=()=>["solid","dashed","dotted","double"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>[sg,sb,sD,sC],W=()=>["","none",p,sP,sS],V=()=>["none",sg,sP,sS],K=()=>["none",sg,sP,sS],H=()=>[sg,sP,sS],G=()=>[sm,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[sx],breakpoint:[sx],color:[sw],container:[sx],"drop-shadow":[sx],ease:["in","out","in-out"],font:[sN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[sx],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[sx],shadow:[sx],spacing:["px",sg],text:[sx],"text-shadow":[sx],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",sm,sS,sP,g]}],container:["container"],columns:[{columns:[sg,sS,sP,o]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[sy,"auto",sP,sS]}],basis:[{basis:[sm,"full","auto",o,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[sg,sm,"auto","initial","none",sS]}],grow:[{grow:["",sg,sP,sS]}],shrink:[{shrink:["",sg,sP,sS]}],order:[{order:[sy,"first","last","none",sP,sS]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:S()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:S()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":T()}],"auto-rows":[{"auto-rows":T()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:[...C(),"normal"]}],"justify-items":[{"justify-items":[...A(),"normal"]}],"justify-self":[{"justify-self":["auto",...A()]}],"align-content":[{content:["normal",...C()]}],"align-items":[{items:[...A(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...A(),{baseline:["","last"]}]}],"place-content":[{"place-content":C()}],"place-items":[{"place-items":[...A(),"baseline"]}],"place-self":[{"place-self":["auto",...A()]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:P()}],w:[{w:[o,"screen",...P()]}],"min-w":[{"min-w":[o,"screen","none",...P()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...P()]}],h:[{h:["screen","lh",...P()]}],"min-h":[{"min-h":["screen","lh","none",...P()]}],"max-h":[{"max-h":["screen","lh",...P()]}],"font-size":[{text:["base",r,sI,sR]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,sP,sT]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",sb,sS]}],"font-family":[{font:[s$,sS,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,sP,sS]}],"line-clamp":[{"line-clamp":[sg,"none",sP,sT]}],leading:[{leading:[a,..._()]}],"list-image":[{"list-image":["none",sP,sS]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",sP,sS]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:[sg,"from-font","auto",sP,sR]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[sg,"auto",sP,sS]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",sP,sS]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",sP,sS]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$()}],"bg-repeat":[{bg:D()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},sy,sP,sS],radial:["",sP,sS],conic:[sy,sP,sS]},sL,sA]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:M()}],"rounded-s":[{"rounded-s":M()}],"rounded-e":[{"rounded-e":M()}],"rounded-t":[{"rounded-t":M()}],"rounded-r":[{"rounded-r":M()}],"rounded-b":[{"rounded-b":M()}],"rounded-l":[{"rounded-l":M()}],"rounded-ss":[{"rounded-ss":M()}],"rounded-se":[{"rounded-se":M()}],"rounded-ee":[{"rounded-ee":M()}],"rounded-es":[{"rounded-es":M()}],"rounded-tl":[{"rounded-tl":M()}],"rounded-tr":[{"rounded-tr":M()}],"rounded-br":[{"rounded-br":M()}],"rounded-bl":[{"rounded-bl":M()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...B(),"hidden","none"]}],"divide-style":[{divide:[...B(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...B(),"none","hidden"]}],"outline-offset":[{"outline-offset":[sg,sP,sS]}],"outline-w":[{outline:["",sg,sI,sR]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",u,sM,sO]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",d,sM,sO]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[sg,sR]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",h,sM,sO]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[sg,sP,sS]}],"mix-blend":[{"mix-blend":[...q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[sg]}],"mask-image-linear-from-pos":[{"mask-linear-from":F()}],"mask-image-linear-to-pos":[{"mask-linear-to":F()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":F()}],"mask-image-t-to-pos":[{"mask-t-to":F()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":F()}],"mask-image-r-to-pos":[{"mask-r-to":F()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":F()}],"mask-image-b-to-pos":[{"mask-b-to":F()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":F()}],"mask-image-l-to-pos":[{"mask-l-to":F()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":F()}],"mask-image-x-to-pos":[{"mask-x-to":F()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":F()}],"mask-image-y-to-pos":[{"mask-y-to":F()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[sP,sS]}],"mask-image-radial-from-pos":[{"mask-radial-from":F()}],"mask-image-radial-to-pos":[{"mask-radial-to":F()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[sg]}],"mask-image-conic-from-pos":[{"mask-conic-from":F()}],"mask-image-conic-to-pos":[{"mask-conic-to":F()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$()}],"mask-repeat":[{mask:D()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",sP,sS]}],filter:[{filter:["","none",sP,sS]}],blur:[{blur:W()}],brightness:[{brightness:[sg,sP,sS]}],contrast:[{contrast:[sg,sP,sS]}],"drop-shadow":[{"drop-shadow":["","none",f,sM,sO]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",sg,sP,sS]}],"hue-rotate":[{"hue-rotate":[sg,sP,sS]}],invert:[{invert:["",sg,sP,sS]}],saturate:[{saturate:[sg,sP,sS]}],sepia:[{sepia:["",sg,sP,sS]}],"backdrop-filter":[{"backdrop-filter":["","none",sP,sS]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[sg,sP,sS]}],"backdrop-contrast":[{"backdrop-contrast":[sg,sP,sS]}],"backdrop-grayscale":[{"backdrop-grayscale":["",sg,sP,sS]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[sg,sP,sS]}],"backdrop-invert":[{"backdrop-invert":["",sg,sP,sS]}],"backdrop-opacity":[{"backdrop-opacity":[sg,sP,sS]}],"backdrop-saturate":[{"backdrop-saturate":[sg,sP,sS]}],"backdrop-sepia":[{"backdrop-sepia":["",sg,sP,sS]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",sP,sS]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[sg,"initial",sP,sS]}],ease:[{ease:["linear","initial",y,sP,sS]}],delay:[{delay:[sg,sP,sS]}],animate:[{animate:["none",b,sP,sS]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,sP,sS]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:V()}],"rotate-x":[{"rotate-x":V()}],"rotate-y":[{"rotate-y":V()}],"rotate-z":[{"rotate-z":V()}],scale:[{scale:K()}],"scale-x":[{"scale-x":K()}],"scale-y":[{"scale-y":K()}],"scale-z":[{"scale-z":K()}],"scale-3d":["scale-3d"],skew:[{skew:H()}],"skew-x":[{"skew-x":H()}],"skew-y":[{"skew-y":H()}],transform:[{transform:[sP,sS,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:G()}],"translate-x":[{"translate-x":G()}],"translate-y":[{"translate-y":G()}],"translate-z":[{"translate-z":G()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",sP,sS]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",sP,sS]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[sg,sI,sR,sT]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function sY(...e){return sJ(rX(e))}let sX=rQ("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function sZ({className:e,variant:t,size:r,asChild:s=!1,...n}){return(0,B.jsx)(s?rG:"button",{"data-slot":"button",className:sY(sX({variant:t,size:r,className:e})),...n})}function sQ({className:e,...t}){return(0,B.jsx)("div",{"data-slot":"card",className:sY("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function s0({className:e,...t}){return(0,B.jsx)("div",{"data-slot":"card-header",className:sY("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function s1({className:e,...t}){return(0,B.jsx)("h4",{"data-slot":"card-title",className:sY("leading-none",e),...t})}function s2({className:e,...t}){return(0,B.jsx)("p",{"data-slot":"card-description",className:sY("text-muted-foreground",e),...t})}function s5({className:e,...t}){return(0,B.jsx)("div",{"data-slot":"card-content",className:sY("px-6 [&:last-child]:pb-6",e),...t})}let s6=rQ("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function s4({className:e,variant:t,asChild:r=!1,...s}){return(0,B.jsx)(r?rG:"span",{"data-slot":"badge",className:sY(s6({variant:t}),e),...s})}function s8(e){let[t,r]=(0,q.useState)(!1),{src:s,alt:n,style:a,className:i,...o}=e;return t?(0,B.jsx)("div",{className:`inline-block bg-gray-100 text-center align-middle ${i??""}`,style:a,children:(0,B.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,B.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...o,"data-original-url":s})})}):(0,B.jsx)("img",{src:s,alt:n,className:i,style:a,...o,onError:()=>{r(!0)}})}function s3(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),!1===r||!s.defaultPrevented)return t?.(s)}}function s9(e,t=[]){let r=[],s=()=>{let t=r.map(e=>q.createContext(e));return function(r){let s=r?.[e]||t;return q.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return s.scopeName=e,[function(t,s){let n=q.createContext(s),a=r.length;r=[...r,s];let i=t=>{let{scope:r,children:s,...i}=t,o=r?.[e]?.[a]||n,l=q.useMemo(()=>i,Object.values(i));return(0,B.jsx)(o.Provider,{value:l,children:s})};return i.displayName=t+"Provider",[i,function(r,i){let o=i?.[e]?.[a]||n,l=q.useContext(o);if(l)return l;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:s})=>{let n=r(e)[`__scope${s}`];return{...t,...n}},{});return q.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(s,...t)]}"undefined"!=typeof window&&window.document&&window.document.createElement;var s7=globalThis?.document?q.useLayoutEffect:()=>{},ne=q[" useId ".trim().toString()]||(()=>void 0),nt=0;function nr(e){let[t,r]=q.useState(ne());return s7(()=>{e||r(e=>e??String(nt++))},[e]),e||(t?`radix-${t}`:"")}q[" useEffectEvent ".trim().toString()],q[" useInsertionEffect ".trim().toString()];var ns=q[" useInsertionEffect ".trim().toString()]||s7;function nn({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){let[n,a,i]=function({defaultProp:e,onChange:t}){let[r,s]=q.useState(e),n=q.useRef(r),a=q.useRef(t);return ns(()=>{a.current=t},[t]),q.useEffect(()=>{n.current!==r&&(a.current?.(r),n.current=r)},[r,n]),[r,s,a]}({defaultProp:t,onChange:r}),o=void 0!==e,l=o?e:n;{let t=q.useRef(void 0!==e);q.useEffect(()=>{let e=t.current;if(e!==o){let t=o?"controlled":"uncontrolled";console.warn(`${s} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=o},[o,s])}return[l,q.useCallback(t=>{if(o){let r="function"==typeof t?t(e):t;r!==e&&i.current?.(r)}else a(t)},[o,e,a,i])]}Symbol("RADIX:SYNC_STATE");var na=e.i(93456),ni=Symbol("radix.slottable");function no(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ni}var nl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,s;let n,a,i,o=(s=r=`Primitive.${t}`,(n=q.forwardRef((e,t)=>{let{children:r,...s}=e;if(q.isValidElement(r)){var n;let e,a,i=(n=r,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==q.Fragment&&(o.ref=t?rq(t,i):i),q.cloneElement(r,o)}return q.Children.count(r)>1?q.Children.only(null):null})).displayName=`${s}.SlotClone`,a=n,(i=q.forwardRef((e,t)=>{let{children:r,...s}=e,n=q.Children.toArray(r),i=n.find(no);if(i){let e=i.props.children,r=n.map(t=>t!==i?t:q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null);return(0,B.jsx)(a,{...s,ref:t,children:q.isValidElement(e)?q.cloneElement(e,void 0,r):null})}return(0,B.jsx)(a,{...s,ref:t,children:r})})).displayName=`${r}.Slot`,i),l=q.forwardRef((e,r)=>{let{asChild:s,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,B.jsx)(s?o:t,{...n,ref:r})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{});function nc(e,t){e&&na.flushSync(()=>e.dispatchEvent(t))}function nu(e){let t=q.useRef(e);return q.useEffect(()=>{t.current=e}),q.useMemo(()=>(...e)=>t.current?.(...e),[])}var nd="dismissableLayer.update",nh=q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nf=q.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...l}=e,c=q.useContext(nh),[u,d]=q.useState(null),h=u?.ownerDocument??globalThis?.document,[,f]=q.useState({}),p=rF(t,e=>d(e)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),b=u?m.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,w=b>=y,v=function(e,t=globalThis?.document){let r=nu(e),s=q.useRef(!1),n=q.useRef(()=>{});return q.useEffect(()=>{let e=e=>{if(e.target&&!s.current){let s=function(){nm("dismissableLayer.pointerDownOutside",r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=s,t.addEventListener("click",n.current,{once:!0})):s()}else t.removeEventListener("click",n.current);s.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}(e=>{let t=e.target,r=[...c.branches].some(e=>e.contains(t));w&&!r&&(n?.(e),i?.(e),e.defaultPrevented||o?.())},h),k=function(e,t=globalThis?.document){let r=nu(e),s=q.useRef(!1);return q.useEffect(()=>{let e=e=>{e.target&&!s.current&&nm("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}(e=>{let t=e.target;![...c.branches].some(e=>e.contains(t))&&(a?.(e),i?.(e),e.defaultPrevented||o?.())},h);return!function(e,t=globalThis?.document){let r=nu(e);q.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{b===c.layers.size-1&&(s?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},h),q.useEffect(()=>{if(u)return r&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(M=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),np(),()=>{r&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=M)}},[u,h,r,c]),q.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),np())},[u,c]),q.useEffect(()=>{let e=()=>f({});return document.addEventListener(nd,e),()=>document.removeEventListener(nd,e)},[]),(0,B.jsx)(nl.div,{...l,ref:p,style:{pointerEvents:x?w?"auto":"none":void 0,...e.style},onFocusCapture:s3(e.onFocusCapture,k.onFocusCapture),onBlurCapture:s3(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:s3(e.onPointerDownCapture,v.onPointerDownCapture)})});function np(){let e=new CustomEvent(nd);document.dispatchEvent(e)}function nm(e,t,r,{discrete:s}){let n=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),s?nc(n,a):n.dispatchEvent(a)}nf.displayName="DismissableLayer",q.forwardRef((e,t)=>{let r=q.useContext(nh),s=q.useRef(null),n=rF(t,s);return q.useEffect(()=>{let e=s.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,B.jsx)(nl.div,{...e,ref:n})}).displayName="DismissableLayerBranch";var ng="focusScope.autoFocusOnMount",ny="focusScope.autoFocusOnUnmount",nb={bubbles:!1,cancelable:!0},nx=q.forwardRef((e,t)=>{let{loop:r=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:a,...i}=e,[o,l]=q.useState(null),c=nu(n),u=nu(a),d=q.useRef(null),h=rF(t,e=>l(e)),f=q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;q.useEffect(()=>{if(s){let e=function(e){if(f.paused||!o)return;let t=e.target;o.contains(t)?d.current=t:nk(d.current,{select:!0})},t=function(e){if(f.paused||!o)return;let t=e.relatedTarget;null!==t&&(o.contains(t)||nk(d.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&nk(o)});return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[s,o,f.paused]),q.useEffect(()=>{if(o){nj.add(f);let e=document.activeElement;if(!o.contains(e)){let t=new CustomEvent(ng,nb);o.addEventListener(ng,c),o.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let s of e)if(nk(s,{select:t}),document.activeElement!==r)return}(nw(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&nk(o))}return()=>{o.removeEventListener(ng,c),setTimeout(()=>{let t=new CustomEvent(ny,nb);o.addEventListener(ny,u),o.dispatchEvent(t),t.defaultPrevented||nk(e??document.body,{select:!0}),o.removeEventListener(ny,u),nj.remove(f)},0)}}},[o,c,u,f]);let p=q.useCallback(e=>{if(!r&&!s||f.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var a;let t,s=e.currentTarget,[i,o]=[nv(t=nw(a=s),a),nv(t.reverse(),a)];i&&o?e.shiftKey||n!==o?e.shiftKey&&n===i&&(e.preventDefault(),r&&nk(o,{select:!0})):(e.preventDefault(),r&&nk(i,{select:!0})):n===s&&e.preventDefault()}},[r,s,f.paused]);return(0,B.jsx)(nl.div,{tabIndex:-1,...i,ref:h,onKeyDown:p})});function nw(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function nv(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function nk(e,{select:t=!1}={}){if(e&&e.focus){var r;let s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}nx.displayName="FocusScope";var nj=(l=[],{add(e){let t=l[0];e!==t&&t?.pause(),(l=n_(l,e)).unshift(e)},remove(e){l=n_(l,e),l[0]?.resume()}});function n_(e,t){let r=[...e],s=r.indexOf(t);return -1!==s&&r.splice(s,1),r}var nN=q.forwardRef((e,t)=>{let{container:r,...s}=e,[n,a]=q.useState(!1);s7(()=>a(!0),[]);let i=r||n&&globalThis?.document?.body;return i?na.default.createPortal((0,B.jsx)(nl.div,{...s,ref:t}),i):null});nN.displayName="Portal";var nE=e=>{var t;let r,s,{present:n,children:a}=e,i=function(e){var t,r;let[s,n]=q.useState(),a=q.useRef(null),i=q.useRef(e),o=q.useRef("none"),[l,c]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},q.useReducer((e,t)=>r[e][t]??e,t));return q.useEffect(()=>{let e=nS(a.current);o.current="mounted"===l?e:"none"},[l]),s7(()=>{let t=a.current,r=i.current;if(r!==e){let s=o.current,n=nS(t);e?c("MOUNT"):"none"===n||t?.display==="none"?c("UNMOUNT"):r&&s!==n?c("ANIMATION_OUT"):c("UNMOUNT"),i.current=e}},[e,c]),s7(()=>{if(s){let e,t=s.ownerDocument.defaultView??window,r=r=>{let n=nS(a.current).includes(CSS.escape(r.animationName));if(r.target===s&&n&&(c("ANIMATION_END"),!i.current)){let r=s.style.animationFillMode;s.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=r)})}},n=e=>{e.target===s&&(o.current=nS(a.current))};return s.addEventListener("animationstart",n),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{t.clearTimeout(e),s.removeEventListener("animationstart",n),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:q.useCallback(e=>{a.current=e?getComputedStyle(e):null,n(e)},[])}}(n),o="function"==typeof a?a({present:i.isPresent}):q.Children.only(a),l=rF(i.ref,(t=o,(s=(r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof a||i.isPresent?q.cloneElement(o,{ref:l}):null};function nS(e){return e?.animationName||"none"}nE.displayName="Presence";var nR=0;function nT(){q.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??nC()),document.body.insertAdjacentElement("beforeend",e[1]??nC()),nR++,()=>{1===nR&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),nR--}},[])}function nC(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nA="right-scroll-bar-position",nO="width-before-scroll-bar";function nP(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var nI="undefined"!=typeof window?q.useLayoutEffect:q.useEffect,n$=new WeakMap,nD=(void 0===v&&(v={}),(void 0===k&&(k=function(e){return e}),j=[],_=!1,N={read:function(){if(_)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return j.length?j[j.length-1]:null},useMedium:function(e){var t=k(e,_);return j.push(t),function(){j=j.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(_=!0;j.length;){var t=j;j=[],t.forEach(e)}j={push:function(t){return e(t)},filter:function(){return j}}},assignMedium:function(e){_=!0;var t=[];if(j.length){var r=j;j=[],r.forEach(e),t=j}var s=function(){var r=t;t=[],r.forEach(e)},n=function(){return Promise.resolve().then(s)};n(),j={push:function(e){t.push(e),n()},filter:function(e){return t=t.filter(e),j}}}}).options=G({async:!0,ssr:!1},v),N),nz=function(){},nL=q.forwardRef(function(e,t){var r,s,n,a,i=q.useRef(null),o=q.useState({onScrollCapture:nz,onWheelCapture:nz,onTouchMoveCapture:nz}),l=o[0],c=o[1],u=e.forwardProps,d=e.children,h=e.className,f=e.removeScrollBar,p=e.enabled,m=e.shards,g=e.sideCar,y=e.noRelative,b=e.noIsolation,x=e.inert,w=e.allowPinchZoom,v=e.as,k=e.gapMode,j=J(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=(r=[i,t],s=function(e){return r.forEach(function(t){return nP(t,e)})},(n=(0,q.useState)(function(){return{value:null,callback:s,facade:{get current(){return n.value},set current(value){var e=n.value;e!==value&&(n.value=value,n.callback(value,e))}}}})[0]).callback=s,a=n.facade,nI(function(){var e=n$.get(a);if(e){var t=new Set(e),s=new Set(r),n=a.current;t.forEach(function(e){s.has(e)||nP(e,null)}),s.forEach(function(e){t.has(e)||nP(e,n)})}n$.set(a,r)},[r]),a),N=G(G({},j),l);return q.createElement(q.Fragment,null,p&&q.createElement(g,{sideCar:nD,removeScrollBar:f,shards:m,noRelative:y,noIsolation:b,inert:x,setCallbacks:c,allowPinchZoom:!!w,lockRef:i,gapMode:k}),u?q.cloneElement(q.Children.only(d),G(G({},N),{ref:_})):q.createElement(void 0===v?"div":v,G({},N,{className:h,ref:_}),d))});nL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},nL.classNames={fullWidth:nO,zeroRight:nA};var nM=function(e){var t=e.sideCar,r=J(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw Error("Sidecar medium not found");return q.createElement(s,G({},r))};nM.isSideCarExport=!0;var nU=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=U||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return t&&e.setAttribute("nonce",t),e}())){var s,n;(s=t).styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r)),n=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nB=function(){var e=nU();return function(t,r){q.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},nq=function(){var e=nB();return function(t){return e(t.styles,t.dynamic),null}},nF={left:0,top:0,right:0,gap:0},nW=function(e){return parseInt(e||"",10)||0},nV=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],s=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[nW(r),nW(s),nW(n)]},nK=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return nF;var t=nV(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},nH=nq(),nG="data-scroll-locked",nJ=function(e,t,r,s){var n=e.left,a=e.top,i=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(s,";\n   padding-right: ").concat(o,"px ").concat(s,";\n  }\n  body[").concat(nG,"] {\n    overflow: hidden ").concat(s,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(s,";"),"margin"===r&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(s,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(nA," {\n    right: ").concat(o,"px ").concat(s,";\n  }\n  \n  .").concat(nO," {\n    margin-right: ").concat(o,"px ").concat(s,";\n  }\n  \n  .").concat(nA," .").concat(nA," {\n    right: 0 ").concat(s,";\n  }\n  \n  .").concat(nO," .").concat(nO," {\n    margin-right: 0 ").concat(s,";\n  }\n  \n  body[").concat(nG,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},nY=function(){var e=parseInt(document.body.getAttribute(nG)||"0",10);return isFinite(e)?e:0},nX=function(){q.useEffect(function(){return document.body.setAttribute(nG,(nY()+1).toString()),function(){var e=nY()-1;e<=0?document.body.removeAttribute(nG):document.body.setAttribute(nG,e.toString())}},[])},nZ=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,n=void 0===s?"margin":s;nX();var a=q.useMemo(function(){return nK(n)},[n]);return q.createElement(nH,{styles:nJ(a,!t,n,r?"":"!important")})},nQ=!1;if("undefined"!=typeof window)try{var n0=Object.defineProperty({},"passive",{get:function(){return nQ=!0,!0}});window.addEventListener("test",n0,n0),window.removeEventListener("test",n0,n0)}catch(e){nQ=!1}var n1=!!nQ&&{passive:!1},n2=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},n5=function(e,t){var r=t.ownerDocument,s=t;do{if("undefined"!=typeof ShadowRoot&&s instanceof ShadowRoot&&(s=s.host),n6(e,s)){var n=n4(e,s);if(n[1]>n[2])return!0}s=s.parentNode}while(s&&s!==r.body)return!1},n6=function(e,t){return"v"===e?n2(t,"overflowY"):n2(t,"overflowX")},n4=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},n8=function(e,t,r,s,n){var a,i=(a=window.getComputedStyle(t).direction,"h"===e&&"rtl"===a?-1:1),o=i*s,l=r.target,c=t.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var p=n4(e,l),m=p[0],g=p[1]-p[2]-i*m;(m||g)&&n6(e,l)&&(h+=g,f+=m);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l))return d&&(n&&1>Math.abs(h)||!n&&o>h)?u=!0:!d&&(n&&1>Math.abs(f)||!n&&-o>f)&&(u=!0),u},n3=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},n9=function(e){return[e.deltaX,e.deltaY]},n7=function(e){return e&&"current"in e?e.current:e},ae=0,at=[];let ar=(E=function(e){var t=q.useRef([]),r=q.useRef([0,0]),s=q.useRef(),n=q.useState(ae++)[0],a=q.useState(nq)[0],i=q.useRef(e);q.useEffect(function(){i.current=e},[e]),q.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var t=(function(e,t,r){if(r||2==arguments.length)for(var s,n=0,a=t.length;n<a;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(n7),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var o=q.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var n,a=n3(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=window.getSelection(),f=h&&h.anchorNode;if(f&&(f===u||f.contains(u)))return!1;var p=n5(d,u);if(!p)return!0;if(p?n=d:(n="v"===d?"h":"v",p=n5(d,u)),!p)return!1;if(!s.current&&"changedTouches"in e&&(l||c)&&(s.current=n),!n)return!0;var m=s.current||n;return n8(m,t,e,"h"===m?l:c,!0)},[]),l=q.useCallback(function(e){if(at.length&&at[at.length-1]===a){var r="deltaY"in e?n9(e):n3(e),s=t.current.filter(function(t){var s;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(s=t.delta,s[0]===r[0]&&s[1]===r[1])})[0];if(s&&s.should){e.cancelable&&e.preventDefault();return}if(!s){var n=(i.current.shards||[]).map(n7).filter(Boolean).filter(function(t){return t.contains(e.target)});(n.length>0?o(e,n[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=q.useCallback(function(e,r,s,n){var a={name:e,delta:r,target:s,should:n,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(s)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),u=q.useCallback(function(e){r.current=n3(e),s.current=void 0},[]),d=q.useCallback(function(t){c(t.type,n9(t),t.target,o(t,e.lockRef.current))},[]),h=q.useCallback(function(t){c(t.type,n3(t),t.target,o(t,e.lockRef.current))},[]);q.useEffect(function(){return at.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,n1),document.addEventListener("touchmove",l,n1),document.addEventListener("touchstart",u,n1),function(){at=at.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,n1),document.removeEventListener("touchmove",l,n1),document.removeEventListener("touchstart",u,n1)}},[]);var f=e.removeScrollBar,p=e.inert;return q.createElement(q.Fragment,null,p?q.createElement(a,{styles:"\n  .block-interactivity-".concat(n," {pointer-events: none;}\n  .allow-interactivity-").concat(n," {pointer-events: all;}\n")}):null,f?q.createElement(nZ,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},nD.useMedium(E),nM);var as=q.forwardRef(function(e,t){return q.createElement(nL,G({},e,{ref:t,sideCar:ar}))});as.classNames=nL.classNames;var an=new WeakMap,aa=new WeakMap,ai={},ao=0,al=function(e){return e&&(e.host||al(e.parentNode))},ac=function(e,t,r,s){var n=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=al(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});ai[r]||(ai[r]=new WeakMap);var a=ai[r],i=[],o=new Set,l=new Set(n),c=function(e){!e||o.has(e)||(o.add(e),c(e.parentNode))};n.forEach(c);var u=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(s),n=null!==t&&"false"!==t,l=(an.get(e)||0)+1,c=(a.get(e)||0)+1;an.set(e,l),a.set(e,c),i.push(e),1===l&&n&&aa.set(e,!0),1===c&&e.setAttribute(r,"true"),n||e.setAttribute(s,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return u(t),o.clear(),ao++,function(){i.forEach(function(e){var t=an.get(e)-1,n=a.get(e)-1;an.set(e,t),a.set(e,n),t||(aa.has(e)||e.removeAttribute(s),aa.delete(e)),n||e.removeAttribute(r)}),--ao||(an=new WeakMap,an=new WeakMap,aa=new WeakMap,ai={})}},au=function(e,t,r){void 0===r&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),n=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),ac(s,n,r,"aria-hidden")):function(){return null}},ad=Symbol("radix.slottable");function ah(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ad}var af="Dialog",[ap,am]=s9(af),[ag,ay]=ap(af),ab=e=>{let{__scopeDialog:t,children:r,open:s,defaultOpen:n,onOpenChange:a,modal:i=!0}=e,o=q.useRef(null),l=q.useRef(null),[c,u]=nn({prop:s,defaultProp:n??!1,onChange:a,caller:af});return(0,B.jsx)(ag,{scope:t,triggerRef:o,contentRef:l,contentId:nr(),titleId:nr(),descriptionId:nr(),open:c,onOpenChange:u,onOpenToggle:q.useCallback(()=>u(e=>!e),[u]),modal:i,children:r})};ab.displayName=af;var ax="DialogTrigger";q.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=ay(ax,r),a=rF(t,n.triggerRef);return(0,B.jsx)(nl.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":aM(n.open),...s,ref:a,onClick:s3(e.onClick,n.onOpenToggle)})}).displayName=ax;var aw="DialogPortal",[av,ak]=ap(aw,{forceMount:void 0}),aj=e=>{let{__scopeDialog:t,forceMount:r,children:s,container:n}=e,a=ay(aw,t);return(0,B.jsx)(av,{scope:t,forceMount:r,children:q.Children.map(s,e=>(0,B.jsx)(nE,{present:r||a.open,children:(0,B.jsx)(nN,{asChild:!0,container:n,children:e})}))})};aj.displayName=aw;var a_="DialogOverlay",aN=q.forwardRef((e,t)=>{let r=ak(a_,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,a=ay(a_,e.__scopeDialog);return a.modal?(0,B.jsx)(nE,{present:s||a.open,children:(0,B.jsx)(aS,{...n,ref:t})}):null});aN.displayName=a_;var aE=((c=q.forwardRef((e,t)=>{let{children:r,...s}=e;if(q.isValidElement(r)){var n;let e,a,i=(n=r,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==q.Fragment&&(o.ref=t?rq(t,i):i),q.cloneElement(r,o)}return q.Children.count(r)>1?q.Children.only(null):null})).displayName="DialogOverlay.RemoveScroll.SlotClone",r=c,(s=q.forwardRef((e,t)=>{let{children:s,...n}=e,a=q.Children.toArray(s),i=a.find(ah);if(i){let e=i.props.children,s=a.map(t=>t!==i?t:q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null);return(0,B.jsx)(r,{...n,ref:t,children:q.isValidElement(e)?q.cloneElement(e,void 0,s):null})}return(0,B.jsx)(r,{...n,ref:t,children:s})})).displayName="DialogOverlay.RemoveScroll.Slot",s),aS=q.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=ay(a_,r);return(0,B.jsx)(as,{as:aE,allowPinchZoom:!0,shards:[n.contentRef],children:(0,B.jsx)(nl.div,{"data-state":aM(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),aR="DialogContent",aT=q.forwardRef((e,t)=>{let r=ak(aR,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,a=ay(aR,e.__scopeDialog);return(0,B.jsx)(nE,{present:s||a.open,children:a.modal?(0,B.jsx)(aC,{...n,ref:t}):(0,B.jsx)(aA,{...n,ref:t})})});aT.displayName=aR;var aC=q.forwardRef((e,t)=>{let r=ay(aR,e.__scopeDialog),s=q.useRef(null),n=rF(t,r.contentRef,s);return q.useEffect(()=>{let e=s.current;if(e)return au(e)},[]),(0,B.jsx)(aO,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:s3(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:s3(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:s3(e.onFocusOutside,e=>e.preventDefault())})}),aA=q.forwardRef((e,t)=>{let r=ay(aR,e.__scopeDialog),s=q.useRef(!1),n=q.useRef(!1);return(0,B.jsx)(aO,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||r.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),aO=q.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:a,...i}=e,o=ay(aR,r),l=q.useRef(null),c=rF(t,l);return nT(),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(nx,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:a,children:(0,B.jsx)(nf,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":aM(o.open),...i,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(aF,{titleId:o.titleId}),(0,B.jsx)(aW,{contentRef:l,descriptionId:o.descriptionId})]})]})}),aP="DialogTitle",aI=q.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=ay(aP,r);return(0,B.jsx)(nl.h2,{id:n.titleId,...s,ref:t})});aI.displayName=aP;var a$="DialogDescription",aD=q.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=ay(a$,r);return(0,B.jsx)(nl.p,{id:n.descriptionId,...s,ref:t})});aD.displayName=a$;var az="DialogClose",aL=q.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=ay(az,r);return(0,B.jsx)(nl.button,{type:"button",...s,ref:t,onClick:s3(e.onClick,()=>n.onOpenChange(!1))})});function aM(e){return e?"open":"closed"}aL.displayName=az;var aU="DialogTitleWarning",[aB,aq]=(S={contentName:aR,titleName:aP,docsSlug:"dialog"},n=q.createContext(S),(a=e=>{let{children:t,...r}=e,s=q.useMemo(()=>r,Object.values(r));return(0,B.jsx)(n.Provider,{value:s,children:t})}).displayName=aU+"Provider",[a,function(e){let t=q.useContext(n);if(t)return t;if(void 0!==S)return S;throw Error(`\`${e}\` must be used within \`${aU}\``)}]),aF=({titleId:e})=>{let t=aq(aU),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return q.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},aW=({contentRef:e,descriptionId:t})=>{let r=aq("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return q.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null};let aV=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},aK=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var aH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let aG=(0,q.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:a,iconNode:i,...o},l)=>(0,q.createElement)("svg",{ref:l,...aH,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:aK("lucide",n),...!a&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>(0,q.createElement)(e,t)),...Array.isArray(a)?a:[a]])),aJ=(e,t)=>{let r=(0,q.forwardRef)(({className:r,...s},n)=>(0,q.createElement)(aG,{ref:n,iconNode:t,className:aK(`lucide-${aV(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...s}));return r.displayName=aV(e),r},aY=aJ("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function aX({...e}){return(0,B.jsx)(ab,{"data-slot":"dialog",...e})}function aZ({...e}){return(0,B.jsx)(aj,{"data-slot":"dialog-portal",...e})}function aQ({className:e,...t}){return(0,B.jsx)(aN,{"data-slot":"dialog-overlay",className:sY("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function a0({className:e,children:t,...r}){return(0,B.jsxs)(aZ,{"data-slot":"dialog-portal",children:[(0,B.jsx)(aQ,{}),(0,B.jsxs)(aT,{"data-slot":"dialog-content",className:sY("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,(0,B.jsxs)(aL,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,B.jsx)(aY,{}),(0,B.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function a1({className:e,...t}){return(0,B.jsx)("div",{"data-slot":"dialog-header",className:sY("flex flex-col gap-2 text-center sm:text-left",e),...t})}function a2({className:e,...t}){return(0,B.jsx)(aI,{"data-slot":"dialog-title",className:sY("text-lg leading-none font-semibold",e),...t})}function a5({className:e,...t}){return(0,B.jsx)(aD,{"data-slot":"dialog-description",className:sY("text-muted-foreground text-sm",e),...t})}let a6=aJ("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),a4=aJ("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),a8=aJ("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),a3=aJ("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),a9=aJ("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),a7=aJ("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),ie=aJ("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),it=aJ("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ir=aJ("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),is=aJ("images",[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16",key:"9kzy35"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2",key:"1t0f0t"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor",key:"1obus6"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2",key:"1gvhby"}]]),ia=aJ("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ii=aJ("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),io=aJ("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),il=aJ("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),ic=aJ("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),iu=aJ("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),id=aJ("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),ih=aJ("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),ip=aJ("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);function im({onNavigate:e}){let[t,r]=(0,q.useState)([]),[s,n]=(0,q.useState)([]),[a,i]=(0,q.useState)([]),[o,l]=(0,q.useState)(null),[c,u]=(0,q.useState)(null),[d,h]=(0,q.useState)([]),[f,p]=(0,q.useState)(!0);async function m(){p(!0);try{let{data:e}=await rU.from("classes").select("*").order("year",{ascending:!1});e&&e.length>0&&(r(e),u(e[0].id));let{data:t}=await rU.from("notices").select("*").eq("publish_homepage",!0).order("created_at",{ascending:!1});t&&n(t);let{data:s}=await rU.from("galleries").select("*").order("created_at",{ascending:!1});s&&i(s)}catch(e){console.error("Fetch error:",e)}finally{p(!1)}}async function g(e){try{let{data:t}=await rU.from("exam_results").select("*").eq("class_id",e).eq("is_public",!0).order("marks",{ascending:!1});if(t){let e=t.filter((e,t,r)=>t===r.findIndex(t=>t.student_id===e.student_id));h(e.slice(0,10))}}catch(e){console.error("Rank fetch error:",e)}}return((0,q.useEffect)(()=>{m()},[]),(0,q.useEffect)(()=>{c&&g(c)},[c]),f)?(0,B.jsxs)("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-white",children:[(0,B.jsx)(ia,{className:"size-12 text-teal-600 animate-pulse mb-4"}),(0,B.jsx)("p",{className:"font-black uppercase tracking-[0.3em] text-[10px] text-slate-400 italic",children:"Initializing Portal..."})]}):(0,B.jsxs)("div",{className:"min-h-screen bg-[#FAFBFC] text-slate-900 selection:bg-teal-100",children:[(0,B.jsxs)("nav",{className:"fixed top-0 w-full z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 px-6 py-4 flex justify-between items-center shadow-sm",children:[(0,B.jsxs)("div",{className:"flex items-center gap-3",children:[(0,B.jsx)("img",{src:"/logo.png",alt:"Logic Logo",className:"h-10 w-auto object-contain"}),(0,B.jsxs)("div",{className:"flex flex-col",children:[(0,B.jsx)("h2",{className:"text-base font-black text-slate-800 tracking-tighter uppercase italic leading-none",children:"Logic with Dilshan"}),(0,B.jsx)("span",{className:"text-[7px] font-bold text-teal-600 uppercase tracking-widest mt-1 italic",children:"Authorized Educational Platform"})]})]}),(0,B.jsxs)("div",{className:"flex gap-2",children:[(0,B.jsx)(sZ,{variant:"ghost",onClick:()=>e("student"),className:"font-bold text-slate-600 hover:bg-slate-50 rounded-xl px-5 text-xs uppercase tracking-widest transition-all",children:"Student Login"}),(0,B.jsx)(sZ,{onClick:()=>e("admin-login"),className:"bg-slate-900 hover:bg-black text-white font-bold rounded-xl px-6 text-xs uppercase tracking-widest shadow-md",children:"Staff Portal"})]})]}),(0,B.jsx)("section",{className:"pt-48 pb-24 px-6 bg-white overflow-hidden relative border-b border-slate-100",children:(0,B.jsxs)("div",{className:"max-w-7xl mx-auto grid md:grid-cols-2 gap-16 items-center relative z-10",children:[(0,B.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-8 duration-700",children:[(0,B.jsxs)("div",{className:"flex items-center gap-3",children:[(0,B.jsx)("div",{className:"h-px w-10 bg-teal-500"}),(0,B.jsx)("span",{className:"text-teal-600 font-black uppercase tracking-[0.3em] text-[10px]",children:"Enrollment 2026 Open"})]}),(0,B.jsxs)("h1",{className:"text-7xl md:text-8xl font-black leading-[0.85] tracking-tighter uppercase italic text-slate-900",children:["Master Your ",(0,B.jsx)("br",{})," ",(0,B.jsx)("span",{className:"text-teal-600",children:"Mind."})]}),(0,B.jsx)("p",{className:"text-xl text-slate-500 leading-relaxed font-medium max-w-md italic",children:'"Logic is not just a subject, but a way of thinking, questioning, and discovering the world."'}),(0,B.jsxs)("div",{className:"flex flex-wrap gap-4 pt-4",children:[(0,B.jsx)(sZ,{size:"lg",className:"bg-slate-900 hover:bg-black text-white rounded-2xl px-12 font-black uppercase text-xs h-16 shadow-2xl active:scale-95 transition-all",onClick:()=>e("student"),children:"Begin Journey"}),(0,B.jsx)("a",{href:"https://wa.me/94770224060",target:"_blank",rel:"noreferrer",children:(0,B.jsxs)(sZ,{size:"lg",variant:"outline",className:"rounded-2xl px-10 border-slate-200 text-slate-600 h-16 font-black uppercase text-xs hover:bg-slate-50 transition-all flex gap-2 items-center",children:[(0,B.jsx)(ip,{size:16})," WhatsApp"]})})]})]}),(0,B.jsxs)("div",{className:"relative group animate-in fade-in slide-in-from-right-8 duration-1000",children:[(0,B.jsx)("div",{className:"absolute -inset-1 bg-teal-500/10 rounded-[4rem] blur-2xl opacity-50"}),(0,B.jsx)(s8,{src:"/teacher-dilshan.jpg",alt:"Dilshan Uthpala",className:"rounded-[3.5rem] border-[12px] border-white shadow-2xl relative z-10 grayscale hover:grayscale-0 transition-all duration-700 aspect-[4/5] object-cover"})]})]})}),(0,B.jsx)("section",{className:"py-32 px-6 max-w-7xl mx-auto",children:(0,B.jsxs)("div",{className:"grid md:grid-cols-2 gap-24 items-start",children:[(0,B.jsxs)("div",{className:"space-y-10",children:[(0,B.jsxs)("div",{className:"space-y-4",children:[(0,B.jsxs)("h2",{className:"text-xs font-black uppercase tracking-[0.4em] text-teal-600 flex items-center gap-3",children:[(0,B.jsx)("div",{className:"h-0.5 w-8 bg-teal-600"})," About Us"]}),(0,B.jsxs)("h3",{className:"text-5xl font-black text-slate-900 uppercase italic leading-tight",children:["Logic with ",(0,B.jsx)("br",{})," Dilshan Uthpala"]}),(0,B.jsx)("p",{className:"text-slate-600 leading-relaxed text-xl font-medium",children:"We believe that logic is not just another subject but a way of thinking, questioning and discovering the world around us."}),(0,B.jsx)("p",{className:"text-slate-500 leading-relaxed text-lg border-l-4 border-teal-500 pl-6 py-2 italic font-medium",children:"Created by a passionate law student, this logic platform helps students build a sharper mind and strengthen their reasoning."})]}),(0,B.jsxs)("div",{className:"p-10 bg-slate-900 rounded-[3rem] text-white relative shadow-2xl border-t-8 border-teal-500 group overflow-hidden",children:[(0,B.jsx)(ii,{className:"absolute top-6 right-6 size-12 text-teal-500/20 group-hover:scale-110 transition-transform"}),(0,B.jsxs)("p",{className:"text-3xl font-black italic tracking-tighter leading-tight uppercase relative z-10",children:['"  ',(0,B.jsx)("br",{}),'  "']})]})]}),(0,B.jsxs)("div",{className:"space-y-16 py-12",children:[(0,B.jsxs)("div",{className:"flex gap-8 group",children:[(0,B.jsx)("div",{className:"bg-white p-5 rounded-[2rem] shadow-xl h-fit border border-slate-50 group-hover:bg-teal-600 transition-all duration-300",children:(0,B.jsx)(io,{className:"text-teal-600 group-hover:text-white size-10 transition-colors"})}),(0,B.jsxs)("div",{className:"space-y-3",children:[(0,B.jsx)("h4",{className:"text-2xl font-black uppercase italic text-slate-900",children:"Our Goal"}),(0,B.jsx)("p",{className:"text-slate-500 leading-relaxed text-lg font-medium",children:"To simplify the subject of logic and present it to the student in a fun, intuitive and understandable way."})]})]}),(0,B.jsxs)("div",{className:"flex gap-8 group",children:[(0,B.jsx)("div",{className:"bg-white p-5 rounded-[2rem] shadow-xl h-fit border border-slate-50 group-hover:bg-teal-600 transition-all duration-300",children:(0,B.jsx)(il,{className:"text-teal-600 group-hover:text-white size-10 transition-colors"})}),(0,B.jsxs)("div",{className:"space-y-3",children:[(0,B.jsx)("h4",{className:"text-2xl font-black uppercase italic text-slate-900",children:"Our Mission"}),(0,B.jsx)("p",{className:"text-slate-500 leading-relaxed text-lg font-medium",children:"Instead of teaching a mere subject, we instill a rational mindset and teach scientific methods with equal emphasis."})]})]})]})]})}),s.length>0&&(0,B.jsx)("section",{className:"py-24 bg-slate-50 border-y border-slate-100",children:(0,B.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,B.jsxs)("div",{className:"flex items-center gap-3 mb-16",children:[(0,B.jsx)(it,{className:"text-teal-600 size-7"}),(0,B.jsx)("h2",{className:"text-3xl font-black uppercase tracking-tighter text-slate-900 italic",children:"Notice Board"})]}),(0,B.jsx)("div",{className:"grid md:grid-cols-3 gap-8",children:s.map(e=>(0,B.jsxs)(sQ,{className:"rounded-[2.5rem] border-none bg-white shadow-xl shadow-slate-200/50 p-4 transition-transform hover:-translate-y-2",children:[(0,B.jsxs)(s0,{children:[(0,B.jsx)("div",{className:"text-[10px] font-black text-teal-600 uppercase mb-3 tracking-widest bg-teal-50 w-fit px-3 py-1 rounded-full",children:new Date(e.created_at).toLocaleDateString()}),(0,B.jsx)(s1,{className:"text-xl font-black uppercase italic leading-tight text-slate-800",children:e.title})]}),(0,B.jsx)(s5,{children:(0,B.jsx)("p",{className:"text-sm text-slate-500 font-medium leading-relaxed",children:e.content})})]},e.id))})]})}),(0,B.jsxs)("section",{className:"py-32 px-6 max-w-7xl mx-auto text-center",children:[(0,B.jsxs)("div",{className:"flex flex-col items-center mb-16",children:[(0,B.jsx)(a8,{className:"text-teal-600 size-14 mb-6"}),(0,B.jsx)("h2",{className:"text-6xl font-black tracking-tighter uppercase italic text-slate-900",children:"Hall of Fame"}),(0,B.jsx)("p",{className:"text-slate-400 font-bold uppercase tracking-[0.4em] text-xs mt-4",children:"Recognition of Excellence"})]}),(0,B.jsx)("div",{className:"flex flex-wrap justify-center gap-3 mt-12 mb-20",children:t.map(e=>(0,B.jsxs)(sZ,{variant:c===e.id?"default":"outline",onClick:()=>u(e.id),className:`rounded-2xl font-black px-8 h-14 uppercase text-[10px] tracking-[0.2em] transition-all ${c===e.id?"bg-slate-900 text-white shadow-lg":"text-slate-400 border-slate-200 hover:text-slate-900"}`,children:[e.year," ",e.type]},e.id))}),(0,B.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:d.length>0?d.map((e,t)=>(0,B.jsxs)(sQ,{className:`rounded-[3rem] border-none bg-white shadow-2xl p-6 relative transition-all hover:scale-105 ${0===t?"ring-2 ring-teal-500":""}`,children:[0===t&&(0,B.jsx)(ie,{className:"absolute -top-3 -right-3 size-12 text-yellow-400 fill-yellow-400"}),(0,B.jsxs)(s0,{className:"text-left p-0 pb-6 border-b border-slate-50",children:[(0,B.jsx)("div",{className:`size-14 rounded-2xl flex items-center justify-center font-black text-2xl mb-4 ${0===t?"bg-teal-600 text-white":"bg-slate-50 text-slate-300"}`,children:t+1}),(0,B.jsx)(s1,{className:"text-xl font-black uppercase italic truncate text-slate-800",children:e.student_name}),(0,B.jsx)(s2,{className:"text-[10px] font-bold uppercase truncate text-slate-400 tracking-tight",children:e.school_name})]}),(0,B.jsx)(s5,{className:"pt-6 px-0",children:(0,B.jsxs)("div",{className:"p-6 bg-[#FAFBFC] rounded-[2rem] text-center border border-slate-100",children:[(0,B.jsx)("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2 italic",children:e.exam_name}),(0,B.jsxs)("div",{className:"text-5xl font-black text-teal-600 tracking-tighter italic",children:[e.marks,"%"]})]})})]},t)):(0,B.jsx)("div",{className:"col-span-full py-24 text-slate-300 font-black uppercase tracking-[0.4em] italic border-4 border-dashed rounded-[4rem]",children:"Rankings Processing..."})})]}),(0,B.jsx)("section",{className:"py-32 px-6 bg-white border-y border-slate-100",children:(0,B.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,B.jsxs)("div",{className:"text-center mb-20 space-y-4",children:[(0,B.jsx)("h2",{className:"text-5xl font-black tracking-tighter uppercase italic text-slate-900 leading-none",children:"Class Schedule"}),(0,B.jsx)("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"Instructor: Dilshan Uthpala"})]}),(0,B.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:t.map(t=>(0,B.jsxs)(sQ,{className:"border-none rounded-[3.5rem] bg-slate-50 shadow-sm hover:shadow-2xl transition-all duration-500 group overflow-hidden border border-transparent hover:border-teal-500/20",children:[(0,B.jsxs)(s0,{className:"p-10 pb-6",children:[(0,B.jsx)(s4,{className:"bg-slate-900 text-white border-none px-6 py-2 rounded-full mb-6 w-fit uppercase font-bold tracking-widest",children:t.year}),(0,B.jsx)(s1,{className:"text-3xl font-black uppercase italic text-slate-800 leading-tight group-hover:text-teal-600 transition-colors",children:t.title}),(0,B.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-2 block",children:t.type})]}),(0,B.jsxs)(s5,{className:"p-10 pt-0 space-y-5",children:[(0,B.jsxs)("div",{className:"flex items-center gap-4 text-sm font-bold text-slate-600",children:[(0,B.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:(0,B.jsx)(a6,{size:18,className:"text-teal-600"})})," ",t.class_day]}),(0,B.jsxs)("div",{className:"flex items-center gap-4 text-sm font-bold text-slate-600",children:[(0,B.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:(0,B.jsx)(ir,{size:18,className:"text-teal-600"})})," ",t.class_time]}),(0,B.jsxs)("div",{className:"flex items-center gap-4 text-sm font-medium text-slate-400",children:[(0,B.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:(0,B.jsx)(a4,{size:18})})," ",t.institute_name]}),(0,B.jsx)(sZ,{className:"w-full h-16 mt-8 bg-slate-900 hover:bg-teal-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest transition-all",onClick:()=>e("student"),children:"Enroll Now"})]})]},t.id))})]})}),(0,B.jsxs)("section",{className:"py-32 px-6 max-w-7xl mx-auto",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between mb-20 border-l-8 border-teal-500 pl-8",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("h2",{className:"text-6xl font-black tracking-tighter uppercase italic text-slate-900",children:"Visuals"}),(0,B.jsx)("p",{className:"text-teal-600 font-bold uppercase tracking-widest text-sm mt-3",children:"Moments from logic sessions"})]}),(0,B.jsx)(is,{className:"size-16 text-slate-200 hidden md:block"})]}),(0,B.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:a.map(e=>(0,B.jsx)(sQ,{className:"group cursor-pointer overflow-hidden rounded-[3rem] border-none shadow-2xl transition-all active:scale-95",onClick:()=>l(e),children:(0,B.jsxs)("div",{className:"relative h-[28rem] w-full",children:[(0,B.jsx)("img",{src:e.image_urls[0],alt:e.name,className:"h-full w-full object-cover transition-transform group-hover:scale-110 duration-1000 grayscale group-hover:grayscale-0"}),(0,B.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-transparent opacity-80"}),(0,B.jsxs)("div",{className:"absolute bottom-8 left-8 right-8 text-white",children:[(0,B.jsx)("h3",{className:"font-black text-2xl mb-1 tracking-tighter uppercase italic leading-none",children:e.name}),(0,B.jsxs)(s4,{className:"bg-teal-500 text-white border-none font-black text-[9px] px-3 mt-4",children:[e.image_urls.length," ASSETS"]})]})]})},e.id))})]}),(0,B.jsx)("footer",{className:"bg-[#030712] text-white pt-32 pb-12 px-6",children:(0,B.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,B.jsxs)("div",{className:"grid md:grid-cols-3 gap-24 border-b border-white/5 pb-24",children:[(0,B.jsxs)("div",{className:"space-y-8",children:[(0,B.jsxs)("div",{className:"flex items-center gap-3",children:[(0,B.jsx)("div",{className:"bg-white p-2 rounded-xl shadow-lg",children:(0,B.jsx)(ia,{className:"text-slate-950 fill-slate-950 size-6"})}),(0,B.jsx)("h3",{className:"text-4xl font-black uppercase italic tracking-tighter",children:"Logic"})]}),(0,B.jsx)("p",{className:"text-slate-400 text-lg leading-relaxed italic font-medium",children:"Instilling a rational mindset and simplified logic education through intuitive reasoning."}),(0,B.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,B.jsxs)("div",{className:"flex items-center gap-3 text-slate-300 text-sm",children:[(0,B.jsx)(id,{className:"size-4 text-teal-500"})," dilshanuthpalalogic@gmail.com"]}),(0,B.jsxs)("div",{className:"flex items-center gap-3 text-slate-300 text-sm",children:[(0,B.jsx)(ih,{className:"size-4 text-teal-500"})," +94 77 022 4060"]})]}),(0,B.jsxs)("div",{className:"flex gap-6 pt-6",children:[(0,B.jsx)("a",{href:"https://web.facebook.com/profile.php?id=100094065144515",target:"_blank",rel:"noreferrer",className:"bg-white/5 p-4 rounded-2xl hover:bg-teal-600 transition-all group",children:(0,B.jsx)(a3,{className:"size-5 text-white group-hover:scale-110 transition-transform"})}),(0,B.jsx)("a",{href:"https://www.youtube.com/@DilshanUthpala",target:"_blank",rel:"noreferrer",className:"bg-white/5 p-4 rounded-2xl hover:bg-teal-600 transition-all group",children:(0,B.jsx)(a9,{className:"size-5 text-white group-hover:scale-110 transition-transform"})}),(0,B.jsx)("a",{href:"#",className:"bg-white/5 p-4 rounded-2xl hover:bg-teal-600 transition-all group",children:(0,B.jsx)(a7,{className:"size-5 text-white group-hover:scale-110 transition-transform"})})]})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)("h4",{className:"font-black mb-10 uppercase text-slate-500 tracking-[0.4em] text-[10px]",children:"Navigation"}),(0,B.jsxs)("ul",{className:"space-y-6 text-slate-300 font-bold text-sm uppercase tracking-widest",children:[(0,B.jsxs)("li",{onClick:()=>e("home"),className:"hover:text-teal-500 cursor-pointer flex items-center gap-2 group transition-colors italic",children:[(0,B.jsx)(ic,{className:"size-4 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})," Home Portal"]}),(0,B.jsxs)("li",{onClick:()=>e("student"),className:"hover:text-teal-500 cursor-pointer flex items-center gap-2 group transition-colors italic",children:[(0,B.jsx)(ic,{className:"size-4 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})," Student Hub"]}),(0,B.jsxs)("li",{onClick:()=>e("admin-login"),className:"hover:text-teal-500 cursor-pointer flex items-center gap-2 group transition-colors italic",children:[(0,B.jsx)(ic,{className:"size-4 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})," Staff Hub"]})]})]}),(0,B.jsxs)("div",{className:"space-y-10",children:[(0,B.jsxs)("div",{className:"p-8 bg-[#0B0F1A] rounded-[2.5rem] border border-white/5 group hover:border-teal-500/40 transition-all shadow-2xl relative overflow-hidden",children:[(0,B.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-teal-500/5 -translate-y-12 translate-x-12 rounded-full blur-2xl"}),(0,B.jsx)("p",{className:"text-[10px] text-teal-500 font-black uppercase tracking-widest mb-6",children:"Developed By"}),(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("p",{className:"text-3xl font-black tracking-tight uppercase italic leading-[0.9] text-white",children:["Lakruwan ",(0,B.jsx)("br",{})," Shashika"]}),(0,B.jsx)("a",{href:"https://www.linkedin.com/in/lakruwan-shashika/",target:"_blank",rel:"noreferrer",className:"bg-teal-600 p-4 rounded-[1.25rem] text-white hover:bg-teal-500 transition-all shadow-lg",children:(0,B.jsx)(iu,{size:28})})]})]}),(0,B.jsx)("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.5em] text-center italic",children:" 2025 LOGIC EDUCATION PLATFORM"})]})]})})}),o&&(0,B.jsx)(aX,{open:!!o,onOpenChange:()=>l(null),children:(0,B.jsxs)(a0,{className:"max-w-6xl max-h-[90vh] overflow-y-auto rounded-[4rem] p-12 bg-zinc-950 border border-white/10 shadow-2xl",children:[(0,B.jsxs)(a1,{className:"mb-12 text-center",children:[(0,B.jsx)(a2,{className:"text-5xl font-black tracking-tighter italic text-white uppercase",children:o.name}),(0,B.jsx)(a5,{className:"text-sm font-black text-zinc-500 uppercase tracking-[0.3em] mt-2 italic underline underline-offset-8 decoration-teal-500 decoration-4",children:"Exclusive Gallery Archive"})]}),(0,B.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:o.image_urls.map((e,t)=>(0,B.jsx)("div",{className:"aspect-[4/3] rounded-[2.5rem] overflow-hidden border-4 border-white/5 shadow-2xl group transition-all hover:border-teal-500/30",children:(0,B.jsx)("img",{src:e,alt:`Gallery asset ${t}`,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-700 cursor-zoom-in",onClick:()=>window.open(e,"_blank")})},t))}),(0,B.jsx)("div",{className:"mt-16 flex justify-center",children:(0,B.jsx)(sZ,{variant:"outline",className:"rounded-full px-16 h-16 font-black uppercase text-xs tracking-widest border-zinc-800 text-white hover:bg-white hover:text-black transition-all",onClick:()=>l(null),children:"Close Archive"})})]})})]})}function ig({className:e,type:t,...r}){return(0,B.jsx)("input",{type:t,"data-slot":"input",className:sY("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}function iy(e){var t;let r,s=(t=e,(r=q.forwardRef((e,t)=>{let{children:r,...s}=e;if(q.isValidElement(r)){var n;let e,a,i=(n=r,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==q.Fragment&&(o.ref=t?rq(t,i):i),q.cloneElement(r,o)}return q.Children.count(r)>1?q.Children.only(null):null})).displayName=`${t}.SlotClone`,r),n=q.forwardRef((e,t)=>{let{children:r,...n}=e,a=q.Children.toArray(r),i=a.find(ix);if(i){let e=i.props.children,r=a.map(t=>t!==i?t:q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null);return(0,B.jsx)(s,{...n,ref:t,children:q.isValidElement(e)?q.cloneElement(e,void 0,r):null})}return(0,B.jsx)(s,{...n,ref:t,children:r})});return n.displayName=`${e}.Slot`,n}var ib=Symbol("radix.slottable");function ix(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ib}function iw(e){let t=e+"CollectionProvider",[r,s]=s9(t),[n,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{let{scope:t,children:r}=e,s=q.default.useRef(null),a=q.default.useRef(new Map).current;return(0,B.jsx)(n,{scope:t,itemMap:a,collectionRef:s,children:r})};i.displayName=t;let o=e+"CollectionSlot",l=iy(o),c=q.default.forwardRef((e,t)=>{let{scope:r,children:s}=e,n=rF(t,a(o,r).collectionRef);return(0,B.jsx)(l,{ref:n,children:s})});c.displayName=o;let u=e+"CollectionItemSlot",d="data-radix-collection-item",h=iy(u),f=q.default.forwardRef((e,t)=>{let{scope:r,children:s,...n}=e,i=q.default.useRef(null),o=rF(t,i),l=a(u,r);return q.default.useEffect(()=>(l.itemMap.set(i,{ref:i,...n}),()=>void l.itemMap.delete(i))),(0,B.jsx)(h,{...{[d]:""},ref:o,children:s})});return f.displayName=u,[{Provider:i,Slot:c,ItemSlot:f},function(t){let r=a(e+"CollectionConsumer",t);return q.default.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},s]}var iv=new WeakMap;function ik(e,t){var r,s;let n,a,i;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let o=(r=e,s=t,n=r.length,(i=(a=ij(s))>=0?a:n+a)<0||i>=n?-1:i);return -1===o?void 0:e[o]}function ij(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],iv.set(this,!0)}set(e,t){return iv.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,r){let s,n=this.has(t),a=this.#e.length,i=ij(e),o=i>=0?i:a+i,l=o<0||o>=a?-1:o;if(l===this.size||n&&l===this.size-1||-1===l)return this.set(t,r),this;let c=this.size+ +!n;i<0&&o++;let u=[...this.#e],d=!1;for(let e=o;e<c;e++)if(o===e){let a=u[e];u[e]===t&&(a=u[e+1]),n&&this.delete(t),s=this.get(a),this.set(t,r)}else{d||u[e-1]!==t||(d=!0);let r=u[d?e:e-1],n=s;s=this.get(r),this.delete(r),this.set(r,n)}return this}with(t,r,s){let n=new e(this);return n.insert(t,r,s),n}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,r){let s=this.#e.indexOf(e);return -1===s?this:this.insert(s,t,r)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,r){let s=this.#e.indexOf(e);return -1===s?this:this.insert(s+1,t,r)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=ik(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=ik(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return ik(this.#e,e)}from(e,t){let r=this.indexOf(e);if(-1===r)return;let s=r+t;return s<0&&(s=0),s>=this.size&&(s=this.size-1),this.at(s)}keyFrom(e,t){let r=this.indexOf(e);if(-1===r)return;let s=r+t;return s<0&&(s=0),s>=this.size&&(s=this.size-1),this.keyAt(s)}find(e,t){let r=0;for(let s of this){if(Reflect.apply(e,t,[s,r,this]))return s;r++}}findIndex(e,t){let r=0;for(let s of this){if(Reflect.apply(e,t,[s,r,this]))return r;r++}return -1}filter(t,r){let s=[],n=0;for(let e of this)Reflect.apply(t,r,[e,n,this])&&s.push(e),n++;return new e(s)}map(t,r){let s=[],n=0;for(let e of this)s.push([e[0],Reflect.apply(t,r,[e,n,this])]),n++;return new e(s)}reduce(...e){let[t,r]=e,s=0,n=r??this.at(0);for(let r of this)n=0===s&&1===e.length?r:Reflect.apply(t,this,[n,r,s,this]),s++;return n}reduceRight(...e){let[t,r]=e,s=r??this.at(-1);for(let r=this.size-1;r>=0;r--){let n=this.at(r);s=r===this.size-1&&1===e.length?n:Reflect.apply(t,this,[s,n,r,this])}return s}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let r=this.keyAt(e),s=this.get(r);t.set(r,s)}return t}toSpliced(...t){let r=[...this.entries()];return r.splice(...t),new e(r)}slice(t,r){let s=new e,n=this.size-1;if(void 0===t)return s;t<0&&(t+=this.size),void 0!==r&&r>0&&(n=r-1);for(let e=t;e<=n;e++){let t=this.keyAt(e),r=this.get(t);s.set(t,r)}return s}every(e,t){let r=0;for(let s of this){if(!Reflect.apply(e,t,[s,r,this]))return!1;r++}return!0}some(e,t){let r=0;for(let s of this){if(Reflect.apply(e,t,[s,r,this]))return!0;r++}return!1}});var i_=q.createContext(void 0);function iN(e){let t=q.useContext(i_);return e||t||"ltr"}var iE="rovingFocusGroup.onEntryFocus",iS={bubbles:!1,cancelable:!0},iR="RovingFocusGroup",[iT,iC,iA]=iw(iR),[iO,iP]=s9(iR,[iA]),[iI,i$]=iO(iR),iD=q.forwardRef((e,t)=>(0,B.jsx)(iT.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,B.jsx)(iT.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,B.jsx)(iz,{...e,ref:t})})}));iD.displayName=iR;var iz=q.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:s,loop:n=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=q.useRef(null),f=rF(t,h),p=iN(a),[m,g]=nn({prop:i,defaultProp:o??null,onChange:l,caller:iR}),[y,b]=q.useState(!1),x=nu(c),w=iC(r),v=q.useRef(!1),[k,j]=q.useState(0);return q.useEffect(()=>{let e=h.current;if(e)return e.addEventListener(iE,x),()=>e.removeEventListener(iE,x)},[x]),(0,B.jsx)(iI,{scope:r,orientation:s,dir:p,loop:n,currentTabStopId:m,onItemFocus:q.useCallback(e=>g(e),[g]),onItemShiftTab:q.useCallback(()=>b(!0),[]),onFocusableItemAdd:q.useCallback(()=>j(e=>e+1),[]),onFocusableItemRemove:q.useCallback(()=>j(e=>e-1),[]),children:(0,B.jsx)(nl.div,{tabIndex:y||0===k?-1:0,"data-orientation":s,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:s3(e.onMouseDown,()=>{v.current=!0}),onFocus:s3(e.onFocus,e=>{let t=!v.current;if(e.target===e.currentTarget&&t&&!y){let t=new CustomEvent(iE,iS);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=w().filter(e=>e.focusable);iB([e.find(e=>e.active),e.find(e=>e.id===m),...e].filter(Boolean).map(e=>e.ref.current),u)}}v.current=!1}),onBlur:s3(e.onBlur,()=>b(!1))})})}),iL="RovingFocusGroupItem",iM=q.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:s=!0,active:n=!1,tabStopId:a,children:i,...o}=e,l=nr(),c=a||l,u=i$(iL,r),d=u.currentTabStopId===c,h=iC(r),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:m}=u;return q.useEffect(()=>{if(s)return f(),()=>p()},[s,f,p]),(0,B.jsx)(iT.ItemSlot,{scope:r,id:c,focusable:s,active:n,children:(0,B.jsx)(nl.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:s3(e.onMouseDown,e=>{s?u.onItemFocus(c):e.preventDefault()}),onFocus:s3(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:s3(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let n=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return iU[n]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){var r,s;"prev"===t&&n.reverse();let a=n.indexOf(e.currentTarget);n=u.loop?(r=n,s=a+1,r.map((e,t)=>r[(s+t)%r.length])):n.slice(a+1)}setTimeout(()=>iB(n))}}),children:"function"==typeof i?i({isCurrentTabStop:d,hasTabStop:null!=m}):i})})});iM.displayName=iL;var iU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iB(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var iq="Tabs",[iF,iW]=s9(iq,[iP]),iV=iP(),[iK,iH]=iF(iq),iG=q.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:n,defaultValue:a,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=iN(o),[d,h]=nn({prop:s,onChange:n,defaultProp:a??"",caller:iq});return(0,B.jsx)(iK,{scope:r,baseId:nr(),value:d,onValueChange:h,orientation:i,dir:u,activationMode:l,children:(0,B.jsx)(nl.div,{dir:u,"data-orientation":i,...c,ref:t})})});iG.displayName=iq;var iJ="TabsList",iY=q.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...n}=e,a=iH(iJ,r),i=iV(r);return(0,B.jsx)(iD,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:s,children:(0,B.jsx)(nl.div,{role:"tablist","aria-orientation":a.orientation,...n,ref:t})})});iY.displayName=iJ;var iX="TabsTrigger",iZ=q.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,disabled:n=!1,...a}=e,i=iH(iX,r),o=iV(r),l=i1(i.baseId,s),c=i2(i.baseId,s),u=s===i.value;return(0,B.jsx)(iM,{asChild:!0,...o,focusable:!n,active:u,children:(0,B.jsx)(nl.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:l,...a,ref:t,onMouseDown:s3(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:s3(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:s3(e.onFocus,()=>{let e="manual"!==i.activationMode;u||n||!e||i.onValueChange(s)})})})});iZ.displayName=iX;var iQ="TabsContent",i0=q.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,forceMount:n,children:a,...i}=e,o=iH(iQ,r),l=i1(o.baseId,s),c=i2(o.baseId,s),u=s===o.value,d=q.useRef(u);return q.useEffect(()=>{let e=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,B.jsx)(nE,{present:n||u,children:({present:r})=>(0,B.jsx)(nl.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!r,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:r&&a})})});function i1(e,t){return`${e}-trigger-${t}`}function i2(e,t){return`${e}-content-${t}`}function i5({className:e,...t}){return(0,B.jsx)(iG,{"data-slot":"tabs",className:sY("flex flex-col gap-2",e),...t})}function i6({className:e,...t}){return(0,B.jsx)(iY,{"data-slot":"tabs-list",className:sY("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function i4({className:e,...t}){return(0,B.jsx)(iZ,{"data-slot":"tabs-trigger",className:sY("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function i8({className:e,...t}){return(0,B.jsx)(i0,{"data-slot":"tabs-content",className:sY("flex-1 outline-none",e),...t})}function i3({className:e,...t}){return(0,B.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,B.jsx)("table",{"data-slot":"table",className:sY("w-full caption-bottom text-sm",e),...t})})}function i9({className:e,...t}){return(0,B.jsx)("thead",{"data-slot":"table-header",className:sY("[&_tr]:border-b",e),...t})}function i7({className:e,...t}){return(0,B.jsx)("tbody",{"data-slot":"table-body",className:sY("[&_tr:last-child]:border-0",e),...t})}function oe({className:e,...t}){return(0,B.jsx)("tr",{"data-slot":"table-row",className:sY("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function ot({className:e,...t}){return(0,B.jsx)("th",{"data-slot":"table-head",className:sY("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function or({className:e,...t}){return(0,B.jsx)("td",{"data-slot":"table-cell",className:sY("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}i0.displayName=iQ;let os=aJ("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),on=aJ("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),oa=aJ("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),oi=aJ("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),oo=aJ("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),ol=aJ("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),oc=aJ("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ou=aJ("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),od=aJ("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function oh({onNavigate:e}){let[t,r]=(0,q.useState)(null),[s,n]=(0,q.useState)([]),[a,i]=(0,q.useState)(null),[o,l]=(0,q.useState)([]),[c,u]=(0,q.useState)([]),[d,h]=(0,q.useState)(!0),[f,p]=(0,q.useState)([]),[m,g]=(0,q.useState)(""),[y,b]=(0,q.useState)([]);async function x(){h(!0);let{data:{session:t}}=await rU.auth.getSession();if(!t?.user)return void e("home");let{data:s}=await rU.from("profiles").select("*").eq("id",t.user.id).single();r(s);let{data:a}=await rU.from("enrollments").select("classes (*)").eq("student_id",t.user.id);if(a){let e=a.map(e=>e.classes).filter(Boolean);n(e),e.length>0&&i(e[0].id)}let{data:o}=await rU.from("exam_results").select("*, classes (title)").eq("student_id",t.user.id).order("created_at",{ascending:!1});o&&u(o);let{data:l}=await rU.from("private_questions").select("*").eq("student_id",t.user.id).order("created_at",{ascending:!1});b(l||[]),h(!1)}async function w(){if(!a)return;let{data:e}=await rU.from("class_content").select("*").eq("class_id",a).order("created_at",{ascending:!1});e&&l(e);let{data:t}=await rU.from("class_messages").select("*").eq("class_id",a).order("created_at",{ascending:!1});p(t||[])}async function v(){if(!m.trim()||!t)return;let{error:e}=await rU.from("private_questions").insert([{student_id:t.id,student_name:t.full_name,question_text:m.trim()}]);if(e)alert("Submission Error: "+e.message);else{g("");let{data:e}=await rU.from("private_questions").select("*").eq("student_id",t.id).order("created_at",{ascending:!1});b(e||[])}}(0,q.useEffect)(()=>{x()},[]),(0,q.useEffect)(()=>{a&&t?.is_paid&&!t?.is_suspended&&w()},[a,t]);let k=async()=>{await rU.auth.signOut(),e("home")};if(d)return(0,B.jsx)("div",{className:"h-screen flex items-center justify-center font-bold text-teal-600 animate-pulse italic tracking-tighter",children:"ESTABLISHING SECURE GATEWAY..."});if(!t?.is_paid||t?.is_suspended)return(0,B.jsx)("div",{className:"h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:(0,B.jsxs)(sQ,{className:"p-10 rounded-[3rem] shadow-2xl max-w-md border-t-8 border-rose-500 bg-white",children:[(0,B.jsx)("div",{className:"bg-rose-50 p-5 rounded-full w-fit mx-auto mb-6",children:t?.is_suspended?(0,B.jsx)(oc,{className:"size-12 text-rose-600"}):(0,B.jsx)(ol,{className:"size-12 text-rose-600"})}),(0,B.jsx)("h2",{className:"text-3xl font-black mb-4 tracking-tighter uppercase text-slate-800",children:"Access Restricted"}),(0,B.jsx)("p",{className:"text-slate-500 mb-8 font-medium leading-relaxed",children:t?.is_suspended?"Your account is currently suspended. Please contact the administration.":"Payment verification pending. Please settle your monthly dues to unlock your course materials."}),(0,B.jsx)(sZ,{className:"w-full py-7 rounded-2xl font-black bg-slate-900 text-white shadow-xl",onClick:()=>e("home"),children:"Exit Portal"})]})});let j=s.find(e=>e.id===a);return(0,B.jsxs)("div",{className:"flex h-screen bg-[#F8FAFC] text-slate-900 overflow-hidden",children:[(0,B.jsxs)("aside",{className:"w-80 border-r p-6 bg-white flex flex-col shadow-sm",children:[(0,B.jsxs)("div",{className:"mb-10 px-2",children:[(0,B.jsx)("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter uppercase italic",children:"Logic Student"}),(0,B.jsx)("p",{className:"text-[9px] font-bold text-teal-600 tracking-[0.2em] uppercase mt-1",children:"Authorized Access"})]}),(0,B.jsxs)("div",{className:"flex-1 space-y-1 overflow-y-auto pr-2 custom-scrollbar",children:[(0,B.jsx)("p",{className:"text-[11px] uppercase font-black text-slate-400 ml-3 mb-4 tracking-widest",children:"Available Folders"}),s.map(e=>(0,B.jsxs)(sZ,{variant:a===e.id?"default":"ghost",className:`w-full justify-start h-auto py-5 px-4 rounded-2xl transition-all mb-2 ${a===e.id?"bg-slate-900 shadow-xl ring-4 ring-slate-100":"hover:bg-slate-50"}`,onClick:()=>i(e.id),children:[(0,B.jsx)(os,{className:`mr-4 h-6 w-6 ${a===e.id?"text-teal-400":"text-slate-400"}`}),(0,B.jsxs)("div",{className:"text-left overflow-hidden",children:[(0,B.jsx)("div",{className:`text-sm font-black truncate uppercase ${a===e.id?"text-white":"text-slate-700"}`,children:e.title}),(0,B.jsxs)("div",{className:`text-[10px] font-bold ${(e.id,"text-slate-400")}`,children:[e.year,"  ",e.type]})]})]},e.id))]}),(0,B.jsxs)("div",{className:"pt-6 border-t mt-auto space-y-4",children:[(0,B.jsxs)("div",{className:"px-4 py-3 bg-slate-50 rounded-2xl flex items-center gap-3 border",children:[(0,B.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center border shadow-sm font-black text-teal-600 italic",children:"L"}),(0,B.jsxs)("div",{className:"overflow-hidden",children:[(0,B.jsx)("p",{className:"text-xs font-black truncate",children:t?.full_name}),(0,B.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase truncate",children:t?.school_name})]})]}),(0,B.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,B.jsx)(sZ,{variant:"outline",className:"text-xs h-10 rounded-xl font-bold",onClick:()=>e("home"),children:"Home"}),(0,B.jsx)(sZ,{variant:"ghost",className:"text-xs h-10 rounded-xl font-bold text-rose-500 hover:bg-rose-50",onClick:k,children:"Logout"})]})]})]}),(0,B.jsx)("main",{className:"flex-1 p-10 overflow-auto",children:(0,B.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,B.jsxs)("header",{className:"flex justify-between items-start bg-white p-8 rounded-[2.5rem] shadow-sm border relative overflow-hidden",children:[(0,B.jsx)("div",{className:"absolute top-0 right-0 w-32 h-full bg-teal-50 -skew-x-12 translate-x-10 opacity-50"}),(0,B.jsxs)("div",{className:"space-y-3 relative z-10",children:[(0,B.jsx)("h1",{className:"text-4xl font-black tracking-tighter uppercase italic text-slate-800",children:j?.title||"Course Portal"}),(0,B.jsxs)("div",{className:"flex gap-2",children:[(0,B.jsx)(s4,{className:"bg-teal-600 text-white border-none px-4 py-1 font-bold rounded-full",children:j?.year||"----"}),(0,B.jsx)(s4,{variant:"outline",className:"border-slate-200 text-slate-500 px-4 py-1 font-bold rounded-full uppercase text-[10px]",children:j?.type||"----"})]})]}),(0,B.jsxs)("div",{className:"text-right relative z-10",children:[(0,B.jsx)("p",{className:"text-xs uppercase font-black text-slate-400 tracking-widest mb-1",children:"Instructor"}),(0,B.jsx)("p",{className:"text-xl font-black text-slate-900 italic leading-none",children:"Dilshan Uthpala"})]})]}),(0,B.jsxs)(i5,{defaultValue:"video",className:"w-full",children:[(0,B.jsxs)(i6,{className:"mb-8 p-1.5 bg-slate-200/50 rounded-[1.5rem] h-16 w-fit shadow-inner",children:[(0,B.jsxs)(i4,{value:"video",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,B.jsx)(oo,{size:14,className:"mr-2"})," Recordings"]}),(0,B.jsxs)(i4,{value:"notes",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,B.jsx)(on,{size:14,className:"mr-2"})," Materials"]}),(0,B.jsxs)(i4,{value:"marks",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,B.jsx)(oa,{size:14,className:"mr-2"})," Performance"]}),(0,B.jsxs)(i4,{value:"inquiry",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,B.jsx)(od,{size:14,className:"mr-2"})," Q&A Help"]})]}),f.length>0&&(0,B.jsxs)("div",{className:"mb-10 space-y-3",children:[(0,B.jsxs)("p",{className:"text-[10px] font-black uppercase text-teal-600 tracking-widest ml-2 flex items-center gap-2",children:[(0,B.jsx)(it,{size:12})," Class Updates"]}),f.map(e=>(0,B.jsxs)(sQ,{className:"border-none bg-teal-600 text-white rounded-3xl shadow-xl shadow-teal-900/10 p-6 relative overflow-hidden group",children:[(0,B.jsx)(ii,{className:"absolute -right-2 -bottom-2 size-24 opacity-10 group-hover:scale-110 transition-transform"}),(0,B.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,B.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-teal-100",children:"Folder Announcement"}),(0,B.jsx)("span",{className:"text-[10px] font-bold opacity-60",children:new Date(e.created_at).toLocaleDateString()})]}),(0,B.jsx)("p",{className:"font-bold text-lg leading-relaxed relative z-10",children:e.message_text})]},e.id))]}),(0,B.jsx)(i8,{value:"video",className:"grid gap-4",children:o.filter(e=>"video"===e.type).length>0?o.filter(e=>"video"===e.type).map(e=>(0,B.jsxs)(sQ,{className:"p-6 flex items-center justify-between bg-white rounded-[2rem] border-none shadow-sm hover:shadow-xl hover:scale-[1.01] transition-all group",children:[(0,B.jsxs)("div",{className:"flex items-center gap-6",children:[(0,B.jsx)("div",{className:"bg-slate-100 p-5 rounded-2xl group-hover:bg-slate-900 group-hover:text-white transition-all duration-300",children:(0,B.jsx)(oo,{className:"size-7 fill-current"})}),(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{className:"font-black text-xl block uppercase tracking-tight text-slate-800",children:e.title}),(0,B.jsxs)("span",{className:"text-[10px] uppercase font-bold text-slate-400 italic",children:["Logical Analysis  ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,B.jsx)(sZ,{size:"lg",className:"rounded-2xl px-10 font-black bg-teal-600 hover:bg-teal-700 text-white uppercase text-xs h-14",onClick:()=>window.open(e.url,"_blank"),children:"Play Lesson"})]},e.id)):(0,B.jsx)("div",{className:"py-24 text-center border-4 border-dashed rounded-[3rem] text-slate-300 font-bold uppercase tracking-widest italic",children:"Choose a course folder to view recordings"})}),(0,B.jsx)(i8,{value:"notes",className:"grid gap-4",children:o.filter(e=>"note"===e.type).map(e=>(0,B.jsxs)(sQ,{className:"p-6 flex items-center justify-between bg-white rounded-[2rem] border-2 border-transparent hover:border-teal-500/20 transition-all shadow-sm",children:[(0,B.jsxs)("div",{className:"flex items-center gap-6",children:[(0,B.jsx)("div",{className:"bg-orange-50 p-5 rounded-2xl text-orange-500",children:(0,B.jsx)(on,{className:"size-7"})}),(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{className:"font-black text-xl block uppercase tracking-tight text-slate-800",children:e.title}),(0,B.jsx)("p",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-widest italic leading-none mt-1",children:"Verified PDF Material"})]})]}),(0,B.jsx)(sZ,{variant:"ghost",size:"icon",className:"rounded-2xl size-14 hover:bg-teal-50 text-teal-600 transition-all border border-slate-100",onClick:()=>window.open(e.url,"_blank"),children:(0,B.jsx)(oi,{className:"h-7 w-7"})})]},e.id))}),(0,B.jsxs)(i8,{value:"marks",className:"space-y-6",children:[(0,B.jsxs)("div",{className:"flex justify-between items-center px-4",children:[(0,B.jsx)("h3",{className:"text-xl font-black uppercase italic tracking-tight text-slate-800",children:"Verified Result History"}),(0,B.jsxs)(s4,{className:"bg-emerald-50 text-emerald-600 border border-emerald-100 px-4 py-1.5 rounded-full font-bold",children:["Total Entries: ",c.length]})]}),(0,B.jsx)(sQ,{className:"border-none shadow-2xl overflow-hidden rounded-[2.5rem] bg-white",children:(0,B.jsxs)(i3,{children:[(0,B.jsx)(i9,{className:"bg-slate-900",children:(0,B.jsxs)(oe,{className:"hover:bg-transparent border-none",children:[(0,B.jsx)(ot,{className:"py-6 pl-10 font-black uppercase text-[10px] text-white",children:"Date Released"}),(0,B.jsx)(ot,{className:"font-black uppercase text-[10px] text-white text-center",children:"Paper / Exam Details"}),(0,B.jsx)(ot,{className:"text-right pr-10 font-black uppercase text-[10px] text-white",children:"Final Score"})]})}),(0,B.jsx)(i7,{children:c.map((e,t)=>(0,B.jsxs)(oe,{className:`border-slate-50 hover:bg-slate-50 transition-colors ${0===t?"bg-teal-50/20":""}`,children:[(0,B.jsx)(or,{className:"py-8 pl-10 text-xs font-bold text-slate-400",children:new Date(e.created_at).toLocaleDateString()}),(0,B.jsx)(or,{className:"text-center",children:(0,B.jsxs)("div",{className:"flex flex-col",children:[(0,B.jsx)("span",{className:"text-[10px] font-black uppercase text-teal-600 mb-0.5",children:e.classes?.title}),(0,B.jsx)("span",{className:"font-black text-slate-800 uppercase italic text-sm",children:e.exam_name})]})}),(0,B.jsx)(or,{className:"text-right pr-10",children:(0,B.jsxs)("div",{className:"flex flex-col items-end",children:[(0,B.jsxs)("span",{className:"text-4xl font-black text-teal-600 italic tracking-tighter leading-none",children:[e.marks,"%"]}),(0,B.jsx)("span",{className:"text-[8px] font-black uppercase text-slate-300 mt-1",children:"Assessment Confirmed"})]})})]},e.id))})]})})]}),(0,B.jsxs)(i8,{value:"inquiry",className:"grid gap-8",children:[(0,B.jsxs)(sQ,{className:"p-8 rounded-[2.5rem] shadow-xl border-t-8 border-teal-500 bg-white",children:[(0,B.jsxs)(s1,{className:"mb-4 uppercase italic text-xl text-slate-800 flex items-center gap-2",children:[(0,B.jsx)(od,{size:20,className:"text-teal-600"})," Help Desk"]}),(0,B.jsx)(s2,{className:"mb-6 font-medium text-slate-500",children:"Ask a question directly to Dilshan Uthpala. All inquiries are private between you and the instructor."}),(0,B.jsxs)("div",{className:"flex gap-2",children:[(0,B.jsx)(ig,{placeholder:"Describe your logical doubt here...",className:"h-14 rounded-2xl bg-slate-50 border-none px-6 focus-visible:ring-teal-500",value:m,onChange:e=>g(e.target.value)}),(0,B.jsxs)(sZ,{className:"bg-slate-900 text-white rounded-2xl px-10 font-black uppercase text-xs hover:bg-black transition-all",onClick:v,children:[(0,B.jsx)(ou,{size:16,className:"mr-2"})," Ask"]})]})]}),(0,B.jsxs)("div",{className:"space-y-4",children:[(0,B.jsx)("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-4",children:"Conversation History"}),y.map(e=>(0,B.jsxs)(sQ,{className:"p-6 rounded-[2rem] border-none shadow-md bg-white",children:[(0,B.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,B.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:new Date(e.created_at).toLocaleDateString()}),e.is_resolved?(0,B.jsx)(s4,{className:"bg-teal-500 text-white border-none",children:"Answered"}):(0,B.jsx)(s4,{className:"bg-slate-100 text-slate-500 border-none font-bold italic uppercase text-[9px]",children:"Awaiting Reply"})]}),(0,B.jsxs)("p",{className:"font-bold text-slate-700 mb-4 bg-slate-50 p-4 rounded-xl border border-slate-100",children:["Q: ",e.question_text]}),e.admin_reply&&(0,B.jsxs)("div",{className:"p-5 bg-teal-50 rounded-2xl border border-teal-100 relative overflow-hidden",children:[(0,B.jsx)("div",{className:"absolute top-0 right-0 w-24 h-full bg-teal-600/5 -skew-x-12 translate-x-10"}),(0,B.jsx)("p",{className:"text-[10px] font-black text-teal-700 uppercase mb-2 tracking-widest",children:"Instructor Reply:"}),(0,B.jsxs)("p",{className:"text-sm font-medium text-slate-700 italic relative z-10 leading-relaxed",children:['"',e.admin_reply,'"']})]})]},e.id)),0===y.length&&(0,B.jsx)("div",{className:"py-24 text-center text-slate-300 font-bold uppercase italic border-4 border-dashed rounded-[3rem]",children:"No recorded inquiries"})]})]})]})]})})]})}var of=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=rH(`Primitive.${t}`),s=q.forwardRef((e,s)=>{let{asChild:n,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,B.jsx)(n?r:t,{...a,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),op=q.forwardRef((e,t)=>(0,B.jsx)(of.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function om({className:e,...t}){return(0,B.jsx)(op,{"data-slot":"label",className:sY("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function og({className:e,...t}){return(0,B.jsx)("textarea",{"data-slot":"textarea",className:sY("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}op.displayName="Label";let oy=["top","right","bottom","left"],ob=Math.min,ox=Math.max,ow=Math.round,ov=Math.floor,ok=e=>({x:e,y:e}),oj={left:"right",right:"left",bottom:"top",top:"bottom"},o_={start:"end",end:"start"};function oN(e,t){return"function"==typeof e?e(t):e}function oE(e){return e.split("-")[0]}function oS(e){return e.split("-")[1]}function oR(e){return"x"===e?"y":"x"}function oT(e){return"y"===e?"height":"width"}let oC=new Set(["top","bottom"]);function oA(e){return oC.has(oE(e))?"y":"x"}function oO(e){return e.replace(/start|end/g,e=>o_[e])}let oP=["left","right"],oI=["right","left"],o$=["top","bottom"],oD=["bottom","top"];function oz(e){return e.replace(/left|right|bottom|top/g,e=>oj[e])}function oL(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function oM(e){let{x:t,y:r,width:s,height:n}=e;return{width:s,height:n,top:r,left:t,right:t+s,bottom:r+n,x:t,y:r}}function oU(e,t,r){let s,{reference:n,floating:a}=e,i=oA(t),o=oR(oA(t)),l=oT(o),c=oE(t),u="y"===i,d=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,f=n[l]/2-a[l]/2;switch(c){case"top":s={x:d,y:n.y-a.height};break;case"bottom":s={x:d,y:n.y+n.height};break;case"right":s={x:n.x+n.width,y:h};break;case"left":s={x:n.x-a.width,y:h};break;default:s={x:n.x,y:n.y}}switch(oS(t)){case"start":s[o]-=f*(r&&u?-1:1);break;case"end":s[o]+=f*(r&&u?-1:1)}return s}let oB=async(e,t,r)=>{let{placement:s="bottom",strategy:n="absolute",middleware:a=[],platform:i}=r,o=a.filter(Boolean),l=await (null==i.isRTL?void 0:i.isRTL(t)),c=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:u,y:d}=oU(c,s,l),h=s,f={},p=0;for(let r=0;r<o.length;r++){let{name:a,fn:m}=o[r],{x:g,y:y,data:b,reset:x}=await m({x:u,y:d,initialPlacement:s,placement:h,strategy:n,middlewareData:f,rects:c,platform:i,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,f={...f,[a]:{...f[a],...b}},x&&p<=50&&(p++,"object"==typeof x&&(x.placement&&(h=x.placement),x.rects&&(c=!0===x.rects?await i.getElementRects({reference:e,floating:t,strategy:n}):x.rects),{x:u,y:d}=oU(c,h,l)),r=-1)}return{x:u,y:d,placement:h,strategy:n,middlewareData:f}};async function oq(e,t){var r;void 0===t&&(t={});let{x:s,y:n,platform:a,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=oN(t,e),p=oL(f),m=o[h?"floating"===d?"reference":"floating":d],g=oM(await a.getClippingRect({element:null==(r=await (null==a.isElement?void 0:a.isElement(m)))||r?m:m.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:s,y:n,width:i.floating.width,height:i.floating.height}:i.reference,b=await (null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),x=await (null==a.isElement?void 0:a.isElement(b))&&await (null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},w=oM(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:b,strategy:l}):y);return{top:(g.top-w.top+p.top)/x.y,bottom:(w.bottom-g.bottom+p.bottom)/x.y,left:(g.left-w.left+p.left)/x.x,right:(w.right-g.right+p.right)/x.x}}function oF(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function oW(e){return oy.some(t=>e[t]>=0)}let oV=new Set(["left","top"]);async function oK(e,t){let{placement:r,platform:s,elements:n}=e,a=await (null==s.isRTL?void 0:s.isRTL(n.floating)),i=oE(r),o=oS(r),l="y"===oA(r),c=oV.has(i)?-1:1,u=a&&l?-1:1,d=oN(t,e),{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"==typeof p&&(f="end"===o?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}function oH(){return"undefined"!=typeof window}function oG(e){return oX(e)?(e.nodeName||"").toLowerCase():"#document"}function oJ(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function oY(e){var t;return null==(t=(oX(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function oX(e){return!!oH()&&(e instanceof Node||e instanceof oJ(e).Node)}function oZ(e){return!!oH()&&(e instanceof Element||e instanceof oJ(e).Element)}function oQ(e){return!!oH()&&(e instanceof HTMLElement||e instanceof oJ(e).HTMLElement)}function o0(e){return!!oH()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof oJ(e).ShadowRoot)}let o1=new Set(["inline","contents"]);function o2(e){let{overflow:t,overflowX:r,overflowY:s,display:n}=ls(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!o1.has(n)}let o5=new Set(["table","td","th"]),o6=[":popover-open",":modal"];function o4(e){return o6.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let o8=["transform","translate","scale","rotate","perspective"],o3=["transform","translate","scale","rotate","perspective","filter"],o9=["paint","layout","strict","content"];function o7(e){let t=le(),r=oZ(e)?ls(e):e;return o8.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||o3.some(e=>(r.willChange||"").includes(e))||o9.some(e=>(r.contain||"").includes(e))}function le(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let lt=new Set(["html","body","#document"]);function lr(e){return lt.has(oG(e))}function ls(e){return oJ(e).getComputedStyle(e)}function ln(e){return oZ(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function la(e){if("html"===oG(e))return e;let t=e.assignedSlot||e.parentNode||o0(e)&&e.host||oY(e);return o0(t)?t.host:t}function li(e,t,r){var s;void 0===t&&(t=[]),void 0===r&&(r=!0);let n=function e(t){let r=la(t);return lr(r)?t.ownerDocument?t.ownerDocument.body:t.body:oQ(r)&&o2(r)?r:e(r)}(e),a=n===(null==(s=e.ownerDocument)?void 0:s.body),i=oJ(n);if(a){let e=lo(i);return t.concat(i,i.visualViewport||[],o2(n)?n:[],e&&r?li(e):[])}return t.concat(n,li(n,[],r))}function lo(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ll(e){let t=ls(e),r=parseFloat(t.width)||0,s=parseFloat(t.height)||0,n=oQ(e),a=n?e.offsetWidth:r,i=n?e.offsetHeight:s,o=ow(r)!==a||ow(s)!==i;return o&&(r=a,s=i),{width:r,height:s,$:o}}function lc(e){return oZ(e)?e:e.contextElement}function lu(e){let t=lc(e);if(!oQ(t))return ok(1);let r=t.getBoundingClientRect(),{width:s,height:n,$:a}=ll(t),i=(a?ow(r.width):r.width)/s,o=(a?ow(r.height):r.height)/n;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}let ld=ok(0);function lh(e){let t=oJ(e);return le()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ld}function lf(e,t,r,s){var n;void 0===t&&(t=!1),void 0===r&&(r=!1);let a=e.getBoundingClientRect(),i=lc(e),o=ok(1);t&&(s?oZ(s)&&(o=lu(s)):o=lu(e));let l=(void 0===(n=r)&&(n=!1),s&&(!n||s===oJ(i))&&n)?lh(i):ok(0),c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){let e=oJ(i),t=s&&oZ(s)?oJ(s):s,r=e,n=lo(r);for(;n&&s&&t!==r;){let e=lu(n),t=n.getBoundingClientRect(),s=ls(n),a=t.left+(n.clientLeft+parseFloat(s.paddingLeft))*e.x,i=t.top+(n.clientTop+parseFloat(s.paddingTop))*e.y;c*=e.x,u*=e.y,d*=e.x,h*=e.y,c+=a,u+=i,n=lo(r=oJ(n))}}return oM({width:d,height:h,x:c,y:u})}function lp(e,t){let r=ln(e).scrollLeft;return t?t.left+r:lf(oY(e)).left+r}function lm(e,t){let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-lp(e,r),y:r.top+t.scrollTop}}let lg=new Set(["absolute","fixed"]);function ly(e,t,r){var s;let n;if("viewport"===t)n=function(e,t){let r=oJ(e),s=oY(e),n=r.visualViewport,a=s.clientWidth,i=s.clientHeight,o=0,l=0;if(n){a=n.width,i=n.height;let e=le();(!e||e&&"fixed"===t)&&(o=n.offsetLeft,l=n.offsetTop)}let c=lp(s);if(c<=0){let e=s.ownerDocument,t=e.body,r=getComputedStyle(t),n="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,i=Math.abs(s.clientWidth-t.clientWidth-n);i<=25&&(a-=i)}else c<=25&&(a+=c);return{width:a,height:i,x:o,y:l}}(e,r);else if("document"===t){let t,r,a,i,o,l,c;s=oY(e),t=oY(s),r=ln(s),a=s.ownerDocument.body,i=ox(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),o=ox(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight),l=-r.scrollLeft+lp(s),c=-r.scrollTop,"rtl"===ls(a).direction&&(l+=ox(t.clientWidth,a.clientWidth)-i),n={width:i,height:o,x:l,y:c}}else if(oZ(t)){let e,s,a,i,o,l;s=(e=lf(t,!0,"fixed"===r)).top+t.clientTop,a=e.left+t.clientLeft,i=oQ(t)?lu(t):ok(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,n={width:o,height:l,x:a*i.x,y:s*i.y}}else{let r=lh(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return oM(n)}function lb(e){return"static"===ls(e).position}function lx(e,t){if(!oQ(e)||"fixed"===ls(e).position)return null;if(t)return t(e);let r=e.offsetParent;return oY(e)===r&&(r=r.ownerDocument.body),r}function lw(e,t){var r;let s=oJ(e);if(o4(e))return s;if(!oQ(e)){let t=la(e);for(;t&&!lr(t);){if(oZ(t)&&!lb(t))return t;t=la(t)}return s}let n=lx(e,t);for(;n&&(r=n,o5.has(oG(r)))&&lb(n);)n=lx(n,t);return n&&lr(n)&&lb(n)&&!o7(n)?s:n||function(e){let t=la(e);for(;oQ(t)&&!lr(t);){if(o7(t))return t;if(o4(t))break;t=la(t)}return null}(e)||s}let lv=async function(e){let t=this.getOffsetParent||lw,r=this.getDimensions,s=await r(e.floating);return{reference:function(e,t,r){let s=oQ(t),n=oY(t),a="fixed"===r,i=lf(e,!0,a,t),o={scrollLeft:0,scrollTop:0},l=ok(0);if(s||!s&&!a)if(("body"!==oG(t)||o2(n))&&(o=ln(t)),s){let e=lf(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=lp(n));a&&!s&&n&&(l.x=lp(n));let c=!n||s||a?ok(0):lm(n,o);return{x:i.left+o.scrollLeft-l.x-c.x,y:i.top+o.scrollTop-l.y-c.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},lk={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:s,strategy:n}=e,a="fixed"===n,i=oY(s),o=!!t&&o4(t.floating);if(s===i||o&&a)return r;let l={scrollLeft:0,scrollTop:0},c=ok(1),u=ok(0),d=oQ(s);if((d||!d&&!a)&&(("body"!==oG(s)||o2(i))&&(l=ln(s)),oQ(s))){let e=lf(s);c=lu(s),u.x=e.x+s.clientLeft,u.y=e.y+s.clientTop}let h=!i||d||a?ok(0):lm(i,l);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:oY,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:s,strategy:n}=e,a=[..."clippingAncestors"===r?o4(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let s=li(e,[],!1).filter(e=>oZ(e)&&"body"!==oG(e)),n=null,a="fixed"===ls(e).position,i=a?la(e):e;for(;oZ(i)&&!lr(i);){let t=ls(i),r=o7(i);r||"fixed"!==t.position||(n=null),(a?!r&&!n:!r&&"static"===t.position&&!!n&&lg.has(n.position)||o2(i)&&!r&&function e(t,r){let s=la(t);return!(s===r||!oZ(s)||lr(s))&&("fixed"===ls(s).position||e(s,r))}(e,i))?s=s.filter(e=>e!==i):n=t,i=la(i)}return t.set(e,s),s}(t,this._c):[].concat(r),s],i=a[0],o=a.reduce((e,r)=>{let s=ly(t,r,n);return e.top=ox(s.top,e.top),e.right=ob(s.right,e.right),e.bottom=ob(s.bottom,e.bottom),e.left=ox(s.left,e.left),e},ly(t,i,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:lw,getElementRects:lv,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=ll(e);return{width:t,height:r}},getScale:lu,isElement:oZ,isRTL:function(e){return"rtl"===ls(e).direction}};function lj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let l_=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:s,placement:n,rects:a,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=oN(e,t)||{};if(null==c)return{};let d=oL(u),h={x:r,y:s},f=oR(oA(n)),p=oT(f),m=await i.getDimensions(c),g="y"===f,y=g?"clientHeight":"clientWidth",b=a.reference[p]+a.reference[f]-h[f]-a.floating[p],x=h[f]-a.reference[f],w=await (null==i.getOffsetParent?void 0:i.getOffsetParent(c)),v=w?w[y]:0;v&&await (null==i.isElement?void 0:i.isElement(w))||(v=o.floating[y]||a.floating[p]);let k=v/2-m[p]/2-1,j=ob(d[g?"top":"left"],k),_=ob(d[g?"bottom":"right"],k),N=v-m[p]-_,E=v/2-m[p]/2+(b/2-x/2),S=ox(j,ob(E,N)),R=!l.arrow&&null!=oS(n)&&E!==S&&a.reference[p]/2-(E<j?j:_)-m[p]/2<0,T=R?E<j?E-j:E-N:0;return{[f]:h[f]+T,data:{[f]:S,centerOffset:E-S-T,...R&&{alignmentOffset:T}},reset:R}}});var lN="undefined"!=typeof document?q.useLayoutEffect:function(){};function lE(e,t){let r,s,n;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(s=r;0!=s--;)if(!lE(e[s],t[s]))return!1;return!0}if((r=(n=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(s=r;0!=s--;)if(!({}).hasOwnProperty.call(t,n[s]))return!1;for(s=r;0!=s--;){let r=n[s];if(("_owner"!==r||!e.$$typeof)&&!lE(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function lS(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lR(e,t){let r=lS(e);return Math.round(t*r)/r}function lT(e){let t=q.useRef(e);return lN(()=>{t.current=e}),t}var lC=q.forwardRef((e,t)=>{let{children:r,width:s=10,height:n=5,...a}=e;return(0,B.jsx)(nl.svg,{...a,ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,B.jsx)("polygon",{points:"0,0 30,0 15,10"})})});lC.displayName="Arrow";var lA="Popper",[lO,lP]=s9(lA),[lI,l$]=lO(lA),lD=e=>{let{__scopePopper:t,children:r}=e,[s,n]=q.useState(null);return(0,B.jsx)(lI,{scope:t,anchor:s,onAnchorChange:n,children:r})};lD.displayName=lA;var lz="PopperAnchor",lL=q.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:s,...n}=e,a=l$(lz,r),i=q.useRef(null),o=rF(t,i),l=q.useRef(null);return q.useEffect(()=>{let e=l.current;l.current=s?.current||i.current,e!==l.current&&a.onAnchorChange(l.current)}),s?null:(0,B.jsx)(nl.div,{...n,ref:o})});lL.displayName=lz;var lM="PopperContent",[lU,lB]=lO(lM),lq=q.forwardRef((e,t)=>{var r,s,n,a,i,o,l,c,u,d,h,f,p,m,g,y,b,x,w,v,k;let{__scopePopper:j,side:_="bottom",sideOffset:N=0,align:E="center",alignOffset:S=0,arrowPadding:R=0,avoidCollisions:T=!0,collisionBoundary:C=[],collisionPadding:A=0,sticky:O="partial",hideWhenDetached:P=!1,updatePositionStrategy:I="optimized",onPlaced:$,...D}=e,z=l$(lM,j),[L,M]=q.useState(null),U=rF(t,e=>M(e)),[F,W]=q.useState(null),V=function(e){let[t,r]=q.useState(void 0);return s7(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,n;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,n=t.blockSize}else s=e.offsetWidth,n=e.offsetHeight;r({width:s,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(F),K=V?.width??0,H=V?.height??0,G="number"==typeof A?A:{top:0,right:0,bottom:0,left:0,...A},J=Array.isArray(C)?C:[C],Y=J.length>0,X={padding:G,boundary:J.filter(lK),altBoundary:Y},{refs:Z,floatingStyles:Q,placement:ee,isPositioned:et,middlewareData:er}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:n,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=q.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=q.useState(s);lE(h,s)||f(s);let[p,m]=q.useState(null),[g,y]=q.useState(null),b=q.useCallback(e=>{e!==k.current&&(k.current=e,m(e))},[]),x=q.useCallback(e=>{e!==j.current&&(j.current=e,y(e))},[]),w=a||p,v=i||g,k=q.useRef(null),j=q.useRef(null),_=q.useRef(u),N=null!=l,E=lT(l),S=lT(n),R=lT(c),T=q.useCallback(()=>{var e,s;let n,a,i;if(!k.current||!j.current)return;let o={placement:t,strategy:r,middleware:h};S.current&&(o.platform=S.current),(e=k.current,s=j.current,n=new Map,i={...(a={platform:lk,...o}).platform,_c:n},oB(e,s,{...a,platform:i})).then(e=>{let t={...e,isPositioned:!1!==R.current};C.current&&!lE(_.current,t)&&(_.current=t,na.flushSync(()=>{d(t)}))})},[h,t,r,S,R]);lN(()=>{!1===c&&_.current.isPositioned&&(_.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);let C=q.useRef(!1);lN(()=>(C.current=!0,()=>{C.current=!1}),[]),lN(()=>{if(w&&(k.current=w),v&&(j.current=v),w&&v){if(E.current)return E.current(w,v,T);T()}},[w,v,T,E,N]);let A=q.useMemo(()=>({reference:k,floating:j,setReference:b,setFloating:x}),[b,x]),O=q.useMemo(()=>({reference:w,floating:v}),[w,v]),P=q.useMemo(()=>{let e={position:r,left:0,top:0};if(!O.floating)return e;let t=lR(O.floating,u.x),s=lR(O.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+s+"px)",...lS(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:s}},[r,o,O.floating,u.x,u.y]);return q.useMemo(()=>({...u,update:T,refs:A,elements:O,floatingStyles:P}),[u,T,A,O,P])}({strategy:"fixed",placement:_+("center"!==E?"-"+E:""),whileElementsMounted:(...e)=>(function(e,t,r,s){let n;void 0===s&&(s={});let{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=s,u=lc(e),d=a||i?[...u?li(u):[],...li(t)]:[];d.forEach(e=>{a&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)});let h=u&&l?function(e,t){let r,s=null,n=oY(e);function a(){var e;clearTimeout(r),null==(e=s)||e.disconnect(),s=null}return!function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();let c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(o||t(),!h||!f)return;let p={rootMargin:-ov(d)+"px "+-ov(n.clientWidth-(u+h))+"px "+-ov(n.clientHeight-(d+f))+"px "+-ov(u)+"px",threshold:ox(0,ob(1,l))||1},m=!0;function g(t){let s=t[0].intersectionRatio;if(s!==l){if(!m)return i();s?i(!1,s):r=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==s||lj(c,e.getBoundingClientRect())||i(),m=!1}try{s=new IntersectionObserver(g,{...p,root:n.ownerDocument})}catch(e){s=new IntersectionObserver(g,p)}s.observe(e)}(!0),a}(u,r):null,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[s]=e;s&&s.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let m=c?lf(e):null;return c&&function t(){let s=lf(e);m&&!lj(m,s)&&r(),m=s,n=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach(e=>{a&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(n)}})(...e,{animationFrame:"always"===I}),elements:{reference:z.anchor},middleware:[{...{name:"offset",options:n=r={mainAxis:N+H,alignmentAxis:S},async fn(e){var t,r;let{x:s,y:a,placement:i,middlewareData:o}=e,l=await oK(e,n);return i===(null==(t=o.offset)?void 0:t.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:i}}}},options:[r,s]},T&&{...{name:"shift",options:u=l={mainAxis:!0,crossAxis:!1,limiter:"partial"===O?{...(void 0===(o=a)&&(o={}),{options:o,fn(e){let{x:t,y:r,placement:s,rects:n,middlewareData:a}=e,{offset:i=0,mainAxis:l=!0,crossAxis:c=!0}=oN(o,e),u={x:t,y:r},d=oA(s),h=oR(d),f=u[h],p=u[d],m=oN(i,e),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){let e="y"===h?"height":"width",t=n.reference[h]-n.floating[e]+g.mainAxis,r=n.reference[h]+n.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var y,b;let e="y"===h?"width":"height",t=oV.has(oE(s)),r=n.reference[d]-n.floating[e]+(t&&(null==(y=a.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),i=n.reference[d]+n.reference[e]+(t?0:(null==(b=a.offset)?void 0:b[d])||0)-(t?g.crossAxis:0);p<r?p=r:p>i&&(p=i)}return{[h]:f,[d]:p}}}),options:[a,i]}:void 0,...X},async fn(e){let{x:t,y:r,placement:s}=e,{mainAxis:n=!0,crossAxis:a=!1,limiter:i={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...o}=oN(u,e),l={x:t,y:r},c=await oq(e,o),d=oA(oE(s)),h=oR(d),f=l[h],p=l[d];if(n){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=f+c[e],s=f-c[t];f=ox(r,ob(f,s))}if(a){let e="y"===d?"top":"left",t="y"===d?"bottom":"right",r=p+c[e],s=p-c[t];p=ox(r,ob(p,s))}let m=i.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[h]:n,[d]:a}}}}},options:[l,c]},T&&{...{name:"flip",options:f=d={...X},async fn(e){var t,r,s,n,a,i,o,l;let c,u,d,{placement:h,middlewareData:p,rects:m,initialPlacement:g,platform:y,elements:b}=e,{mainAxis:x=!0,crossAxis:w=!0,fallbackPlacements:v,fallbackStrategy:k="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:_=!0,...N}=oN(f,e);if(null!=(t=p.arrow)&&t.alignmentOffset)return{};let E=oE(h),S=oA(g),R=oE(g)===g,T=await (null==y.isRTL?void 0:y.isRTL(b.floating)),C=v||(R||!_?[oz(g)]:(c=oz(g),[oO(g),c,oO(c)])),A="none"!==j;!v&&A&&C.push(...(u=oS(g),d=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?oI:oP;return t?oP:oI;case"left":case"right":return t?o$:oD;default:return[]}}(oE(g),"start"===j,T),u&&(d=d.map(e=>e+"-"+u),_&&(d=d.concat(d.map(oO)))),d));let O=[g,...C],P=await oq(e,N),I=[],$=(null==(r=p.flip)?void 0:r.overflows)||[];if(x&&I.push(P[E]),w){let e,t,r,s,n=(i=h,o=m,void 0===(l=T)&&(l=!1),e=oS(i),r=oT(t=oR(oA(i))),s="x"===t?e===(l?"end":"start")?"right":"left":"start"===e?"bottom":"top",o.reference[r]>o.floating[r]&&(s=oz(s)),[s,oz(s)]);I.push(P[n[0]],P[n[1]])}if($=[...$,{placement:h,overflows:I}],!I.every(e=>e<=0)){let e=((null==(s=p.flip)?void 0:s.index)||0)+1,t=O[e];if(t&&("alignment"!==w||S===oA(t)||$.every(e=>oA(e.placement)!==S||e.overflows[0]>0)))return{data:{index:e,overflows:$},reset:{placement:t}};let r=null==(n=$.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:n.placement;if(!r)switch(k){case"bestFit":{let e=null==(a=$.filter(e=>{if(A){let t=oA(e.placement);return t===S||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(r=e);break}case"initialPlacement":r=g}if(h!==r)return{reset:{placement:r}}}return{}}},options:[d,h]},{...{name:"size",options:g=p={...X,apply:({elements:e,rects:t,availableWidth:r,availableHeight:s})=>{let{width:n,height:a}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${r}px`),i.setProperty("--radix-popper-available-height",`${s}px`),i.setProperty("--radix-popper-anchor-width",`${n}px`),i.setProperty("--radix-popper-anchor-height",`${a}px`)}},async fn(e){var t,r;let s,n,{placement:a,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=oN(g,e),d=await oq(e,u),h=oE(a),f=oS(a),p="y"===oA(a),{width:m,height:y}=i.floating;"top"===h||"bottom"===h?(s=h,n=f===(await (null==o.isRTL?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(n=h,s="end"===f?"top":"bottom");let b=y-d.top-d.bottom,x=m-d.left-d.right,w=ob(y-d[s],b),v=ob(m-d[n],x),k=!e.middlewareData.shift,j=w,_=v;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(_=x),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(j=b),k&&!f){let e=ox(d.left,0),t=ox(d.right,0),r=ox(d.top,0),s=ox(d.bottom,0);p?_=m-2*(0!==e||0!==t?e+t:ox(d.left,d.right)):j=y-2*(0!==r||0!==s?r+s:ox(d.top,d.bottom))}await c({...e,availableWidth:_,availableHeight:j});let N=await o.getDimensions(l.floating);return m!==N.width||y!==N.height?{reset:{rects:!0}}:{}}},options:[p,m]},F&&{...{name:"arrow",options:x=y={element:F,padding:R},fn(e){let{element:t,padding:r}="function"==typeof x?x(e):x;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?l_({element:t.current,padding:r}).fn(e):{}:t?l_({element:t,padding:r}).fn(e):{}}},options:[y,b]},lH({arrowWidth:K,arrowHeight:H}),P&&{...{name:"hide",options:k=w={strategy:"referenceHidden",...X},async fn(e){let{rects:t}=e,{strategy:r="referenceHidden",...s}=oN(k,e);switch(r){case"referenceHidden":{let r=oF(await oq(e,{...s,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:oW(r)}}}case"escaped":{let r=oF(await oq(e,{...s,altBoundary:!0}),t.floating);return{data:{escapedOffsets:r,escaped:oW(r)}}}default:return{}}}},options:[w,v]}]}),[es,en]=lG(ee),ea=nu($);s7(()=>{et&&ea?.()},[et,ea]);let ei=er.arrow?.x,eo=er.arrow?.y,el=er.arrow?.centerOffset!==0,[ec,eu]=q.useState();return s7(()=>{L&&eu(window.getComputedStyle(L).zIndex)},[L]),(0,B.jsx)("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:et?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ec,"--radix-popper-transform-origin":[er.transformOrigin?.x,er.transformOrigin?.y].join(" "),...er.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,B.jsx)(lU,{scope:j,placedSide:es,onArrowChange:W,arrowX:ei,arrowY:eo,shouldHideArrow:el,children:(0,B.jsx)(nl.div,{"data-side":es,"data-align":en,...D,ref:U,style:{...D.style,animation:et?void 0:"none"}})})})});lq.displayName=lM;var lF="PopperArrow",lW={top:"bottom",right:"left",bottom:"top",left:"right"},lV=q.forwardRef(function(e,t){let{__scopePopper:r,...s}=e,n=lB(lF,r),a=lW[n.placedSide];return(0,B.jsx)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:(0,B.jsx)(lC,{...s,ref:t,style:{...s.style,display:"block"}})})});function lK(e){return null!==e}lV.displayName=lF;var lH=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:s,middlewareData:n}=t,a=n.arrow?.centerOffset!==0,i=a?0:e.arrowWidth,o=a?0:e.arrowHeight,[l,c]=lG(r),u={start:"0%",center:"50%",end:"100%"}[c],d=(n.arrow?.x??0)+i/2,h=(n.arrow?.y??0)+o/2,f="",p="";return"bottom"===l?(f=a?u:`${d}px`,p=`${-o}px`):"top"===l?(f=a?u:`${d}px`,p=`${s.floating.height+o}px`):"right"===l?(f=`${-o}px`,p=a?u:`${h}px`):"left"===l&&(f=`${s.floating.width+o}px`,p=a?u:`${h}px`),{data:{x:f,y:p}}}});function lG(e){let[t,r="center"]=e.split("-");return[t,r]}var lJ=Symbol("radix.slottable");function lY(e){return q.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===lJ}var lX=["Enter"," "],lZ=["ArrowUp","PageDown","End"],lQ=["ArrowDown","PageUp","Home",...lZ],l0={ltr:[...lX,"ArrowRight"],rtl:[...lX,"ArrowLeft"]},l1={ltr:["ArrowLeft"],rtl:["ArrowRight"]},l2="Menu",[l5,l6,l4]=iw(l2),[l8,l3]=s9(l2,[l4,lP,iP]),l9=lP(),l7=iP(),[ce,ct]=l8(l2),[cr,cs]=l8(l2),cn=e=>{let{__scopeMenu:t,open:r=!1,children:s,dir:n,onOpenChange:a,modal:i=!0}=e,o=l9(t),[l,c]=q.useState(null),u=q.useRef(!1),d=nu(a),h=iN(n);return q.useEffect(()=>{let e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,B.jsx)(lD,{...o,children:(0,B.jsx)(ce,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:c,children:(0,B.jsx)(cr,{scope:t,onClose:q.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:i,children:s})})})};cn.displayName=l2;var ca=q.forwardRef((e,t)=>{let{__scopeMenu:r,...s}=e,n=l9(r);return(0,B.jsx)(lL,{...n,...s,ref:t})});ca.displayName="MenuAnchor";var ci="MenuPortal",[co,cl]=l8(ci,{forceMount:void 0}),cc=e=>{let{__scopeMenu:t,forceMount:r,children:s,container:n}=e,a=ct(ci,t);return(0,B.jsx)(co,{scope:t,forceMount:r,children:(0,B.jsx)(nE,{present:r||a.open,children:(0,B.jsx)(nN,{asChild:!0,container:n,children:s})})})};cc.displayName=ci;var cu="MenuContent",[cd,ch]=l8(cu),cf=q.forwardRef((e,t)=>{let r=cl(cu,e.__scopeMenu),{forceMount:s=r.forceMount,...n}=e,a=ct(cu,e.__scopeMenu),i=cs(cu,e.__scopeMenu);return(0,B.jsx)(l5.Provider,{scope:e.__scopeMenu,children:(0,B.jsx)(nE,{present:s||a.open,children:(0,B.jsx)(l5.Slot,{scope:e.__scopeMenu,children:i.modal?(0,B.jsx)(cp,{...n,ref:t}):(0,B.jsx)(cm,{...n,ref:t})})})})}),cp=q.forwardRef((e,t)=>{let r=ct(cu,e.__scopeMenu),s=q.useRef(null),n=rF(t,s);return q.useEffect(()=>{let e=s.current;if(e)return au(e)},[]),(0,B.jsx)(cy,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:s3(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),cm=q.forwardRef((e,t)=>{let r=ct(cu,e.__scopeMenu);return(0,B.jsx)(cy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),cg=((u=q.forwardRef((e,t)=>{let{children:r,...s}=e;if(q.isValidElement(r)){var n;let e,a,i=(n=r,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==q.Fragment&&(o.ref=t?rq(t,i):i),q.cloneElement(r,o)}return q.Children.count(r)>1?q.Children.only(null):null})).displayName="MenuContent.ScrollLock.SlotClone",i=u,(o=q.forwardRef((e,t)=>{let{children:r,...s}=e,n=q.Children.toArray(r),a=n.find(lY);if(a){let e=a.props.children,r=n.map(t=>t!==a?t:q.Children.count(e)>1?q.Children.only(null):q.isValidElement(e)?e.props.children:null);return(0,B.jsx)(i,{...s,ref:t,children:q.isValidElement(e)?q.cloneElement(e,void 0,r):null})}return(0,B.jsx)(i,{...s,ref:t,children:r})})).displayName="MenuContent.ScrollLock.Slot",o),cy=q.forwardRef((e,t)=>{let{__scopeMenu:r,loop:s=!1,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...m}=e,g=ct(cu,r),y=cs(cu,r),b=l9(r),x=l7(r),w=l6(r),[v,k]=q.useState(null),j=q.useRef(null),_=rF(t,j,g.onContentChange),N=q.useRef(0),E=q.useRef(""),S=q.useRef(0),R=q.useRef(null),T=q.useRef("right"),C=q.useRef(0),A=p?as:q.Fragment;q.useEffect(()=>()=>window.clearTimeout(N.current),[]),nT();let O=q.useCallback(e=>{var t,r;return T.current===R.current?.side&&(t=e,!!(r=R.current?.area)&&function(e,t){let{x:r,y:s}=e,n=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let i=t[e],o=t[a],l=i.x,c=i.y,u=o.x,d=o.y;c>s!=d>s&&r<(u-l)*(s-c)/(d-c)+l&&(n=!n)}return n}({x:t.clientX,y:t.clientY},r))},[]);return(0,B.jsx)(cd,{scope:r,searchRef:E,onItemEnter:q.useCallback(e=>{O(e)&&e.preventDefault()},[O]),onItemLeave:q.useCallback(e=>{O(e)||(j.current?.focus(),k(null))},[O]),onTriggerLeave:q.useCallback(e=>{O(e)&&e.preventDefault()},[O]),pointerGraceTimerRef:S,onPointerGraceIntentChange:q.useCallback(e=>{R.current=e},[]),children:(0,B.jsx)(A,{...p?{as:cg,allowPinchZoom:!0}:void 0,children:(0,B.jsx)(nx,{asChild:!0,trapped:n,onMountAutoFocus:s3(a,e=>{e.preventDefault(),j.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:(0,B.jsx)(nf,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:(0,B.jsx)(iD,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:s,currentTabStopId:v,onCurrentTabStopIdChange:k,onEntryFocus:s3(l,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,B.jsx)(lq,{role:"menu","aria-orientation":"vertical","data-state":cF(g.open),"data-radix-menu-content":"",dir:y.dir,...b,...m,ref:_,style:{outline:"none",...m.style},onKeyDown:s3(m.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,s=1===e.key.length;if(t){var n;let t,a,i,o,l,c;"Tab"===e.key&&e.preventDefault(),!r&&s&&(n=e.key,t=E.current+n,a=w().filter(e=>!e.disabled),i=document.activeElement,o=a.find(e=>e.ref.current===i)?.textValue,l=function(e,t,r){var s;let n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=r?e.indexOf(r):-1,i=(s=Math.max(a,0),e.map((t,r)=>e[(s+r)%e.length]));1===n.length&&(i=i.filter(e=>e!==r));let o=i.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}(a.map(e=>e.textValue),t,o),c=a.find(e=>e.textValue===l)?.ref.current,function e(t){E.current=t,window.clearTimeout(N.current),""!==t&&(N.current=window.setTimeout(()=>e(""),1e3))}(t),c&&setTimeout(()=>c.focus()))}let a=j.current;if(e.target!==a||!lQ.includes(e.key))return;e.preventDefault();let i=w().filter(e=>!e.disabled).map(e=>e.ref.current);lZ.includes(e.key)&&i.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(i)}),onBlur:s3(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(N.current),E.current="")}),onPointerMove:s3(e.onPointerMove,cK(e=>{let t=e.target,r=C.current!==e.clientX;e.currentTarget.contains(t)&&r&&(T.current=e.clientX>C.current?"right":"left",C.current=e.clientX)}))})})})})})})});cf.displayName=cu;var cb=q.forwardRef((e,t)=>{let{__scopeMenu:r,...s}=e;return(0,B.jsx)(nl.div,{role:"group",...s,ref:t})});cb.displayName="MenuGroup";var cx=q.forwardRef((e,t)=>{let{__scopeMenu:r,...s}=e;return(0,B.jsx)(nl.div,{...s,ref:t})});cx.displayName="MenuLabel";var cw="MenuItem",cv="menu.itemSelect",ck=q.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:s,...n}=e,a=q.useRef(null),i=cs(cw,e.__scopeMenu),o=ch(cw,e.__scopeMenu),l=rF(t,a),c=q.useRef(!1);return(0,B.jsx)(cj,{...n,ref:l,disabled:r,onClick:s3(e.onClick,()=>{let e=a.current;if(!r&&e){let t=new CustomEvent(cv,{bubbles:!0,cancelable:!0});e.addEventListener(cv,e=>s?.(e),{once:!0}),nc(e,t),t.defaultPrevented?c.current=!1:i.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),c.current=!0},onPointerUp:s3(e.onPointerUp,e=>{c.current||e.currentTarget?.click()}),onKeyDown:s3(e.onKeyDown,e=>{let t=""!==o.searchRef.current;r||t&&" "===e.key||lX.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});ck.displayName=cw;var cj=q.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:s=!1,textValue:n,...a}=e,i=ch(cw,r),o=l7(r),l=q.useRef(null),c=rF(t,l),[u,d]=q.useState(!1),[h,f]=q.useState("");return q.useEffect(()=>{let e=l.current;e&&f((e.textContent??"").trim())},[a.children]),(0,B.jsx)(l5.ItemSlot,{scope:r,disabled:s,textValue:n??h,children:(0,B.jsx)(iM,{asChild:!0,...o,focusable:!s,children:(0,B.jsx)(nl.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:c,onPointerMove:s3(e.onPointerMove,cK(e=>{s?i.onItemLeave(e):(i.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:s3(e.onPointerLeave,cK(e=>i.onItemLeave(e))),onFocus:s3(e.onFocus,()=>d(!0)),onBlur:s3(e.onBlur,()=>d(!1))})})})}),c_=q.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:s,...n}=e;return(0,B.jsx)(cO,{scope:e.__scopeMenu,checked:r,children:(0,B.jsx)(ck,{role:"menuitemcheckbox","aria-checked":cW(r)?"mixed":r,...n,ref:t,"data-state":cV(r),onSelect:s3(n.onSelect,()=>s?.(!!cW(r)||!r),{checkForDefaultPrevented:!1})})})});c_.displayName="MenuCheckboxItem";var cN="MenuRadioGroup",[cE,cS]=l8(cN,{value:void 0,onValueChange:()=>{}}),cR=q.forwardRef((e,t)=>{let{value:r,onValueChange:s,...n}=e,a=nu(s);return(0,B.jsx)(cE,{scope:e.__scopeMenu,value:r,onValueChange:a,children:(0,B.jsx)(cb,{...n,ref:t})})});cR.displayName=cN;var cT="MenuRadioItem",cC=q.forwardRef((e,t)=>{let{value:r,...s}=e,n=cS(cT,e.__scopeMenu),a=r===n.value;return(0,B.jsx)(cO,{scope:e.__scopeMenu,checked:a,children:(0,B.jsx)(ck,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":cV(a),onSelect:s3(s.onSelect,()=>n.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});cC.displayName=cT;var cA="MenuItemIndicator",[cO,cP]=l8(cA,{checked:!1}),cI=q.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:s,...n}=e,a=cP(cA,r);return(0,B.jsx)(nE,{present:s||cW(a.checked)||!0===a.checked,children:(0,B.jsx)(nl.span,{...n,ref:t,"data-state":cV(a.checked)})})});cI.displayName=cA;var c$=q.forwardRef((e,t)=>{let{__scopeMenu:r,...s}=e;return(0,B.jsx)(nl.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});c$.displayName="MenuSeparator";var cD=q.forwardRef((e,t)=>{let{__scopeMenu:r,...s}=e,n=l9(r);return(0,B.jsx)(lV,{...n,...s,ref:t})});cD.displayName="MenuArrow";var[cz,cL]=l8("MenuSub"),cM="MenuSubTrigger",cU=q.forwardRef((e,t)=>{let r=ct(cM,e.__scopeMenu),s=cs(cM,e.__scopeMenu),n=cL(cM,e.__scopeMenu),a=ch(cM,e.__scopeMenu),i=q.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=a,c={__scopeMenu:e.__scopeMenu},u=q.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return q.useEffect(()=>u,[u]),q.useEffect(()=>{let e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),(0,B.jsx)(ca,{asChild:!0,...c,children:(0,B.jsx)(cj,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":n.contentId,"data-state":cF(r.open),...e,ref:rq(t,n.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:s3(e.onPointerMove,cK(t=>{a.onItemEnter(t),!t.defaultPrevented&&(e.disabled||r.open||i.current||(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100)))})),onPointerLeave:s3(e.onPointerLeave,cK(e=>{u();let t=r.content?.getBoundingClientRect();if(t){let s=r.content?.dataset.side,n="right"===s,i=t[n?"left":"right"],l=t[n?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+(n?-5:5),y:e.clientY},{x:i,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:i,y:t.bottom}],side:s}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:s3(e.onKeyDown,t=>{let n=""!==a.searchRef.current;e.disabled||n&&" "===t.key||l0[s.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});cU.displayName=cM;var cB="MenuSubContent",cq=q.forwardRef((e,t)=>{let r=cl(cu,e.__scopeMenu),{forceMount:s=r.forceMount,...n}=e,a=ct(cu,e.__scopeMenu),i=cs(cu,e.__scopeMenu),o=cL(cB,e.__scopeMenu),l=q.useRef(null),c=rF(t,l);return(0,B.jsx)(l5.Provider,{scope:e.__scopeMenu,children:(0,B.jsx)(nE,{present:s||a.open,children:(0,B.jsx)(l5.Slot,{scope:e.__scopeMenu,children:(0,B.jsx)(cy,{id:o.contentId,"aria-labelledby":o.triggerId,...n,ref:c,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{i.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:s3(e.onFocusOutside,e=>{e.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:s3(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:s3(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=l1[i.dir].includes(e.key);t&&r&&(a.onOpenChange(!1),o.trigger?.focus(),e.preventDefault())})})})})})});function cF(e){return e?"open":"closed"}function cW(e){return"indeterminate"===e}function cV(e){return cW(e)?"indeterminate":e?"checked":"unchecked"}function cK(e){return t=>"mouse"===t.pointerType?e(t):void 0}cq.displayName=cB;var cH="DropdownMenu",[cG,cJ]=s9(cH,[l3]),cY=l3(),[cX,cZ]=cG(cH),cQ=e=>{let{__scopeDropdownMenu:t,children:r,dir:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=cY(t),c=q.useRef(null),[u,d]=nn({prop:n,defaultProp:a??!1,onChange:i,caller:cH});return(0,B.jsx)(cX,{scope:t,triggerId:nr(),triggerRef:c,contentId:nr(),open:u,onOpenChange:d,onOpenToggle:q.useCallback(()=>d(e=>!e),[d]),modal:o,children:(0,B.jsx)(cn,{...l,open:u,onOpenChange:d,dir:s,modal:o,children:r})})};cQ.displayName=cH;var c0="DropdownMenuTrigger",c1=q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:s=!1,...n}=e,a=cZ(c0,r),i=cY(r);return(0,B.jsx)(ca,{asChild:!0,...i,children:(0,B.jsx)(nl.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...n,ref:rq(t,a.triggerRef),onPointerDown:s3(e.onPointerDown,e=>{!s&&0===e.button&&!1===e.ctrlKey&&(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:s3(e.onKeyDown,e=>{!s&&(["Enter"," "].includes(e.key)&&a.onOpenToggle(),"ArrowDown"===e.key&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});c1.displayName=c0;var c2=e=>{let{__scopeDropdownMenu:t,...r}=e,s=cY(t);return(0,B.jsx)(cc,{...s,...r})};c2.displayName="DropdownMenuPortal";var c5="DropdownMenuContent",c6=q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cZ(c5,r),a=cY(r),i=q.useRef(!1);return(0,B.jsx)(cf,{id:n.contentId,"aria-labelledby":n.triggerId,...a,...s,ref:t,onCloseAutoFocus:s3(e.onCloseAutoFocus,e=>{i.current||n.triggerRef.current?.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:s3(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,s=2===t.button||r;(!n.modal||s)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});c6.displayName=c5,q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cb,{...n,...s,ref:t})}).displayName="DropdownMenuGroup",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cx,{...n,...s,ref:t})}).displayName="DropdownMenuLabel";var c4=q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(ck,{...n,...s,ref:t})});c4.displayName="DropdownMenuItem",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(c_,{...n,...s,ref:t})}).displayName="DropdownMenuCheckboxItem",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cR,{...n,...s,ref:t})}).displayName="DropdownMenuRadioGroup",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cC,{...n,...s,ref:t})}).displayName="DropdownMenuRadioItem",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cI,{...n,...s,ref:t})}).displayName="DropdownMenuItemIndicator",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(c$,{...n,...s,ref:t})}).displayName="DropdownMenuSeparator",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cD,{...n,...s,ref:t})}).displayName="DropdownMenuArrow",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cU,{...n,...s,ref:t})}).displayName="DropdownMenuSubTrigger",q.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...s}=e,n=cY(r);return(0,B.jsx)(cq,{...n,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent";let c8=aJ("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function c3({...e}){return(0,B.jsx)(cQ,{"data-slot":"dropdown-menu",...e})}function c9({...e}){return(0,B.jsx)(c1,{"data-slot":"dropdown-menu-trigger",...e})}function c7({className:e,sideOffset:t=4,...r}){return(0,B.jsx)(c2,{children:(0,B.jsx)(c6,{"data-slot":"dropdown-menu-content",sideOffset:t,className:sY("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...r})})}function ue({className:e,inset:t,variant:r="default",...s}){return(0,B.jsx)(c4,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:sY("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}aJ("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);let ut=aJ("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ur=aJ("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),us=aJ("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),un=aJ("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),ua=aJ("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ui=aJ("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),uo=aJ("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),ul=aJ("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),uc=aJ("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),uu=aJ("school",[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),ud=aJ("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),uh=aJ("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),uf=aJ("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),up=aJ("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),um=aJ("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ug=aJ("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function uy({onNavigate:e}){let[t,r]=(0,q.useState)("classes"),[s,n]=(0,q.useState)([]),[a,i]=(0,q.useState)([]),[o,l]=(0,q.useState)([]),[c,u]=(0,q.useState)([]),[d,h]=(0,q.useState)(null),[f,p]=(0,q.useState)([]),[m,g]=(0,q.useState)([]),[y,b]=(0,q.useState)([]),[x,w]=(0,q.useState)(""),[v,k]=(0,q.useState)(!0),[j,_]=(0,q.useState)(!1),[N,E]=(0,q.useState)(""),[S,R]=(0,q.useState)([]),[T,C]=(0,q.useState)([]),[A,O]=(0,q.useState)({}),[P,I]=(0,q.useState)(!1),[$,D]=(0,q.useState)({title:"",content:""}),[z,L]=(0,q.useState)({email:"",password:"",fullName:""}),[M,U]=(0,q.useState)("Monthly Test"),[F,W]=(0,q.useState)({}),[V,K]=(0,q.useState)([]),[H,G]=(0,q.useState)(""),[J,Y]=(0,q.useState)([]),[X,Z]=(0,q.useState)({email:"",password:"",fullName:"",academicYear:"",schoolName:"",phoneNumber:"",institute:""}),[Q,ee]=(0,q.useState)({title:"",year:"",type:"Theory",class_day:"",class_time:"",institute_name:"",class_category:"Group",instructor:"Dilshan Uthpala"}),[et,er]=(0,q.useState)(null),[es,en]=(0,q.useState)({title:"",url:"",type:"video"});async function ea(){k(!0);try{let{data:e}=await rU.from("classes").select("*").order("year",{ascending:!1}),r=e||[];n(r);let{data:s}=await rU.from("notices").select("*").order("created_at",{ascending:!1});i(s||[]);let{data:a}=await rU.from("profiles").select("*").eq("role","admin");l(a||[]);let{data:o}=await rU.from("galleries").select("*").order("created_at",{ascending:!1});u(o||[]);let{data:c}=await rU.from("profiles").select("*").eq("role","student").order("full_name"),{data:d}=await rU.from("enrollments").select("student_id, class_id");if(c){let t=c.map(t=>({...t,enrolled_folders:d?.filter(e=>e.student_id===t.id).map(t=>(e||[]).find(e=>e.id===t.class_id)).filter(Boolean)||[]}));g(t)}"inquiries"===t&&await eo()}catch(e){console.error("Sync Error:",e.message)}k(!1)}(0,q.useEffect)(()=>{ea()},[t]),(0,q.useEffect)(()=>{d&&(ex(),eS(d.id),eE(d.id),eu(d.id))},[d]);let ei=m.filter(e=>e.full_name?.toLowerCase().includes(x.toLowerCase())||e.email?.toLowerCase().includes(x.toLowerCase())||e.phone_number?.includes(x));async function eo(){let{data:e}=await rU.from("private_questions").select("*").order("is_resolved",{ascending:!0}).order("created_at",{ascending:!1});C(e||[])}async function el(e){let t=A[e];if(!t)return alert("Type a reply first");let{error:r}=await rU.from("private_questions").update({admin_reply:t,is_resolved:!0,replied_at:new Date().toISOString()}).eq("id",e);r?alert("Reply failed: "+r.message):(alert("Reply Sent!"),O(t=>{let r={...t};return delete r[e],r}),eo())}async function ec(){let{data:{session:e}}=await rU.auth.getSession(),t=e?.user?.id;if(!e?.user){let{data:e}=await rU.auth.refreshSession();t=e.session?.user?.id}if(!t)return alert("Security session lost. Please log out and log back in.");if(!N||!d)return alert("Enter message text.");let{error:r}=await rU.from("class_messages").insert([{class_id:d.id,sender_id:t,sender_name:"Dilshan Uthpala",message_text:N}]);r?alert("Messaging Error: "+r.message):(E(""),eu(d.id))}async function eu(e){let{data:t}=await rU.from("class_messages").select("*").eq("class_id",e).order("created_at",{ascending:!1});R(t||[])}async function ed(){if(!z.email||!z.password||!z.fullName)return alert("Fill all fields");k(!0);let{data:e,error:t}=await rU.auth.signUp({email:z.email,password:z.password,options:{data:{full_name:z.fullName,role:"admin"}}});if(e.user){let{error:t}=await rU.from("profiles").upsert([{id:e.user.id,full_name:z.fullName,email:z.email,role:"admin"}]);t?alert("DB Error: "+t.message):(alert("Admin registered!"),L({email:"",password:"",fullName:""}),ea())}else t&&alert(t.message);k(!1)}async function eh(e){if(confirm("Permanently delete this student account?")){let{error:t}=await rU.from("profiles").delete().eq("id",e);t?alert("Delete failed: "+t.message):(alert("Student removed."),ea())}}async function ef(e){let{data:{user:t}}=await rU.auth.getUser();if(t?.email!=="lakruwanshashika21@gmail.com")return alert("Access Denied: Only the Super Admin can remove other Admins.");if(confirm("Revoke admin access?")){let{error:t}=await rU.from("profiles").delete().eq("id",e);t?alert("Deletion Error: "+t.message):ea()}}async function ep(){if(!X.email||!X.password)return alert("Required fields missing");k(!0);try{let{data:e,error:t}=await rU.auth.signUp({email:X.email,password:X.password,options:{data:{full_name:X.fullName,role:"student"}}});if(t)throw t;if(e.user){let{error:t}=await rU.from("profiles").insert([{id:e.user.id,full_name:X.fullName,email:X.email,academic_year:X.academicYear,phone_number:X.phoneNumber,role:"student"}]);if(t)throw t;I(!1),ea(),alert("Student enrolled successfully!")}}catch(e){alert("Error: "+e.message)}finally{k(!1)}}async function em(){if(!Q.title||!Q.year)return alert("Fill details");await rU.from("classes").insert([Q]),ee({title:"",year:"",type:"Theory",class_day:"",class_time:"",institute_name:"",class_category:"Group",instructor:"Dilshan Uthpala"}),ea()}async function eg(){await rU.from("classes").update(et).eq("id",et.id),er(null),ea()}async function ey(e){confirm("Delete class folder?")&&(await rU.from("classes").delete().eq("id",e),h(null),ea())}async function eb(e){confirm("Remove material?")&&(await rU.from("class_content").delete().eq("id",e),ex())}async function ex(){let{data:e}=await rU.from("class_content").select("*").eq("class_id",d.id);p(e||[])}async function ew(e,t){let{data:r}=await rU.from("enrollments").select("*").eq("student_id",e).eq("class_id",t).maybeSingle();r?await rU.from("enrollments").delete().eq("student_id",e).eq("class_id",t):await rU.from("enrollments").insert([{student_id:e,class_id:t}]),ea()}async function ev(e){let t=e.target.files?.[0];if(t&&d){_(!0);try{let e=t.name.replace(/[^a-z0-9.]/gi,"_").toLowerCase(),r=`${d.id}/${Date.now()}_${e}`,{error:s}=await rU.storage.from("class-materials").upload(r,t);if(s)throw s;let{data:n}=rU.storage.from("class-materials").getPublicUrl(r);en(e=>({...e,url:n.publicUrl,type:"note"}))}catch(e){alert("Upload failed")}finally{_(!1)}}}async function ek(){if(!es.title||!es.url)return alert("Fill details");await rU.from("class_content").insert([{...es,class_id:d.id}]),en({title:"",url:"",type:"video"}),ex()}async function ej(e,t,r){let{error:s}=await rU.from("profiles").update({[t]:!r}).eq("id",e);s?alert("Update failed: "+s.message):ea()}async function e_(){if(!$.title||!$.content)return alert("Fill all fields");await rU.from("notices").insert([$]),D({title:"",content:""}),ea()}async function eN(e){confirm("Remove notice?")&&(await rU.from("notices").delete().eq("id",e),ea())}async function eE(e){let{data:t}=await rU.from("exam_results").select("*").eq("class_id",e).order("created_at",{ascending:!1});K(t||[])}async function eS(e){let{data:t}=await rU.from("enrollments").select("student_id").eq("class_id",e),r=t?.map(e=>e.student_id)||[];if(r.length>0){let{data:e}=await rU.from("profiles").select("*").in("id",r);b(e||[])}else b([])}async function eR(e,t,r){let s=F[e];if(!s)return alert("Enter mark");await rU.from("exam_results").insert([{student_id:e,class_id:d.id,student_name:t,school_name:r||"N/A",marks:parseFloat(s),exam_name:M,is_public:!0}]),W(t=>({...t,[e]:""})),eE(d.id)}async function eT(e){await rU.from("exam_results").update({is_public:!1}).eq("id",e),eE(d.id)}async function eC(e){let t=e.target.files;if(t&&0!==t.length){_(!0);for(let e=0;e<t.length;e++){let r=t[e],s=r.name.replace(/[^a-z0-9.]/gi,"_").toLowerCase(),n=`images/${Date.now()}_${s}`,{error:a}=await rU.storage.from("gallery").upload(n,r);if(!a){let{data:e}=rU.storage.from("gallery").getPublicUrl(n);Y(t=>[...t,e.publicUrl])}}_(!1)}}async function eA(){if(!H||0===J.length)return alert("Fill details");await rU.from("galleries").insert([{name:H,image_urls:J}]),G(""),Y([]),ea()}async function eO(e,t){confirm("Delete gallery?")&&(await rU.from("galleries").delete().eq("id",e),ea())}return v?(0,B.jsx)("div",{className:"h-screen flex items-center justify-center font-bold text-slate-900 italic",children:"Syncing Admin Hub..."}):(0,B.jsxs)("div",{className:"flex h-screen bg-[#F8FAFC] text-foreground",children:[(0,B.jsxs)("aside",{className:"w-72 border-r bg-white p-6 flex flex-col shadow-sm",children:[(0,B.jsxs)("div",{className:"mb-8 px-2",children:[(0,B.jsx)("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter uppercase italic leading-none",children:"Logic Admin"}),(0,B.jsx)("p",{className:"text-[9px] font-bold text-teal-600 mt-2 tracking-widest uppercase",children:"   "})]}),(0,B.jsxs)("nav",{className:"space-y-1 flex-1",children:[(0,B.jsxs)(sZ,{variant:"classes"===t?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>{r("classes"),h(null)},children:[(0,B.jsx)(un,{size:18})," Course Folders"]}),(0,B.jsxs)(sZ,{variant:"students"===t?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>r("students"),children:[(0,B.jsx)(ut,{size:18})," Student Access"]}),(0,B.jsxs)(sZ,{variant:"inquiries"===t?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>r("inquiries"),children:[(0,B.jsx)(od,{size:18})," Student Inquiries"]}),(0,B.jsxs)(sZ,{variant:"notices"===t?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>r("notices"),children:[(0,B.jsx)(it,{size:18})," Notice Board"]}),(0,B.jsxs)(sZ,{variant:"gallery"===t?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>r("gallery"),children:[(0,B.jsx)(uf,{size:18})," Gallery Card"]}),(0,B.jsx)("div",{className:"h-px bg-zinc-100 my-4"}),(0,B.jsxs)(sZ,{variant:"staff"===t?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>r("staff"),children:[(0,B.jsx)(um,{size:18})," Staff Details"]})]}),(0,B.jsx)(sZ,{variant:"outline",className:"w-full rounded-xl border-2 font-black uppercase text-xs tracking-widest",onClick:()=>e("home"),children:"Exit Portal"})]}),(0,B.jsxs)("main",{className:"flex-1 p-10 overflow-auto",children:["students"===t&&(0,B.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,B.jsxs)("header",{className:"flex justify-between items-center",children:[(0,B.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter uppercase text-slate-800",children:"Student Access"}),(0,B.jsxs)(sZ,{className:"bg-blue-700 h-12 px-6 rounded-xl font-bold text-white shadow-lg",onClick:()=>I(!0),children:[(0,B.jsx)(ui,{className:"mr-2"})," Enroll Student"]})]}),(0,B.jsxs)(sQ,{className:"shadow-sm p-4 flex items-center gap-3 rounded-2xl border bg-white",children:[(0,B.jsx)(uo,{className:"text-slate-400 size-5"}),(0,B.jsx)(ig,{placeholder:"Search students...",className:"border-none shadow-none focus-visible:ring-0 text-lg",value:x,onChange:e=>w(e.target.value)})]}),(0,B.jsx)(sQ,{className:"shadow-md border-none rounded-3xl overflow-hidden bg-white",children:(0,B.jsxs)(i3,{children:[(0,B.jsx)(i9,{className:"bg-zinc-950",children:(0,B.jsxs)(oe,{children:[(0,B.jsx)(ot,{className:"text-white font-bold py-5 pl-8",children:"Student Detail"}),(0,B.jsx)(ot,{className:"text-white font-bold",children:"Contact Info"}),(0,B.jsx)(ot,{className:"text-white font-bold",children:"Access Folders"}),(0,B.jsx)(ot,{className:"text-white font-bold text-center",children:"Fee Status"}),(0,B.jsx)(ot,{className:"text-white text-right pr-8 font-bold",children:"Manage"})]})}),(0,B.jsx)(i7,{children:ei.map(e=>(0,B.jsxs)(oe,{className:e.is_suspended?"opacity-50 grayscale":"border-zinc-50",children:[(0,B.jsxs)(or,{className:"py-6 pl-8",children:[(0,B.jsx)("div",{className:"font-black uppercase text-sm text-slate-800",children:e.full_name}),(0,B.jsxs)("div",{className:"text-[10px] text-slate-400 font-bold italic lowercase",children:[e.academic_year||"---"," Exam Year"]})]}),(0,B.jsx)(or,{children:(0,B.jsxs)("div",{className:"flex flex-col",children:[(0,B.jsxs)("div",{className:"flex items-center gap-1.5 font-bold text-slate-600 text-xs",children:[(0,B.jsx)(ih,{size:12,className:"text-teal-600"})," ",e.phone_number||"N/A"]}),(0,B.jsx)("div",{className:"text-[10px] text-slate-400 font-medium lowercase",children:e.email})]})}),(0,B.jsx)(or,{children:(0,B.jsx)("div",{className:"flex gap-1 flex-wrap",children:e.enrolled_folders?.map((e,t)=>(0,B.jsxs)(s4,{className:"bg-blue-50 text-blue-700 border-none text-[9px] font-black uppercase",children:[e.year," ",e.title]},t))||(0,B.jsx)("span",{className:"text-xs text-slate-300 italic",children:"None"})})}),(0,B.jsx)(or,{className:"text-center",children:(0,B.jsx)(sZ,{variant:"ghost",size:"sm",onClick:()=>ej(e.id,"is_paid",e.is_paid),className:`rounded-full px-4 h-8 font-black text-[10px] tracking-widest ${e.is_paid?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:e.is_paid?"PAID":"PENDING"})}),(0,B.jsx)(or,{className:"text-right pr-8",children:(0,B.jsxs)(c3,{children:[(0,B.jsx)(c9,{asChild:!0,children:(0,B.jsx)(sZ,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,B.jsx)(ul,{size:18})})}),(0,B.jsxs)(c7,{align:"end",className:"w-56 p-2 rounded-2xl shadow-2xl",children:[s.map(t=>{let r=e.enrolled_folders?.some(e=>e.id===t.id);return(0,B.jsxs)(ue,{onClick:()=>ew(e.id,t.id),className:"flex justify-between items-center text-xs font-bold px-3",children:[(0,B.jsxs)("span",{children:[t.year," ",t.title]}),r&&(0,B.jsx)(c8,{size:14,className:"text-blue-600"})]},t.id)}),(0,B.jsx)("div",{className:"h-px bg-slate-100 my-2"}),(0,B.jsxs)(ue,{className:"gap-2 font-bold",onClick:()=>ej(e.id,"is_suspended",e.is_suspended),children:[(0,B.jsx)(uc,{size:16})," ",e.is_suspended?"Activate":"Suspend"]}),(0,B.jsxs)(ue,{className:"text-red-600 gap-2 font-bold",onClick:()=>eh(e.id),children:[(0,B.jsx)(ur,{size:16})," Delete Account"]})]})]})})]},e.id))})]})})]}),"staff"===t&&(0,B.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in duration-500",children:[(0,B.jsx)("header",{children:(0,B.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter text-slate-800 uppercase leading-none",children:"Administrators"})}),(0,B.jsxs)(sQ,{className:"p-8 rounded-[2.5rem] shadow-xl border-none bg-white",children:[(0,B.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-end",children:[(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Full Name"}),(0,B.jsx)(ig,{value:z.fullName,onChange:e=>L({...z,fullName:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Email"}),(0,B.jsx)(ig,{value:z.email,onChange:e=>L({...z,email:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Password"}),(0,B.jsx)(ig,{type:"password",value:z.password,onChange:e=>L({...z,password:e.target.value})})]})]}),(0,B.jsx)(sZ,{className:"w-full mt-6 py-6 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl",onClick:ed,children:"Register New Admin"})]}),(0,B.jsx)(sQ,{className:"rounded-[2.5rem] overflow-hidden border-none shadow-md bg-white",children:(0,B.jsxs)(i3,{children:[(0,B.jsx)(i9,{className:"bg-slate-900",children:(0,B.jsxs)(oe,{children:[(0,B.jsx)(ot,{className:"text-white py-6 pl-10 font-black uppercase text-[10px] tracking-widest",children:"Admin Name"}),(0,B.jsx)(ot,{className:"text-white text-right pr-10 font-black uppercase text-[10px] tracking-widest",children:"Actions"})]})}),(0,B.jsx)(i7,{children:o.map(e=>(0,B.jsxs)(oe,{className:"border-slate-50 hover:bg-slate-50",children:[(0,B.jsxs)(or,{className:"py-6 pl-10",children:[(0,B.jsx)("div",{className:"font-black uppercase text-sm italic",children:e.full_name}),(0,B.jsx)("div",{className:"text-[10px] font-bold text-slate-400",children:e.email})]}),(0,B.jsx)(or,{className:"text-right pr-10",children:(0,B.jsx)(sZ,{variant:"ghost",className:"text-rose-500 font-black text-[10px] uppercase",onClick:()=>ef(e.id),children:"Revoke"})})]},e.id))})]})})]}),"inquiries"===t&&(0,B.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in duration-500",children:[(0,B.jsx)("header",{children:(0,B.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter text-slate-800 uppercase leading-none",children:"Student Inquiries"})}),(0,B.jsxs)("div",{className:"grid gap-6",children:[T.map(e=>(0,B.jsxs)(sQ,{className:`p-6 rounded-[2rem] border-none shadow-xl bg-white ${!e.is_resolved?"ring-2 ring-teal-500":""}`,children:[(0,B.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("h3",{className:"font-black text-slate-800 uppercase text-lg",children:e.student_name}),(0,B.jsx)("p",{className:"text-[10px] font-bold text-slate-400",children:new Date(e.created_at).toLocaleString()})]}),e.is_resolved?(0,B.jsx)(s4,{className:"bg-teal-500 text-white",children:"Replied"}):(0,B.jsx)(s4,{className:"bg-rose-500 text-white animate-pulse",children:"Pending"})]}),(0,B.jsxs)("p",{className:"text-slate-600 font-medium mb-6 bg-slate-50 p-4 rounded-2xl border",children:["Q: ",e.question_text]}),e.is_resolved?(0,B.jsxs)("div",{className:"p-4 bg-teal-50 rounded-2xl border border-teal-100",children:[(0,B.jsx)("p",{className:"text-[10px] font-black text-teal-700 uppercase mb-1",children:"Reply:"}),(0,B.jsxs)("p",{className:"text-sm font-medium text-slate-700 italic",children:['"',e.admin_reply,'"']})]}):(0,B.jsxs)("div",{className:"flex gap-2",children:[(0,B.jsx)(ig,{placeholder:"Type your reply...",className:"h-12 rounded-xl",value:A[e.id]||"",onChange:t=>O({...A,[e.id]:t.target.value})}),(0,B.jsx)(sZ,{onClick:()=>el(e.id),className:"bg-teal-600 h-12 px-8 rounded-xl font-bold uppercase text-xs tracking-widest text-white",children:"Deliver Reply"})]})]},e.id)),0===T.length&&(0,B.jsx)("div",{className:"py-20 text-center text-slate-300 font-bold uppercase tracking-widest italic border-4 border-dashed rounded-[3rem]",children:"No student questions found."})]})]}),"classes"===t&&d&&(0,B.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,B.jsxs)(sZ,{variant:"ghost",onClick:()=>h(null),className:"gap-2 font-bold",children:[(0,B.jsx)(ua,{size:16})," Folders"]}),(0,B.jsxs)("div",{className:"flex justify-between items-center bg-white p-8 rounded-[2.5rem] border shadow-sm",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("h1",{className:"text-4xl font-black italic uppercase tracking-tighter text-slate-800",children:d.title}),(0,B.jsxs)("p",{className:"text-teal-600 font-bold uppercase text-[10px] tracking-widest",children:[d.institute_name,"  ",d.year]})]}),(0,B.jsxs)("div",{className:"flex gap-2",children:[(0,B.jsxs)(sZ,{variant:"outline",className:"rounded-xl font-bold",onClick:()=>er(d),children:[(0,B.jsx)(uh,{className:"mr-2 size-4"})," Edit"]}),(0,B.jsx)(sZ,{variant:"destructive",size:"icon",className:"rounded-xl",onClick:()=>ey(d.id),children:(0,B.jsx)(ur,{size:18})})]})]}),(0,B.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,B.jsxs)("div",{className:"space-y-8",children:[(0,B.jsxs)(sQ,{className:"p-6 rounded-[2.5rem] bg-white shadow-xl border-t-8 border-slate-900",children:[(0,B.jsxs)(s1,{className:"flex gap-2 items-center mb-4 italic uppercase text-lg text-slate-800",children:[(0,B.jsx)(ip,{size:20})," Message Enrolled Students"]}),(0,B.jsx)(og,{placeholder:"Post an update...",className:"mb-4 rounded-2xl bg-slate-50 border-none p-4 font-medium",value:N,onChange:e=>E(e.target.value)}),(0,B.jsxs)(sZ,{className:"w-full font-black uppercase text-xs tracking-widest bg-teal-600 text-white h-14 rounded-2xl shadow-lg",onClick:ec,children:[(0,B.jsx)(ou,{size:14,className:"mr-2"})," Post Message"]}),(0,B.jsx)("div",{className:"mt-8 space-y-3 max-h-64 overflow-y-auto pr-2 custom-scrollbar",children:S.map(e=>(0,B.jsxs)("div",{className:"p-4 bg-slate-50 rounded-2xl border",children:[(0,B.jsxs)("div",{className:"flex justify-between text-[9px] font-black text-slate-400 uppercase mb-1",children:[(0,B.jsx)("span",{children:e.sender_name}),(0,B.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()})]}),(0,B.jsx)("p",{className:"text-sm font-medium text-slate-700",children:e.message_text})]},e.id))})]}),(0,B.jsxs)(sQ,{className:"p-6 rounded-[2.5rem] bg-white shadow-md space-y-4",children:[(0,B.jsxs)(s1,{className:"flex gap-2 items-center italic uppercase text-lg text-slate-800",children:[(0,B.jsx)(ud,{size:20})," Upload Materials"]}),(0,B.jsx)(ig,{placeholder:"Title",className:"h-12 rounded-xl",value:es.title,onChange:e=>en({...es,title:e.target.value})}),"video"===es.type?(0,B.jsx)(ig,{placeholder:"Link",className:"h-12 rounded-xl",value:es.url,onChange:e=>en({...es,url:e.target.value})}):(0,B.jsxs)("div",{className:"border-2 border-dashed p-6 rounded-[1.5rem] text-center bg-slate-50 relative",children:[(0,B.jsx)("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",id:"file-up",onChange:ev}),(0,B.jsx)(om,{htmlFor:"file-up",className:"cursor-pointer font-black uppercase text-[10px] tracking-widest text-slate-400",children:j?"Wait...":es.url?"File Attached ":"Select PDF"})]}),(0,B.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,B.jsx)(sZ,{variant:"video"===es.type?"default":"outline",className:"flex-1 rounded-xl",onClick:()=>en(e=>({...e,type:"video",url:""})),children:"Video URL"}),(0,B.jsx)(sZ,{variant:"note"===es.type?"default":"outline",className:"flex-1 rounded-xl",onClick:()=>en(e=>({...e,type:"note",url:""})),children:"PDF Handout"})]}),(0,B.jsx)(sZ,{className:"w-full py-7 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl shadow-xl",onClick:ek,disabled:j,children:"Confirm Upload"})]})]}),(0,B.jsxs)("div",{className:"space-y-8",children:[(0,B.jsxs)(sQ,{className:"p-8 rounded-[2.5rem] bg-white shadow-md border-none",children:[(0,B.jsxs)(s1,{className:"mb-6 italic uppercase text-lg text-slate-800 flex justify-between",children:["Folder Content ",(0,B.jsx)(s4,{className:"bg-slate-100 text-slate-500 border-none font-bold",children:f.length})]}),(0,B.jsx)(i3,{children:(0,B.jsx)(i7,{children:f.map(e=>(0,B.jsxs)(oe,{className:"group border-slate-50 hover:bg-slate-50",children:[(0,B.jsx)(or,{className:"py-4 font-black uppercase text-xs tracking-tight text-slate-700",children:(0,B.jsxs)("div",{className:"flex items-center gap-3",children:[(0,B.jsx)("div",{className:`p-2 rounded-lg ${"video"===e.type?"bg-blue-50 text-blue-500":"bg-orange-50 text-orange-500"}`,children:"video"===e.type?(0,B.jsx)(us,{size:16}):(0,B.jsx)(on,{size:16})}),e.title]})}),(0,B.jsx)(or,{children:(0,B.jsx)("a",{href:e.url,target:"_blank",className:"p-2 bg-slate-100 rounded-lg inline-block hover:bg-teal-500 text-slate-700 transition-all",children:(0,B.jsx)(ug,{size:14})})}),(0,B.jsx)(or,{className:"text-right pr-0",children:(0,B.jsx)(sZ,{variant:"ghost",size:"icon",className:"text-rose-500 opacity-0 group-hover:opacity-100 transition-all",onClick:()=>eb(e.id),children:(0,B.jsx)(ur,{size:16})})})]},e.id))})})]}),(0,B.jsxs)(sQ,{className:"p-8 rounded-[2.5rem] bg-white shadow-xl",children:[(0,B.jsxs)(s1,{className:"flex items-center gap-2 italic uppercase text-lg text-slate-800 mb-6",children:[(0,B.jsx)(a8,{className:"text-yellow-500"})," Marks Console"]}),(0,B.jsxs)("div",{className:"mb-6 p-4 bg-slate-50 rounded-2xl border border-dashed border-teal-500/30",children:[(0,B.jsx)(om,{className:"text-[9px] font-black uppercase text-teal-600 tracking-widest ml-1",children:"Current Exam"}),(0,B.jsx)(ig,{placeholder:"Unit Test #01",value:M,onChange:e=>U(e.target.value),className:"mt-1 font-black uppercase h-12 bg-white border-none shadow-sm"})]}),(0,B.jsxs)(i3,{children:[(0,B.jsx)(i9,{children:(0,B.jsxs)(oe,{className:"hover:bg-transparent",children:[(0,B.jsx)(ot,{className:"font-black uppercase text-[10px]",children:"Student"}),(0,B.jsx)(ot,{className:"font-black uppercase text-[10px]",children:"Score %"}),(0,B.jsx)(ot,{className:"text-right font-black uppercase text-[10px]",children:"Action"})]})}),(0,B.jsx)(i7,{children:y.map(e=>{let t=V.find(t=>t.student_id===e.id);return(0,B.jsxs)(oe,{className:"border-slate-50",children:[(0,B.jsx)(or,{className:"font-bold text-xs uppercase text-slate-700",children:e.full_name}),(0,B.jsx)(or,{children:(0,B.jsx)(ig,{type:"number",className:"w-16 h-10 font-black text-teal-600 bg-slate-50 border-none shadow-inner",placeholder:"0",value:F[e.id]||"",onChange:t=>W({...F,[e.id]:t.target.value})})}),(0,B.jsxs)(or,{className:"text-right flex gap-1 justify-end pt-5",children:[(0,B.jsx)(sZ,{size:"sm",variant:"outline",className:"h-10 px-4 rounded-xl font-bold uppercase text-[10px] border-2",onClick:()=>eR(e.id,e.full_name,e.school_name),children:"Add"}),t&&t.is_public&&(0,B.jsx)(sZ,{size:"sm",variant:"ghost",className:"h-10 w-10 p-0",onClick:()=>eT(t.id),children:(0,B.jsx)(up,{size:14,className:"text-rose-500"})})]})]},e.id)})})]})]})]})]})]}),"classes"===t&&!d&&(0,B.jsxs)("div",{className:"space-y-6",children:[(0,B.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter text-slate-800 uppercase leading-none",children:"Course Management"}),(0,B.jsx)(sQ,{className:"p-8 border-dashed border-2 bg-white/50 rounded-[2.5rem]",children:(0,B.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Year"}),(0,B.jsx)(ig,{placeholder:"2026",value:Q.year,onChange:e=>ee({...Q,year:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Course Name"}),(0,B.jsx)(ig,{placeholder:"Logic",value:Q.title,onChange:e=>ee({...Q,title:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Institute"}),(0,B.jsx)(ig,{placeholder:"Sakya",value:Q.institute_name,onChange:e=>ee({...Q,institute_name:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Type"}),(0,B.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:Q.type,onChange:e=>ee({...Q,type:e.target.value}),children:[(0,B.jsx)("option",{value:"Theory",children:"Theory"}),(0,B.jsx)("option",{value:"Revision",children:"Revision"})]})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Category"}),(0,B.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:Q.class_category,onChange:e=>ee({...Q,class_category:e.target.value}),children:[(0,B.jsx)("option",{value:"Group",children:"Group Class"}),(0,B.jsx)("option",{value:"Hall",children:"Hall Class"})]})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Day"}),(0,B.jsx)(ig,{placeholder:"Sunday",value:Q.class_day,onChange:e=>ee({...Q,class_day:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Time"}),(0,B.jsx)(ig,{placeholder:"8:30 AM",value:Q.class_time,onChange:e=>ee({...Q,class_time:e.target.value})})]}),(0,B.jsx)(sZ,{onClick:em,className:"w-full mt-auto py-6 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl shadow-xl",children:"Create New Folder"})]})}),(0,B.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 pt-10",children:s.map(e=>(0,B.jsx)(sQ,{className:"hover:border-teal-500 cursor-pointer transition-all shadow-xl group relative rounded-[2.5rem] overflow-hidden bg-white border border-slate-100",onClick:()=>h(e),children:(0,B.jsxs)(s0,{className:"p-8",children:[(0,B.jsxs)(s4,{variant:"secondary",className:"w-fit mb-3 font-bold",children:[e.year," ",e.type]}),(0,B.jsx)(s1,{className:"text-2xl font-black italic uppercase tracking-tighter text-slate-800 leading-tight",children:e.title}),(0,B.jsxs)("div",{className:"mt-4 space-y-1 text-slate-500",children:[(0,B.jsxs)("p",{className:"flex items-center gap-2 text-sm font-bold",children:[(0,B.jsx)(uu,{size:14,className:"text-teal-600"})," ",e.institute_name]}),(0,B.jsxs)("p",{className:"flex items-center gap-2 text-xs font-medium",children:[(0,B.jsx)(ir,{size:14})," ",e.class_day," @ ",e.class_time]})]})]})},e.id))})]}),"gallery"===t&&(0,B.jsxs)("div",{className:"max-w-6xl mx-auto space-y-10",children:[(0,B.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter uppercase text-slate-800",children:"Visual Archive"}),(0,B.jsx)(sQ,{className:"p-8 border-dashed border-2 rounded-[2rem] bg-white",children:(0,B.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,B.jsxs)("div",{className:"space-y-4",children:[(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Album Name"}),(0,B.jsx)(ig,{value:H,onChange:e=>G(e.target.value)})]}),(0,B.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-8 text-center bg-zinc-50 relative",children:[(0,B.jsx)("input",{type:"file",multiple:!0,className:"absolute inset-0 opacity-0 cursor-pointer",onChange:eC}),(0,B.jsx)(uf,{className:"mx-auto size-10 text-zinc-400 mb-2"}),(0,B.jsx)("p",{className:"font-bold text-slate-400 uppercase text-xs tracking-widest",children:j?"Uploading...":"Click to Add Images"})]}),(0,B.jsx)(sZ,{className:"w-full py-6 bg-slate-900 text-white rounded-2xl shadow-xl font-bold uppercase tracking-widest",onClick:eA,children:"Save to Gallery"})]}),(0,B.jsx)("div",{className:"grid grid-cols-4 gap-2 h-fit",children:J.map((e,t)=>(0,B.jsx)("img",{src:e,className:"size-20 object-cover rounded-xl border shadow-sm"},t))})]})}),(0,B.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-10",children:c.map(e=>(0,B.jsxs)(sQ,{className:"relative group overflow-hidden rounded-[2.5rem] shadow-xl border-none",children:[(0,B.jsx)("img",{src:e.image_urls[0],className:"h-56 w-full object-cover transition-transform group-hover:scale-110 duration-700"}),(0,B.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-8",children:(0,B.jsx)("h3",{className:"text-white font-black uppercase italic text-xl",children:e.name})}),(0,B.jsx)(sZ,{variant:"destructive",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all rounded-full shadow-lg",onClick:()=>eO(e.id,e.image_urls),children:(0,B.jsx)(ur,{size:16})})]},e.id))})]}),"notices"===t&&(0,B.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in duration-500",children:[(0,B.jsx)("header",{children:(0,B.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter uppercase text-slate-800",children:"Public Announcements"})}),(0,B.jsx)(sQ,{className:"p-8 rounded-[2.5rem] shadow-xl border-none bg-white",children:(0,B.jsxs)("div",{className:"space-y-4",children:[(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Notice Subject"}),(0,B.jsx)(ig,{value:$.title,onChange:e=>D({...$,title:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Content"}),(0,B.jsx)(og,{rows:4,value:$.content,onChange:e=>D({...$,content:e.target.value})})]}),(0,B.jsx)(sZ,{className:"w-full py-6 font-black bg-slate-900 text-white rounded-2xl shadow-lg",onClick:e_,children:"Deploy to Portal"})]})}),(0,B.jsx)("div",{className:"grid gap-4",children:a.map(e=>(0,B.jsxs)(sQ,{className:"p-6 rounded-3xl flex justify-between items-center shadow-sm border-none bg-white",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("h3",{className:"font-black uppercase italic tracking-tight",children:e.title}),(0,B.jsx)("p",{className:"text-[10px] text-zinc-400 font-bold mb-2",children:new Date(e.created_at).toLocaleString()}),(0,B.jsx)("p",{className:"text-sm text-zinc-500 max-w-xl leading-relaxed",children:e.content})]}),(0,B.jsx)(sZ,{variant:"ghost",size:"icon",className:"text-rose-500 rounded-full hover:bg-rose-50",onClick:()=>eN(e.id),children:(0,B.jsx)(ur,{size:18})})]},e.id))})]}),(0,B.jsx)(aX,{open:P,onOpenChange:I,children:(0,B.jsxs)(a0,{className:"rounded-[2.5rem] max-w-lg p-12 border-none shadow-2xl bg-white",children:[(0,B.jsxs)(a1,{className:"mb-6",children:[(0,B.jsx)(a2,{className:"text-3xl font-black italic tracking-tighter uppercase text-slate-800",children:"Enroll Student"}),(0,B.jsx)(a5,{className:"font-bold text-slate-400 uppercase text-[10px] tracking-widest",children:"Initialize a new logic portal account."})]}),(0,B.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,B.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,B.jsx)(om,{children:"Full Name"}),(0,B.jsx)(ig,{value:X.fullName,onChange:e=>Z({...X,fullName:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Email Address"}),(0,B.jsx)(ig,{value:X.email,onChange:e=>Z({...X,email:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Password"}),(0,B.jsx)(ig,{type:"password",value:X.password,onChange:e=>Z({...X,password:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Exam Year"}),(0,B.jsx)(ig,{placeholder:"e.g. 2026",value:X.academicYear,onChange:e=>Z({...X,academicYear:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{children:"Phone Number"}),(0,B.jsx)(ig,{value:X.phoneNumber,onChange:e=>Z({...X,phoneNumber:e.target.value})})]}),(0,B.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,B.jsx)(om,{children:"School Name"}),(0,B.jsx)(ig,{value:X.schoolName,onChange:e=>Z({...X,schoolName:e.target.value})})]})]}),(0,B.jsx)(sZ,{className:"w-full py-7 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl mt-6 shadow-xl",onClick:ep,children:"Create & Authenticate"})]})}),et&&(0,B.jsx)(aX,{open:!!et,onOpenChange:()=>er(null),children:(0,B.jsxs)(a0,{className:"rounded-3xl max-w-lg p-12 shadow-2xl border-none bg-white",children:[(0,B.jsx)(a1,{children:(0,B.jsx)(a2,{className:"text-2xl font-black italic uppercase text-slate-800",children:"Modify Folder"})}),(0,B.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4",children:[(0,B.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Title"}),(0,B.jsx)(ig,{value:et.title||"",onChange:e=>er({...et,title:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Year"}),(0,B.jsx)(ig,{value:et.year||"",onChange:e=>er({...et,year:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Institute"}),(0,B.jsx)(ig,{value:et.institute_name||"",onChange:e=>er({...et,institute_name:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Day"}),(0,B.jsx)(ig,{value:et.class_day||"",onChange:e=>er({...et,class_day:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Time"}),(0,B.jsx)(ig,{value:et.class_time||"",onChange:e=>er({...et,class_time:e.target.value})})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Type"}),(0,B.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:et.type||"",onChange:e=>er({...et,type:e.target.value}),children:[(0,B.jsx)("option",{value:"Theory",children:"Theory"}),(0,B.jsx)("option",{value:"Revision",children:"Revision"})]})]}),(0,B.jsxs)("div",{className:"space-y-1",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Category"}),(0,B.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:et.class_category||"",onChange:e=>er({...et,class_category:e.target.value}),children:[(0,B.jsx)("option",{value:"Group",children:"Group Class"}),(0,B.jsx)("option",{value:"Hall",children:"Hall Class"})]})]})]}),(0,B.jsx)(sZ,{onClick:eg,className:"w-full py-7 font-black bg-slate-900 text-white rounded-2xl uppercase text-[10px] tracking-widest",children:"Commit Changes"})]})})]})]})}let ub=aJ("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ux=aJ("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function uw({onNavigate:e}){let[t,r]=(0,q.useState)(""),[s,n]=(0,q.useState)(""),[a,i]=(0,q.useState)(!1),[o,l]=(0,q.useState)(!1),[c,u]=(0,q.useState)(null),d=async r=>{r.preventDefault(),i(!0),u(null);let n=t.trim().toLowerCase();try{let{data:t,error:r}=await rU.auth.signInWithPassword({email:n,password:s});if(r)throw r;if("lakruwanshashika21@gmail.com"===n)return void e("admin");let{data:a,error:i}=await rU.from("profiles").select("role").eq("id",t.user.id).single();if(i||a?.role!=="admin")throw await rU.auth.signOut(),Error("Access denied. Authorized personnel only.");e("admin")}catch(e){e.message?.includes("500")||"PGRST301"===e.code?u("Server Sync Error. If you are the Super Admin, please refresh and try once more."):u(e.message)}finally{i(!1)}},h=async()=>{if(!t)return void alert("Please enter your admin email first.");l(!0);try{let{error:e}=await rU.auth.resetPasswordForEmail(t.trim(),{redirectTo:`${window.location.origin}/#type=recovery`});if(e)throw e;alert("Admin recovery link sent to your inbox.")}catch(e){alert(e.message)}finally{l(!1)}};return(0,B.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-[#F8FAFC] p-6 relative",children:[(0,B.jsxs)(sZ,{variant:"ghost",className:"absolute top-8 left-8 gap-2 font-bold text-zinc-500 hover:text-slate-900 transition-colors",onClick:()=>e("home"),children:[(0,B.jsx)(ua,{size:18})," Exit Portal"]}),(0,B.jsxs)(sQ,{className:"w-full max-w-md rounded-[2.5rem] shadow-2xl border-none bg-white overflow-hidden",children:[(0,B.jsx)("div",{className:"h-3 bg-slate-900 w-full"}),(0,B.jsxs)(s0,{className:"pt-10 pb-6 text-center",children:[(0,B.jsx)("div",{className:"size-20 bg-slate-900/5 rounded-[1.5rem] flex items-center justify-center mx-auto mb-6",children:(0,B.jsx)(um,{className:"text-slate-900 size-12"})}),(0,B.jsx)(s1,{className:"text-4xl font-black italic uppercase tracking-tighter text-slate-800",children:"Admin Login"}),(0,B.jsx)(s2,{className:"font-bold text-zinc-400 uppercase text-[10px] tracking-widest mt-2",children:"Secure Infrastructure Access"})]}),(0,B.jsxs)(s5,{className:"px-10 pb-12",children:[(0,B.jsxs)("form",{onSubmit:d,className:"space-y-5",children:[(0,B.jsxs)("div",{className:"space-y-2",children:[(0,B.jsx)(om,{className:"text-[11px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"Admin Email"}),(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsx)(id,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,B.jsx)(ig,{type:"email",placeholder:"admin@logic.com",className:"pl-12 h-14 rounded-2xl bg-zinc-50 border-none focus-visible:ring-2 ring-slate-900 transition-all text-base",value:t,onChange:e=>r(e.target.value),required:!0})]})]}),(0,B.jsxs)("div",{className:"space-y-2",children:[(0,B.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,B.jsx)(om,{className:"text-[11px] font-black uppercase tracking-widest text-zinc-400",children:"Password"}),(0,B.jsx)("button",{type:"button",onClick:h,className:"text-[10px] font-black text-slate-900 hover:underline uppercase tracking-tighter transition-all",disabled:o,children:o?"Sending...":"Recover Key?"})]}),(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsx)(ol,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,B.jsx)(ig,{type:"password",placeholder:"",className:"pl-12 h-14 rounded-2xl bg-zinc-50 border-none focus-visible:ring-2 ring-slate-900 transition-all text-base",value:s,onChange:e=>n(e.target.value),required:!0})]})]}),c&&(0,B.jsxs)("div",{className:"bg-rose-50 border border-rose-100 text-rose-600 p-4 rounded-2xl flex items-start gap-3 animate-in fade-in zoom-in duration-300",children:[(0,B.jsx)(ux,{className:"size-5 mt-0.5 shrink-0"}),(0,B.jsx)("p",{className:"text-xs font-bold leading-relaxed",children:c})]}),(0,B.jsx)(sZ,{type:"submit",className:"w-full h-16 rounded-2xl bg-slate-900 text-white font-black text-xl shadow-xl shadow-slate-200 mt-4 active:scale-95 transition-all",disabled:a,children:a?(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)(ub,{className:"animate-spin size-5"}),(0,B.jsx)("span",{children:"Verifying..."})]}):"Verify & Enter"})]}),(0,B.jsx)("div",{className:"mt-8 text-center",children:(0,B.jsx)("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-[0.3em]",children:"Authorized Personnel Only"})})]})]})]})}function uv({onNavigate:e}){let[t,r]=(0,q.useState)(""),[s,n]=(0,q.useState)(""),[a,i]=(0,q.useState)(!1),[o,l]=(0,q.useState)(!1);async function c(r){r.preventDefault(),i(!0);try{let{data:r,error:n}=await rU.auth.signInWithPassword({email:t.trim(),password:s});if(n)throw n;let{data:a,error:i}=await rU.from("profiles").select("role").eq("id",r.user.id).single();if(i||a?.role!=="student"){await rU.auth.signOut(),alert("Access Denied: This portal is reserved for registered students only.");return}e("student-dashboard")}catch(e){alert("Login Error: "+e.message)}finally{i(!1)}}async function u(){if(!t)return void alert("Please enter your email address first so we can send a reset link.");l(!0);try{let{error:e}=await rU.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/#type=recovery`});if(e)throw e;alert("Verification email sent! Please check your inbox to reset your password.")}catch(e){alert("Error: "+e.message)}finally{l(!1)}}return(0,B.jsxs)("div",{className:"min-h-screen bg-[#F8FAFC] dark:bg-zinc-950 flex flex-col items-center justify-center p-6 relative",children:[(0,B.jsxs)(sZ,{variant:"ghost",className:"absolute top-8 left-8 gap-2 font-bold text-zinc-500 hover:text-primary transition-colors",onClick:()=>e("home"),children:[(0,B.jsx)(ua,{size:18})," Back to Homepage"]}),(0,B.jsxs)(sQ,{className:"w-full max-w-md border-none shadow-2xl rounded-[2.5rem] overflow-hidden bg-white dark:bg-zinc-900",children:[(0,B.jsx)("div",{className:"h-3 bg-primary w-full"}),(0,B.jsxs)(s0,{className:"pt-10 pb-6 text-center",children:[(0,B.jsx)("div",{className:"size-20 bg-primary/10 rounded-[1.5rem] flex items-center justify-center mx-auto mb-6",children:(0,B.jsx)(oa,{className:"size-12 text-primary"})}),(0,B.jsx)(s1,{className:"text-4xl font-black tracking-tighter uppercase italic text-zinc-900 dark:text-white",children:"Student Login"}),(0,B.jsx)(s2,{className:"text-zinc-500 font-medium text-lg mt-2",children:"Access your recordings and materials."})]}),(0,B.jsxs)(s5,{className:"space-y-6 pb-12 px-10",children:[(0,B.jsxs)("form",{onSubmit:c,className:"space-y-5",children:[(0,B.jsxs)("div",{className:"space-y-2",children:[(0,B.jsx)(om,{className:"text-[11px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"Registered Email"}),(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsx)(id,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,B.jsx)(ig,{type:"email",placeholder:"student@example.com",className:"pl-12 h-14 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border-none focus-visible:ring-2 ring-primary transition-all text-base",value:t,onChange:e=>r(e.target.value),required:!0})]})]}),(0,B.jsxs)("div",{className:"space-y-2",children:[(0,B.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,B.jsx)(om,{className:"text-[11px] font-black uppercase tracking-widest text-zinc-400",children:"Password"}),(0,B.jsx)("button",{type:"button",onClick:u,className:"text-[10px] font-black text-primary hover:underline uppercase tracking-tighter transition-all",disabled:o,children:o?"Processing...":"Forgot Key?"})]}),(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsx)(ol,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,B.jsx)(ig,{type:"password",placeholder:"",className:"pl-12 h-14 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border-none focus-visible:ring-2 ring-primary transition-all text-base",value:s,onChange:e=>n(e.target.value),required:!0})]})]}),(0,B.jsx)(sZ,{type:"submit",className:"w-full h-15 rounded-2xl font-black text-xl shadow-xl shadow-primary/20 mt-6 active:scale-95 transition-transform",disabled:a,children:a?(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)(ub,{className:"animate-spin size-5"}),(0,B.jsx)("span",{children:"Verifying..."})]}):"Enter Dashboard"})]}),(0,B.jsx)("div",{className:"text-center pt-4 border-t border-zinc-100 dark:border-zinc-800",children:(0,B.jsxs)("p",{className:"text-xs text-zinc-400 font-medium",children:["Don't have an account yet? ",(0,B.jsx)("br",{}),(0,B.jsx)("span",{className:"text-primary font-bold",children:"Contact the Administrator to get registered."})]})})]})]}),(0,B.jsxs)("div",{className:"mt-12 flex flex-col items-center gap-2",children:[(0,B.jsx)("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-[0.3em]",children:"Secure Access Protocol v2.5"}),(0,B.jsx)("p",{className:"text-[9px] text-zinc-300 uppercase font-bold",children:" 2025 Education Platform Design"})]})]})}let uk=aJ("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),uj=aJ("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function u_({onNavigate:e}){let[t,r]=(0,q.useState)(""),[s,n]=(0,q.useState)(""),[a,i]=(0,q.useState)(!1),[o,l]=(0,q.useState)(!1),[c,u]=(0,q.useState)(!0),[d,h]=(0,q.useState)(!1);async function f(r){if(r.preventDefault(),t.length<6)return alert("Security requirement: Password must be at least 6 characters.");if(t!==s)return alert("Validation failed: Passwords do not match!");i(!0);try{let{error:r}=await rU.auth.updateUser({password:t});if(r)throw r;l(!0),setTimeout(()=>e("home"),3e3)}catch(e){alert("System Error: "+e.message+" (Please try requesting a new link from the login page)")}finally{i(!1)}}return((0,q.useEffect)(()=>{let e=!0;!async function(){await new Promise(e=>setTimeout(e,1e3));let{data:{session:t}}=await rU.auth.getSession();if(e){let e=window.location.hash.includes("type=recovery");t||e?h(!0):h(!1),u(!1)}}();let{data:{subscription:t}}=rU.auth.onAuthStateChange(e=>{"PASSWORD_RECOVERY"===e&&(h(!0),u(!1))});return()=>{e=!1,t.unsubscribe()}},[]),c)?(0,B.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 p-6",children:(0,B.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,B.jsx)(ub,{className:"animate-spin size-12 text-primary opacity-20"}),(0,B.jsx)("p",{className:"font-black uppercase tracking-[0.2em] text-[10px] text-zinc-400 italic animate-pulse",children:"Authenticating Security Token..."})]})}):d||o?o?(0,B.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 p-6",children:(0,B.jsxs)(sQ,{className:"max-w-md w-full text-center p-12 rounded-[3rem] shadow-2xl border-none",children:[(0,B.jsx)("div",{className:"size-24 bg-emerald-50 rounded-[2rem] flex items-center justify-center mx-auto mb-8",children:(0,B.jsx)(uk,{className:"size-14 text-emerald-500"})}),(0,B.jsx)(s1,{className:"text-4xl font-black uppercase italic tracking-tighter",children:"Access Restored"}),(0,B.jsxs)("p",{className:"text-zinc-500 font-bold mt-4 leading-relaxed uppercase text-[10px] tracking-widest",children:["Your credentials have been updated. ",(0,B.jsx)("br",{})," Initializing portal redirection..."]})]})}):(0,B.jsx)("div",{className:"min-h-screen bg-zinc-50 flex items-center justify-center p-6",children:(0,B.jsxs)(sQ,{className:"w-full max-w-md rounded-[3rem] shadow-2xl border-none bg-white overflow-hidden",children:[(0,B.jsx)("div",{className:"h-4 bg-primary w-full"}),(0,B.jsxs)(s0,{className:"pt-14 px-12 text-center",children:[(0,B.jsx)("div",{className:"size-20 bg-zinc-50 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-inner",children:(0,B.jsx)(ol,{className:"text-primary size-10"})}),(0,B.jsx)(s1,{className:"text-4xl font-black tracking-tighter uppercase italic text-zinc-900 leading-none",children:"Secure Portal"}),(0,B.jsx)(s2,{className:"text-zinc-400 font-bold uppercase text-[9px] tracking-[0.3em] mt-4 italic",children:"Define your new access key"})]}),(0,B.jsx)(s5,{className:"px-12 pb-16",children:(0,B.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,B.jsxs)("div",{className:"space-y-2",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"New Password"}),(0,B.jsx)(ig,{type:"password",placeholder:"",value:t,onChange:e=>r(e.target.value),className:"h-16 rounded-[1.25rem] bg-zinc-50 border-none px-6 focus-visible:ring-2 ring-primary transition-all text-lg",required:!0,minLength:6})]}),(0,B.jsxs)("div",{className:"space-y-2",children:[(0,B.jsx)(om,{className:"text-[10px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"Verify Password"}),(0,B.jsx)(ig,{type:"password",placeholder:"",value:s,onChange:e=>n(e.target.value),className:"h-16 rounded-[1.25rem] bg-zinc-50 border-none px-6 focus-visible:ring-2 ring-primary transition-all text-lg",required:!0})]}),(0,B.jsx)(sZ,{type:"submit",className:"w-full h-16 rounded-[1.25rem] font-black text-xl shadow-xl shadow-primary/20 mt-6 active:scale-[0.98] transition-all bg-primary text-white",disabled:a,children:a?(0,B.jsxs)("div",{className:"flex items-center gap-3",children:[(0,B.jsx)(ub,{className:"animate-spin size-6"}),(0,B.jsx)("span",{className:"uppercase text-xs tracking-widest",children:"Applying..."})]}):"Update Access"})]})})]})}):(0,B.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 p-6",children:(0,B.jsxs)(sQ,{className:"max-w-md w-full text-center p-12 rounded-[3rem] shadow-2xl border-none",children:[(0,B.jsx)(uj,{className:"size-20 text-rose-500 mx-auto mb-6 opacity-80"}),(0,B.jsx)(s1,{className:"text-3xl font-black uppercase tracking-tight italic",children:"Link Expired"}),(0,B.jsx)(s2,{className:"mt-4 font-medium text-zinc-500 leading-relaxed",children:"The security token has either been used or timed out. For your security, reset links are single-use."}),(0,B.jsx)(sZ,{className:"mt-10 w-full rounded-2xl h-16 font-black uppercase tracking-widest text-xs shadow-lg",onClick:()=>e("student"),children:"Request New Link"})]})})}function uN(){let[e,t]=(0,q.useState)("home");(0,q.useEffect)(()=>{window.location.hash.includes("type=recovery")&&t("reset-password");let{data:{subscription:e}}=rU.auth.onAuthStateChange(async(e,r)=>{"PASSWORD_RECOVERY"===e&&t("reset-password")});return()=>{e.unsubscribe()}},[]);let r=e=>{t(e),window.scrollTo(0,0)};return(0,B.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:["home"===e&&(0,B.jsx)(im,{onNavigate:r}),"student"===e&&(0,B.jsx)(uv,{onNavigate:r}),"reset-password"===e&&(0,B.jsx)(u_,{onNavigate:r}),"admin-login"===e&&(0,B.jsx)(uw,{onNavigate:r}),"student-dashboard"===e&&(0,B.jsx)(oh,{onNavigate:r}),"admin"===e&&(0,B.jsx)(uy,{onNavigate:r})]})}e.s(["default",()=>uN],80653)}]);