module.exports=[92657,a=>{"use strict";let b,c,d,e,f,g,h,i,j,k;var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P=a.i(23716),Q=a.i(71360);class R extends Error{constructor(a,b="FunctionsError",c){super(a),this.name=b,this.context=c}}class S extends R{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class T extends R{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class U extends R{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}(l=C||(C={})).Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2";var V=function(){return(V=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function W(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}"function"==typeof SuppressedError&&SuppressedError;class X{constructor(a,{headers:b={},customFetch:c,region:d=C.Any}={}){this.url=a,this.headers=b,this.region=d,this.fetch=(a=>a?(...b)=>a(...b):(...a)=>fetch(...a))(c)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){var b,c,d,e;return b=this,c=arguments,d=void 0,e=function*(a,b={}){var c;let d,e;try{let f,{headers:g,method:h,body:i,signal:j,timeout:k}=b,l={},{region:m}=b;m||(m=this.region);let n=new URL(`${this.url}/${a}`);m&&"any"!==m&&(l["x-region"]=m,n.searchParams.set("forceFunctionRegion",m)),i&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?"undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):"string"==typeof i?(l["Content-Type"]="text/plain",f=i):"undefined"!=typeof FormData&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)):f=i;let o=j;k&&(e=new AbortController,d=setTimeout(()=>e.abort(),k),j?(o=e.signal,j.addEventListener("abort",()=>e.abort())):o=e.signal);let p=yield this.fetch(n.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),g),body:f,signal:o}).catch(a=>{throw new S(a)}),q=p.headers.get("x-relay-error");if(q&&"true"===q)throw new T(p);if(!p.ok)throw new U(p);let r=(null!=(c=p.headers.get("Content-Type"))?c:"text/plain").split(";")[0].trim();return{data:"application/json"===r?yield p.json():"application/octet-stream"===r||"application/pdf"===r?yield p.blob():"text/event-stream"===r?p:"multipart/form-data"===r?yield p.formData():yield p.text(),error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof U||a instanceof T?a.context:void 0}}finally{d&&clearTimeout(d)}},new(d||(d=Promise))(function(a,f){function g(a){try{i(e.next(a))}catch(a){f(a)}}function h(a){try{i(e.throw(a))}catch(a){f(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof d?c:new d(function(a){a(c)})).then(g,h)}i((e=e.apply(b,c||[])).next())})}}var Y=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},Z=class{constructor(a){var b,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=null!=(b=a.shouldThrowOnError)&&b,this.signal=a.signal,this.isMaybeSingle=null!=(c=a.isMaybeSingle)&&c,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,b){return this.headers=new Headers(this.headers),this.headers.set(a,b),this}then(a,b){var c=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let d=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var b,d,e,f;let g=null,h=null,i=null,j=a.status,k=a.statusText;if(a.ok){if("HEAD"!==c.method){let b=await a.text();""===b||(h="text/csv"===c.headers.get("Accept")||c.headers.get("Accept")&&(null==(e=c.headers.get("Accept"))?void 0:e.includes("application/vnd.pgrst.plan+text"))?b:JSON.parse(b))}let f=null==(b=c.headers.get("Prefer"))?void 0:b.match(/count=(exact|planned|estimated)/),l=null==(d=a.headers.get("content-range"))?void 0:d.split("/");f&&l&&l.length>1&&(i=parseInt(l[1])),c.isMaybeSingle&&"GET"===c.method&&Array.isArray(h)&&(h.length>1?(g={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,i=null,j=406,k="Not Acceptable"):h=1===h.length?h[0]:null)}else{let b=await a.text();try{g=JSON.parse(b),Array.isArray(g)&&404===a.status&&(h=[],g=null,j=200,k="OK")}catch(c){404===a.status&&""===b?(j=204,k="No Content"):g={message:b}}if(g&&c.isMaybeSingle&&(null==g||null==(f=g.details)?void 0:f.includes("0 rows"))&&(g=null,j=200,k="OK"),g&&c.shouldThrowOnError)throw new Y(g)}return{error:g,data:h,count:i,status:j,statusText:k}});return this.shouldThrowOnError||(d=d.catch(a=>{var b,c,d,e,f,g;let h="",i=null==a?void 0:a.cause;if(i){let b=null!=(c=null==i?void 0:i.message)?c:"",g=null!=(d=null==i?void 0:i.code)?d:"";h=`${null!=(e=null==a?void 0:a.name)?e:"FetchError"}: ${null==a?void 0:a.message}

Caused by: ${null!=(f=null==i?void 0:i.name)?f:"Error"}: ${b}`,g&&(h+=` (${g})`),(null==i?void 0:i.stack)&&(h+=`
${i.stack}`)}else h=null!=(g=null==a?void 0:a.stack)?g:"";return{error:{message:`${null!=(b=null==a?void 0:a.name)?b:"FetchError"}: ${null==a?void 0:a.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,b)}returns(){return this}overrideTypes(){return this}},$=class extends Z{select(a){let b=!1,c=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!b?"":('"'===a&&(b=!b),a)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:b=!0,nullsFirst:c,foreignTable:d,referencedTable:e=d}={}){let f=e?`${e}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${b?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:b,referencedTable:c=b}={}){let d=void 0===c?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,b,{foreignTable:c,referencedTable:d=c}={}){let e=void 0===d?"offset":`${d}.offset`,f=void 0===d?"limit":`${d}.limit`;return this.url.searchParams.set(e,`${a}`),this.url.searchParams.set(f,`${b-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:b=!1,settings:c=!1,buffers:d=!1,wal:e=!1,format:f="text"}={}){var g;let h=[a?"analyze":null,b?"verbose":null,c?"settings":null,d?"buffers":null,e?"wal":null].filter(Boolean).join("|"),i=null!=(g=this.headers.get("Accept"))?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${i}"; options=${h};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};let _=RegExp("[,()]");var aa=class extends ${eq(a,b){return this.url.searchParams.append(a,`eq.${b}`),this}neq(a,b){return this.url.searchParams.append(a,`neq.${b}`),this}gt(a,b){return this.url.searchParams.append(a,`gt.${b}`),this}gte(a,b){return this.url.searchParams.append(a,`gte.${b}`),this}lt(a,b){return this.url.searchParams.append(a,`lt.${b}`),this}lte(a,b){return this.url.searchParams.append(a,`lte.${b}`),this}like(a,b){return this.url.searchParams.append(a,`like.${b}`),this}likeAllOf(a,b){return this.url.searchParams.append(a,`like(all).{${b.join(",")}}`),this}likeAnyOf(a,b){return this.url.searchParams.append(a,`like(any).{${b.join(",")}}`),this}ilike(a,b){return this.url.searchParams.append(a,`ilike.${b}`),this}ilikeAllOf(a,b){return this.url.searchParams.append(a,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(a,b){return this.url.searchParams.append(a,`ilike(any).{${b.join(",")}}`),this}regexMatch(a,b){return this.url.searchParams.append(a,`match.${b}`),this}regexIMatch(a,b){return this.url.searchParams.append(a,`imatch.${b}`),this}is(a,b){return this.url.searchParams.append(a,`is.${b}`),this}isDistinct(a,b){return this.url.searchParams.append(a,`isdistinct.${b}`),this}in(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&_.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}notIn(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&_.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`not.in.(${c})`),this}contains(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cs.{${b.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(b)}`),this}containedBy(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cd.{${b.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(b)}`),this}rangeGt(a,b){return this.url.searchParams.append(a,`sr.${b}`),this}rangeGte(a,b){return this.url.searchParams.append(a,`nxl.${b}`),this}rangeLt(a,b){return this.url.searchParams.append(a,`sl.${b}`),this}rangeLte(a,b){return this.url.searchParams.append(a,`nxr.${b}`),this}rangeAdjacent(a,b){return this.url.searchParams.append(a,`adj.${b}`),this}overlaps(a,b){return"string"==typeof b?this.url.searchParams.append(a,`ov.${b}`):this.url.searchParams.append(a,`ov.{${b.join(",")}}`),this}textSearch(a,b,{config:c,type:d}={}){let e="";"plain"===d?e="pl":"phrase"===d?e="ph":"websearch"===d&&(e="w");let f=void 0===c?"":`(${c})`;return this.url.searchParams.append(a,`${e}fts${f}.${b}`),this}match(a){return Object.entries(a).forEach(([a,b])=>{this.url.searchParams.append(a,`eq.${b}`)}),this}not(a,b,c){return this.url.searchParams.append(a,`not.${b}.${c}`),this}or(a,{foreignTable:b,referencedTable:c=b}={}){let d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,b,c){return this.url.searchParams.append(a,`${b}.${c}`),this}},ab=class{constructor(a,{headers:b={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(b),this.schema=c,this.fetch=d}select(a,b){let{head:c=!1,count:d}=null!=b?b:{},e=!1,f=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!e?"":('"'===a&&(e=!e),a)).join("");return this.url.searchParams.set("select",f),d&&this.headers.append("Prefer",`count=${d}`),new aa({method:c?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:b,defaultToNull:c=!0}={}){var d;if(b&&this.headers.append("Prefer",`count=${b}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new aa({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(d=this.fetch)?d:fetch})}upsert(a,{onConflict:b,ignoreDuplicates:c=!1,count:d,defaultToNull:e=!0}={}){var f;if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),void 0!==b&&this.url.searchParams.set("on_conflict",b),d&&this.headers.append("Prefer",`count=${d}`),e||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new aa({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(f=this.fetch)?f:fetch})}update(a,{count:b}={}){var c;return b&&this.headers.append("Prefer",`count=${b}`),new aa({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(c=this.fetch)?c:fetch})}delete({count:a}={}){var b;return a&&this.headers.append("Prefer",`count=${a}`),new aa({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(b=this.fetch)?b:fetch})}},ac=class a{constructor(a,{headers:b={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(b),this.schemaName=c,this.fetch=d}from(a){if(!a||"string"!=typeof a||""===a.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new ab(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(b){return new a(this.url,{headers:this.headers,schema:b,fetch:this.fetch})}rpc(a,b={},{head:c=!1,get:d=!1,count:e}={}){var f;let g,h,i=new URL(`${this.url}/rpc/${a}`);c||d?(g=c?"HEAD":"GET",Object.entries(b).filter(([a,b])=>void 0!==b).map(([a,b])=>[a,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([a,b])=>{i.searchParams.append(a,b)})):(g="POST",h=b);let j=new Headers(this.headers);return e&&j.set("Prefer",`count=${e}`),new aa({method:g,url:i,headers:j,schema:this.schemaName,body:h,fetch:null!=(f=this.fetch)?f:fetch})}};let ad=class{static detectEnvironment(){var b;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==a.g.WebSocket)return{type:"native",constructor:a.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(b=navigator.userAgent)?void 0:b.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){let a=process.versions;if(a&&a.node){let b=parseInt(a.node.replace(/^v/,"").split(".")[0]);return b>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${b} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${b} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let a=this.detectEnvironment();if(a.constructor)return a.constructor;let b=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(b+=`

Suggested solution: ${a.workaround}`),Error(b)}static createWebSocket(a,b){return new(this.getWebSocketConstructor())(a,b)}static isWebSocketSupported(){try{let a=this.detectEnvironment();return"native"===a.type||"ws"===a.type}catch(a){return!1}}},ae="1.0.0";(m=D||(D={}))[m.connecting=0]="connecting",m[m.open=1]="open",m[m.closing=2]="closing",m[m.closed=3]="closed",(n=E||(E={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",(o=F||(F={})).close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token",(G||(G={})).websocket="websocket",(p=H||(H={})).Connecting="connecting",p.Open="open",p.Closing="closing",p.Closed="closed";class af{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=a?a:[]}encode(a,b){return a.event!==this.BROADCAST_EVENT||a.payload instanceof ArrayBuffer||"string"!=typeof a.payload.event?b(JSON.stringify([a.join_ref,a.ref,a.topic,a.event,a.payload])):b(this._binaryEncodeUserBroadcastPush(a))}_binaryEncodeUserBroadcastPush(a){var b;return this._isArrayBuffer(null==(b=a.payload)?void 0:b.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var b,c;let d=null!=(c=null==(b=a.payload)?void 0:b.payload)?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(a){var b,c;let d=null!=(c=null==(b=a.payload)?void 0:b.payload)?c:{},e=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,e)}_encodeUserBroadcastPush(a,b,c){let d=a.topic,e=null!=(n=a.ref)?n:"",f=null!=(o=a.join_ref)?o:"",g=a.payload.event,h=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},i=0===Object.keys(h).length?"":JSON.stringify(h);if(f.length>255)throw Error(`joinRef length ${f.length} exceeds maximum of 255`);if(e.length>255)throw Error(`ref length ${e.length} exceeds maximum of 255`);if(d.length>255)throw Error(`topic length ${d.length} exceeds maximum of 255`);if(g.length>255)throw Error(`userEvent length ${g.length} exceeds maximum of 255`);if(i.length>255)throw Error(`metadata length ${i.length} exceeds maximum of 255`);let j=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+e.length+d.length+g.length+i.length,k=new ArrayBuffer(this.HEADER_LENGTH+j),l=new DataView(k),m=0;l.setUint8(m++,this.KINDS.userBroadcastPush),l.setUint8(m++,f.length),l.setUint8(m++,e.length),l.setUint8(m++,d.length),l.setUint8(m++,g.length),l.setUint8(m++,i.length),l.setUint8(m++,b),Array.from(f,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(e,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(d,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(g,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(i,a=>l.setUint8(m++,a.charCodeAt(0)));var n,o,p=new Uint8Array(k.byteLength+c.byteLength);return p.set(new Uint8Array(k),0),p.set(new Uint8Array(c),k.byteLength),p.buffer}decode(a,b){if(this._isArrayBuffer(a))return b(this._binaryDecode(a));if("string"==typeof a){let[c,d,e,f,g]=JSON.parse(a);return b({join_ref:c,ref:d,topic:e,event:f,payload:g})}return b({})}_binaryDecode(a){let b=new DataView(a),c=b.getUint8(0),d=new TextDecoder;if(c===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,b,d)}_decodeUserBroadcast(a,b,c){let d=b.getUint8(1),e=b.getUint8(2),f=b.getUint8(3),g=b.getUint8(4),h=this.HEADER_LENGTH+4,i=c.decode(a.slice(h,h+d));h+=d;let j=c.decode(a.slice(h,h+e));h+=e;let k=c.decode(a.slice(h,h+f));h+=f;let l=a.slice(h,a.byteLength),m=g===this.JSON_ENCODING?JSON.parse(c.decode(l)):l,n={type:this.BROADCAST_EVENT,event:j,payload:m};return f>0&&(n.meta=JSON.parse(k)),{join_ref:null,ref:null,topic:i,event:this.BROADCAST_EVENT,payload:n}}_isArrayBuffer(a){var b;return a instanceof ArrayBuffer||(null==(b=null==a?void 0:a.constructor)?void 0:b.name)==="ArrayBuffer"}_pick(a,b){return a&&"object"==typeof a?Object.fromEntries(Object.entries(a).filter(([a])=>b.includes(a))):{}}}class ag{constructor(a,b){this.callback=a,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(q=I||(I={})).abstime="abstime",q.bool="bool",q.date="date",q.daterange="daterange",q.float4="float4",q.float8="float8",q.int2="int2",q.int4="int4",q.int4range="int4range",q.int8="int8",q.int8range="int8range",q.json="json",q.jsonb="jsonb",q.money="money",q.numeric="numeric",q.oid="oid",q.reltime="reltime",q.text="text",q.time="time",q.timestamp="timestamp",q.timestamptz="timestamptz",q.timetz="timetz",q.tsrange="tsrange",q.tstzrange="tstzrange";let ah=(a,b,c={})=>{var d;let e=null!=(d=c.skipTypes)?d:[];return b?Object.keys(b).reduce((c,d)=>(c[d]=ai(d,a,b,e),c),{}):{}},ai=(a,b,c,d)=>{let e=b.find(b=>b.name===a),f=null==e?void 0:e.type,g=c[a];return f&&!d.includes(f)?aj(f,g):ak(g)},aj=(a,b)=>{if("_"===a.charAt(0))return ao(b,a.slice(1,a.length));switch(a){case I.bool:return al(b);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return am(b);case I.json:case I.jsonb:return an(b);case I.timestamp:return ap(b);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:default:return ak(b)}},ak=a=>a,al=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},am=a=>{if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return b}return a},an=a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(a){}return a},ao=(a,b)=>{if("string"!=typeof a)return a;let c=a.length-1,d=a[c];if("{"===a[0]&&"}"===d){let d,e=a.slice(1,c);try{d=JSON.parse("["+e+"]")}catch(a){d=e?e.split(","):[]}return d.map(a=>aj(b,a))}return a},ap=a=>"string"==typeof a?a.replace(" ","T"):a,aq=a=>{let b=new URL(a);return b.protocol=b.protocol.replace(/^ws/i,"http"),b.pathname=b.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===b.pathname||"/"===b.pathname?b.pathname="/api/broadcast":b.pathname=b.pathname+"/api/broadcast",b.href};class ar{constructor(a,b,c={},d=1e4){this.channel=a,this.event=b,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,b){var c;return this._hasReceived(a)&&b(null==(c=this.receivedResp)?void 0:c.response),this.recHooks.push({status:a,callback:b}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let a=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:b}){this.recHooks.filter(b=>b.status===a).forEach(a=>a.callback(b))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}(r=J||(J={})).SYNC="sync",r.JOIN="join",r.LEAVE="leave";class as{constructor(a,b){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(null==b?void 0:b.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=as.syncState(this.state,a,b,c),this.pendingDiffs.forEach(a=>{this.state=as.syncDiff(this.state,a,b,c)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=as.syncDiff(this.state,a,b,c),d())}),this.onJoin((a,b,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:b,newPresences:c})}),this.onLeave((a,b,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:b,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,b,c,d){let e=this.cloneDeep(a),f=this.transformState(b),g={},h={};return this.map(e,(a,b)=>{f[a]||(h[a]=b)}),this.map(f,(a,b)=>{let c=e[a];if(c){let d=b.map(a=>a.presence_ref),e=c.map(a=>a.presence_ref),f=b.filter(a=>0>e.indexOf(a.presence_ref)),i=c.filter(a=>0>d.indexOf(a.presence_ref));f.length>0&&(g[a]=f),i.length>0&&(h[a]=i)}else g[a]=b}),this.syncDiff(e,{joins:g,leaves:h},c,d)}static syncDiff(a,b,c,d){let{joins:e,leaves:f}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(e,(b,d)=>{var e;let f=null!=(e=a[b])?e:[];if(a[b]=this.cloneDeep(d),f.length>0){let c=a[b].map(a=>a.presence_ref),d=f.filter(a=>0>c.indexOf(a.presence_ref));a[b].unshift(...d)}c(b,f,d)}),this.map(f,(b,c)=>{let e=a[b];if(!e)return;let f=c.map(a=>a.presence_ref);e=e.filter(a=>0>f.indexOf(a.presence_ref)),a[b]=e,d(b,e,c),0===e.length&&delete a[b]}),a}static map(a,b){return Object.getOwnPropertyNames(a).map(c=>b(c,a[c]))}static transformState(a){return Object.getOwnPropertyNames(a=this.cloneDeep(a)).reduce((b,c)=>{let d=a[c];return"metas"in d?b[c]=d.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):b[c]=d,b},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(s=K||(K={})).ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE",(t=L||(L={})).BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",(u=M||(M={})).SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR";class at{constructor(a,b={config:{}},c){var d,e;if(this.topic=a,this.params=b,this.socket=c,this.bindings={},this.state=E.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new ar(this,F.join,this.params,this.timeout),this.rejoinTimer=new ag(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=E.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=E.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this._on(F.reply,{},(a,b)=>{this._trigger(this._replyEventName(b),a)}),this.presence=new as(this),this.broadcastEndpointURL=aq(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(e=null==(d=this.params.config)?void 0:d.broadcast)?void 0:e.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,b=this.timeout){var c,d,e;if(this.socket.isConnected()||this.socket.connect(),this.state==E.closed){let{config:{broadcast:f,presence:g,private:h}}=this.params,i=null!=(d=null==(c=this.bindings.postgres_changes)?void 0:c.map(a=>a.filter))?d:[],j=!!this.bindings[L.PRESENCE]&&this.bindings[L.PRESENCE].length>0||(null==(e=this.params.config.presence)?void 0:e.enabled)===!0,k={},l={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:j}),postgres_changes:i,private:h};this.socket.accessTokenValue&&(k.access_token=this.socket.accessTokenValue),this._onError(b=>null==a?void 0:a(M.CHANNEL_ERROR,b)),this._onClose(()=>null==a?void 0:a(M.CLOSED)),this.updateJoinPayload(Object.assign({config:l},k)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",async({postgres_changes:b})=>{var c;if(this.socket._isManualToken()||this.socket.setAuth(),void 0===b){null==a||a(M.SUBSCRIBED);return}{let d=this.bindings.postgres_changes,e=null!=(c=null==d?void 0:d.length)?c:0,f=[];for(let c=0;c<e;c++){let e=d[c],{filter:{event:g,schema:h,table:i,filter:j}}=e,k=b&&b[c];if(k&&k.event===g&&at.isFilterValueEqual(k.schema,h)&&at.isFilterValueEqual(k.table,i)&&at.isFilterValueEqual(k.filter,j))f.push(Object.assign(Object.assign({},e),{id:k.id}));else{this.unsubscribe(),this.state=E.errored,null==a||a(M.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,a&&a(M.SUBSCRIBED);return}}).receive("error",b=>{this.state=E.errored,null==a||a(M.CHANNEL_ERROR,Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{null==a||a(M.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,b={}){return await this.send({type:"presence",event:"track",payload:a},b.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,b,c){return this.state===E.joined&&a===L.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,b,c)}async httpSend(a,b,c={}){var d;if(null==b)return Promise.reject("Payload is required for httpSend()");let e={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(e.Authorization=`Bearer ${this.socket.accessTokenValue}`);let f={method:"POST",headers:e,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:b,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,null!=(d=c.timeout)?d:this.timeout);if(202===g.status)return{success:!0};let h=g.statusText;try{let a=await g.json();h=a.error||a.message||h}catch(a){}return Promise.reject(Error(h))}async send(a,b={}){var c,d;if(this._canPush()||"broadcast"!==a.type)return new Promise(c=>{var d,e,f;let g=this._push(a.type,a,b.timeout||this.timeout);"broadcast"!==a.type||(null==(f=null==(e=null==(d=this.params)?void 0:d.config)?void 0:e.broadcast)?void 0:f.ack)||c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:e,payload:f}=a,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);let h={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:f,private:this.private}]})};try{let a=await this._fetchWithTimeout(this.broadcastEndpointURL,h,null!=(c=b.timeout)?c:this.timeout);return await (null==(d=a.body)?void 0:d.cancel()),a.ok?"ok":"error"}catch(a){if("AbortError"===a.name)return"timed out";return"error"}}}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=E.leaving;let b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(F.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{(c=new ar(this,F.leave,{},a)).receive("ok",()=>{b(),d("ok")}).receive("timeout",()=>{b(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{null==c||c.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=E.closed,this.bindings={}}async _fetchWithTimeout(a,b,c){let d=new AbortController,e=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(a,Object.assign(Object.assign({},b),{signal:d.signal}));return clearTimeout(e),f}_push(a,b,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new ar(this,a,b,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>100){let a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(a,b,c){return b}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,b,c){var d,e;let f=a.toLocaleLowerCase(),{close:g,error:h,leave:i,join:j}=F;if(c&&[g,h,i,j].indexOf(f)>=0&&c!==this._joinRef())return;let k=this._onMessage(f,b,c);if(b&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?null==(d=this.bindings.postgres_changes)||d.filter(a=>{var b,c,d;return(null==(b=a.filter)?void 0:b.event)==="*"||(null==(d=null==(c=a.filter)?void 0:c.event)?void 0:d.toLocaleLowerCase())===f}).map(a=>a.callback(k,c)):null==(e=this.bindings[f])||e.filter(a=>{var c,d,e,g,h,i;if(!["broadcast","presence","postgres_changes"].includes(f))return a.type.toLocaleLowerCase()===f;if("id"in a){let f=a.id,g=null==(c=a.filter)?void 0:c.event;return f&&(null==(d=b.ids)?void 0:d.includes(f))&&("*"===g||(null==g?void 0:g.toLocaleLowerCase())===(null==(e=b.data)?void 0:e.type.toLocaleLowerCase()))}{let c=null==(h=null==(g=null==a?void 0:a.filter)?void 0:g.event)?void 0:h.toLocaleLowerCase();return"*"===c||c===(null==(i=null==b?void 0:b.event)?void 0:i.toLocaleLowerCase())}}).map(a=>{if("object"==typeof k&&"ids"in k){let a=k.data,{schema:b,table:c,commit_timestamp:d,type:e,errors:f}=a;k=Object.assign(Object.assign({},{schema:b,table:c,commit_timestamp:d,eventType:e,new:{},old:{},errors:f}),this._getPayloadRecords(a))}a.callback(k,c)})}_isClosed(){return this.state===E.closed}_isJoined(){return this.state===E.joined}_isJoining(){return this.state===E.joining}_isLeaving(){return this.state===E.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,b,c){let d=a.toLocaleLowerCase(),e={type:d,filter:b,callback:c};return this.bindings[d]?this.bindings[d].push(e):this.bindings[d]=[e],this}_off(a,b){let c=a.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(a=>{var d;return!((null==(d=a.type)?void 0:d.toLocaleLowerCase())===c&&at.isEqual(a.filter,b))})),this}static isEqual(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}static isFilterValueEqual(a,b){return(null!=a?a:void 0)===(null!=b?b:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(F.close,{},a)}_onError(a){this._on(F.error,{},b=>a(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=E.joining,this.joinPush.resend(a))}_getPayloadRecords(a){let b={new:{},old:{}};return("INSERT"===a.type||"UPDATE"===a.type)&&(b.new=ah(a.columns,a.record)),("UPDATE"===a.type||"DELETE"===a.type)&&(b.old=ah(a.columns,a.old_record)),b}}let au=()=>{},av=[1e3,2e3,5e3,1e4],aw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ax{constructor(a,b){var c;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=au,this.ref=0,this.reconnectTimer=null,this.vsn=ae,this.logger=au,this.conn=null,this.sendBuffer=[],this.serializer=new af,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),!(null==(c=null==b?void 0:b.params)?void 0:c.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=b.params.apikey,this.endPoint=`${a}/${G.websocket}`,this.httpEndpoint=aq(a),this._initializeOptions(b),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==b?void 0:b.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ad.createWebSocket(this.endpointURL())}catch(b){this._setConnectionState("disconnected");let a=b.message;if(a.includes("Node.js"))throw Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,b){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(a?this.conn.close(a,null!=b?b:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){let b=await a.unsubscribe();return 0===this.channels.length&&this.disconnect(),b}async removeAllChannels(){let a=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,b,c){this.logger(a,b,c)}connectionState(){switch(this.conn&&this.conn.readyState){case D.connecting:return H.Connecting;case D.open:return H.Open;case D.closing:return H.Closing;default:return H.Closed}}isConnected(){return this.connectionState()===H.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(a,b={config:{}}){let c=`realtime:${a}`,d=this.getChannels().find(a=>a.topic===c);if(d)return d;{let c=new at(`realtime:${a}`,b,this);return this.channels.push(c),c}}push(a){let{topic:b,event:c,payload:d,ref:e}=a,f=()=>{this.encode(a,a=>{var b;null==(b=this.conn)||b.send(a)})};this.log("push",`${b} ${c} (${e})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,null==(a=this.conn)||a.close(1e3,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||null==(a=this.reconnectTimer)||a.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let b=this.channels.find(b=>b.topic===a&&(b._isJoined()||b._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${a}"`),b.unsubscribe())}_remove(a){this.channels=this.channels.filter(b=>b.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,a=>{if("phoenix"===a.topic&&"phx_reply"===a.event)try{this.heartbeatCallback("ok"===a.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:b,event:c,payload:d,ref:e}=a,f=e?`(${e})`:"",g=d.status||"";this.log("receive",`${g} ${b} ${c} ${f}`.trim(),d),this.channels.filter(a=>a._isMember(b)).forEach(a=>a._trigger(c,d,e)),this._triggerStateCallbacks("message",a)})}_clearTimer(a){var b;"heartbeat"===a&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===a&&(null==(b=this.reconnectTimer)||b.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===D.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===D.open||this.conn.readyState===D.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{"keepAlive"===a.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var b;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(b=this.reconnectTimer)||b.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(F.error))}_appendParams(a,b){if(0===Object.keys(b).length)return a;let c=a.match(/\?/)?"&":"?",d=new URLSearchParams(b);return`${a}${c}${d}`}_workerObjectUrl(a){let b;if(a)b=a;else{let a=new Blob([aw],{type:"application/javascript"});b=URL.createObjectURL(a)}return b}_setConnectionState(a,b=!1){this._connectionState=a,"connecting"===a?this._wasManualDisconnect=!1:"disconnecting"===a&&(this._wasManualDisconnect=b)}async _performAuth(a=null){let b,c=!1;if(a)b=a,c=!0;else if(this.accessToken)try{b=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),b=this.accessTokenValue}else b=this.accessTokenValue;c?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=b&&(this.accessTokenValue=b,this.channels.forEach(a=>{let c={access_token:b,version:"realtime-js/2.89.0"};b&&a.updateJoinPayload(c),a.joinedOnce&&a._isJoined()&&a._push(F.access_token,{access_token:b})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(b=>{this.log("error",`Error setting auth in ${a}`,b)})}_triggerStateCallbacks(a,b){try{this.stateChangeCallbacks[a].forEach(c=>{try{c(b)}catch(b){this.log("error",`error in ${a} callback`,b)}})}catch(b){this.log("error",`error triggering ${a} callbacks`,b)}}_setupReconnectionTimer(){this.reconnectTimer=new ag(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(a){var b,c,d,e,f,g,h,i,j,k,l,m;switch(this.transport=null!=(b=null==a?void 0:a.transport)?b:null,this.timeout=null!=(c=null==a?void 0:a.timeout)?c:1e4,this.heartbeatIntervalMs=null!=(d=null==a?void 0:a.heartbeatIntervalMs)?d:25e3,this.worker=null!=(e=null==a?void 0:a.worker)&&e,this.accessToken=null!=(f=null==a?void 0:a.accessToken)?f:null,this.heartbeatCallback=null!=(g=null==a?void 0:a.heartbeatCallback)?g:au,this.vsn=null!=(h=null==a?void 0:a.vsn)?h:ae,(null==a?void 0:a.params)&&(this.params=a.params),(null==a?void 0:a.logger)&&(this.logger=a.logger),((null==a?void 0:a.logLevel)||(null==a?void 0:a.log_level))&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(i=null==a?void 0:a.reconnectAfterMs)?i:a=>av[a-1]||1e4,this.vsn){case ae:this.encode=null!=(j=null==a?void 0:a.encode)?j:(a,b)=>b(JSON.stringify(a)),this.decode=null!=(k=null==a?void 0:a.decode)?k:(a,b)=>b(JSON.parse(a));break;case"2.0.0":this.encode=null!=(l=null==a?void 0:a.encode)?l:this.serializer.encode.bind(this.serializer),this.decode=null!=(m=null==a?void 0:a.decode)?m:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}this.worker&&(this.workerUrl=null==a?void 0:a.workerUrl)}}var ay=class extends Error{constructor(a,b){super(a),this.name="IcebergError",this.status=b.status,this.icebergType=b.icebergType,this.icebergCode=b.icebergCode,this.details=b.details,this.isCommitStateUnknown="CommitStateUnknownException"===b.icebergType||[500,502,504].includes(b.status)&&b.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function az(a){return a&&"none"!==a.type?"bearer"===a.type?{Authorization:`Bearer ${a.token}`}:"header"===a.type?{[a.name]:a.value}:"custom"===a.type?await a.getHeaders():{}:{}}function aA(a){return a.join("\x1f")}var aB=class{constructor(a,b=""){this.client=a,this.prefix=b}async listNamespaces(a){let b=a?{parent:aA(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:b})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(a,b){let c={namespace:a.namespace,properties:b?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:c})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aA(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aA(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aA(a.namespace)}`}),!0}catch(a){if(a instanceof ay&&404===a.status)return!1;throw a}}async createNamespaceIfNotExists(a,b){try{return await this.createNamespace(a,b)}catch(a){if(a instanceof ay&&409===a.status)return;throw a}}};function aC(a){return a.join("\x1f")}var aD=class{constructor(a,b="",c){this.client=a,this.prefix=b,this.accessDelegation=c}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aC(a.namespace)}/tables`})).data.identifiers}async createTable(a,b){let c={};return this.accessDelegation&&(c["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aC(a.namespace)}/tables`,body:b,headers:c})).data.metadata}async updateTable(a,b){let c=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aC(a.namespace)}/tables/${a.name}`,body:b});return{"metadata-location":c.data["metadata-location"],metadata:c.data.metadata}}async dropTable(a,b){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aC(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(b?.purge??!1)}})}async loadTable(a){let b={};return this.accessDelegation&&(b["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aC(a.namespace)}/tables/${a.name}`,headers:b})).data.metadata}async tableExists(a){let b={};this.accessDelegation&&(b["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aC(a.namespace)}/tables/${a.name}`,headers:b}),!0}catch(a){if(a instanceof ay&&404===a.status)return!1;throw a}}async createTableIfNotExists(a,b){try{return await this.createTable(a,b)}catch(c){if(c instanceof ay&&409===c.status)return await this.loadTable({namespace:a.namespace,name:b.name});throw c}}},aE=class{constructor(a){let b="v1";a.catalogName&&(b+=`/${a.catalogName}`);const c=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=function(a){let b=a.fetchImpl??globalThis.fetch;return{async request({method:c,path:d,query:e,body:f,headers:g}){let h=function(a,b,c){let d=new URL(b,a);if(c)for(let[a,b]of Object.entries(c))void 0!==b&&d.searchParams.set(a,b);return d.toString()}(a.baseUrl,d,e),i=await az(a.auth),j=await b(h,{method:c,headers:{...f?{"Content-Type":"application/json"}:{},...i,...g},body:f?JSON.stringify(f):void 0}),k=await j.text(),l=(j.headers.get("content-type")||"").includes("application/json"),m=l&&k?JSON.parse(k):k;if(!j.ok){let a=l?m:void 0,b=a?.error;throw new ay(b?.message??`Request failed with status ${j.status}`,{status:j.status,icebergType:b?.type,icebergCode:b?.code,details:a})}return{status:j.status,headers:j.headers,data:m}}}}({baseUrl:c,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new aB(this.client,b),this.tableOps=new aD(this.client,b,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,b){return this.namespaceOps.createNamespace(a,b)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,b){return this.tableOps.createTable(a,b)}async updateTable(a,b){return this.tableOps.updateTable(a,b)}async dropTable(a,b){await this.tableOps.dropTable(a,b)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,b){return this.namespaceOps.createNamespaceIfNotExists(a,b)}async createTableIfNotExists(a,b){return this.tableOps.createTableIfNotExists(a,b)}},aF=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function aG(a){return"object"==typeof a&&null!==a&&"__isStorageError"in a}var aH=class extends aF{constructor(a,b,c){super(a),this.name="StorageApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},aI=class extends aF{constructor(a,b){super(a),this.name="StorageUnknownError",this.originalError=b}};let aJ=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),aK=a=>{if(Array.isArray(a))return a.map(a=>aK(a));if("function"==typeof a||a!==Object(a))return a;let b={};return Object.entries(a).forEach(([a,c])=>{b[a.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""))]=aK(c)}),b};function aL(a){return(aL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function aM(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function aN(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?aM(Object(c),!0).forEach(function(b){!function(a,b,c){var d;(d=function(a,b){if("object"!=aL(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=aL(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"),(b="symbol"==aL(d)?d:d+"")in a)?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):aM(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}let aO=a=>{var b;return a.msg||a.message||a.error_description||("string"==typeof a.error?a.error:null==(b=a.error)?void 0:b.message)||JSON.stringify(a)},aP=async(a,b,c)=>{a instanceof await Response&&!(null==c?void 0:c.noResolveJson)?a.json().then(c=>{let d=a.status||500,e=(null==c?void 0:c.statusCode)||d+"";b(new aH(aO(c),d,e))}).catch(a=>{b(new aI(aO(a),a))}):b(new aI(aO(a),a))};async function aQ(a,b,c,d,e,f){return new Promise((g,h)=>{let i;a(c,(i={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b||!f?i:((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(f)?(i.headers=aN({"Content-Type":"application/json"},null==d?void 0:d.headers),i.body=JSON.stringify(f)):i.body=f,(null==d?void 0:d.duplex)&&(i.duplex=d.duplex),aN(aN({},i),e)))).then(a=>{if(!a.ok)throw a;return(null==d?void 0:d.noResolveJson)?a:a.json()}).then(a=>g(a)).catch(a=>aP(a,h,d))})}async function aR(a,b,c,d){return aQ(a,"GET",b,c,d)}async function aS(a,b,c,d,e){return aQ(a,"POST",b,d,e,c)}async function aT(a,b,c,d,e){return aQ(a,"PUT",b,d,e,c)}async function aU(a,b,c,d){return aQ(a,"HEAD",b,aN(aN({},c),{},{noResolveJson:!0}),d)}async function aV(a,b,c,d,e){return aQ(a,"DELETE",b,d,e,c)}var aW=class{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b}then(a,b){return this.execute().then(a,b)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}};b=Symbol.toStringTag;var aX=class{constructor(a,c){this.downloadFn=a,this.shouldThrowOnError=c,this[b]="BlobDownloadBuilder",this.promise=null}asStream(){return new aW(this.downloadFn,this.shouldThrowOnError)}then(a,b){return this.getPromise().then(a,b)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}};let aY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aZ={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var a$=class{constructor(a,b={},c,d){this.shouldThrowOnError=!1,this.url=a,this.headers=b,this.bucketId=c,this.fetch=aJ(d)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,b,c,d){try{let e,f=aN(aN({},aZ),d),g=aN(aN({},this.headers),"POST"===a&&{"x-upsert":String(f.upsert)}),h=f.metadata;"undefined"!=typeof Blob&&c instanceof Blob?((e=new FormData).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h)),e.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?((e=c).has("cacheControl")||e.append("cacheControl",f.cacheControl),h&&!e.has("metadata")&&e.append("metadata",this.encodeMetadata(h))):(e=c,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h))),("undefined"!=typeof ReadableStream&&e instanceof ReadableStream||e&&"object"==typeof e&&"pipe"in e&&"function"==typeof e.pipe)&&!f.duplex&&(f.duplex="half")),(null==d?void 0:d.headers)&&(g=aN(aN({},g),d.headers));let i=this._removeEmptyFolders(b),j=this._getFinalPath(i),k=await ("PUT"==a?aT:aS)(this.fetch,`${this.url}/object/${j}`,e,aN({headers:g},(null==f?void 0:f.duplex)?{duplex:f.duplex}:{}));return{data:{path:i,id:k.Id,fullPath:k.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async upload(a,b,c){return this.uploadOrUpdate("POST",a,b,c)}async uploadToSignedUrl(a,b,c,d){let e=this._removeEmptyFolders(a),f=this._getFinalPath(e),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",b);try{let a,b=aN({upsert:aZ.upsert},d),f=aN(aN({},this.headers),{"x-upsert":String(b.upsert)});return"undefined"!=typeof Blob&&c instanceof Blob?((a=new FormData).append("cacheControl",b.cacheControl),a.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?(a=c).append("cacheControl",b.cacheControl):(a=c,f["cache-control"]=`max-age=${b.cacheControl}`,f["content-type"]=b.contentType),{data:{path:e,fullPath:(await aT(this.fetch,g.toString(),a,{headers:f})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async createSignedUploadUrl(a,b){try{let c=this._getFinalPath(a),d=aN({},this.headers);(null==b?void 0:b.upsert)&&(d["x-upsert"]="true");let e=await aS(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(this.url+e.url),g=f.searchParams.get("token");if(!g)throw new aF("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async update(a,b,c){return this.uploadOrUpdate("PUT",a,b,c)}async move(a,b,c){try{return{data:await aS(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async copy(a,b,c){try{return{data:{path:(await aS(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async createSignedUrl(a,b,c){try{let d=this._getFinalPath(a),e=await aS(this.fetch,`${this.url}/object/sign/${d}`,aN({expiresIn:b},(null==c?void 0:c.transform)?{transform:c.transform}:{}),{headers:this.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e={signedUrl:encodeURI(`${this.url}${e.signedURL}${f}`)},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async createSignedUrls(a,b,c){var d=this;try{let e=await aS(d.fetch,`${d.url}/object/sign/${d.bucketId}`,{expiresIn:b,paths:a},{headers:d.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e.map(a=>aN(aN({},a),{},{signedUrl:a.signedURL?encodeURI(`${d.url}${a.signedURL}${f}`):null})),error:null}}catch(a){if(d.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}download(a,b){let c=void 0!==(null==b?void 0:b.transform)?"render/image/authenticated":"object",d=this.transformOptsToQueryString((null==b?void 0:b.transform)||{}),e=d?`?${d}`:"",f=this._getFinalPath(a);return new aX(()=>aR(this.fetch,`${this.url}/${c}/${f}${e}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(a){let b=this._getFinalPath(a);try{return{data:aK(await aR(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async exists(a){let b=this._getFinalPath(a);try{return await aU(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a)&&a instanceof aI){let b=a.originalError;if([400,404].includes(null==b?void 0:b.status))return{data:!1,error:a}}throw a}}getPublicUrl(a,b){let c=this._getFinalPath(a),d=[],e=(null==b?void 0:b.download)?`download=${!0===b.download?"":b.download}`:"";""!==e&&d.push(e);let f=void 0!==(null==b?void 0:b.transform)?"render/image":"object",g=this.transformOptsToQueryString((null==b?void 0:b.transform)||{});""!==g&&d.push(g);let h=d.join("&");return""!==h&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${c}${h}`)}}}async remove(a){try{return{data:await aV(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async list(a,b,c){try{let d=aN(aN(aN({},aY),b),{},{prefix:a||""});return{data:await aS(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async listV2(a,b){try{let c=aN({},a);return{data:await aS(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},b),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return"undefined"!=typeof Buffer?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){let b=[];return a.width&&b.push(`width=${a.width}`),a.height&&b.push(`height=${a.height}`),a.resize&&b.push(`resize=${a.resize}`),a.format&&b.push(`format=${a.format}`),a.quality&&b.push(`quality=${a.quality}`),b.join("&")}};let a_="2.89.0",a0={"X-Client-Info":`storage-js/${a_}`};var a1=class{constructor(a,b={},c,d){this.shouldThrowOnError=!1;const e=new URL(a);(null==d?void 0:d.useNewHostname)&&/supabase\.(co|in|red)$/.test(e.hostname)&&!e.hostname.includes("storage.supabase.")&&(e.hostname=e.hostname.replace("supabase.","storage.supabase.")),this.url=e.href.replace(/\/$/,""),this.headers=aN(aN({},a0),b),this.fetch=aJ(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){try{let b=this.listBucketOptionsToQueryString(a);return{data:await aR(this.fetch,`${this.url}/bucket${b}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async getBucket(a){try{return{data:await aR(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async createBucket(a,b={public:!1}){try{return{data:await aS(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:b.type,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async updateBucket(a,b){try{return{data:await aT(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async emptyBucket(a){try{return{data:await aS(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async deleteBucket(a){try{return{data:await aV(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}listBucketOptionsToQueryString(a){let b={};return a&&("limit"in a&&(b.limit=String(a.limit)),"offset"in a&&(b.offset=String(a.offset)),a.search&&(b.search=a.search),a.sortColumn&&(b.sortColumn=a.sortColumn),a.sortOrder&&(b.sortOrder=a.sortOrder)),Object.keys(b).length>0?"?"+new URLSearchParams(b).toString():""}},a2=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=aN(aN({},a0),b),this.fetch=aJ(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){try{return{data:await aS(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async listBuckets(a){try{let b=new URLSearchParams;(null==a?void 0:a.limit)!==void 0&&b.set("limit",a.limit.toString()),(null==a?void 0:a.offset)!==void 0&&b.set("offset",a.offset.toString()),(null==a?void 0:a.sortColumn)&&b.set("sortColumn",a.sortColumn),(null==a?void 0:a.sortOrder)&&b.set("sortOrder",a.sortOrder),(null==a?void 0:a.search)&&b.set("search",a.search);let c=b.toString(),d=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`;return{data:await aR(this.fetch,d,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}async deleteBucket(a){try{return{data:await aV(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(aG(a))return{data:null,error:a};throw a}}from(a){var b=this;if(!(!(!a||"string"!=typeof a||0===a.length||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(a)))throw new aF("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let c=new aE({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>b.headers},fetch:this.fetch}),d=this.shouldThrowOnError;return new Proxy(c,{get(a,b){let c=a[b];return"function"!=typeof c?c:async(...b)=>{try{return{data:await c.apply(a,b),error:null}}catch(a){if(d)throw a;return{data:null,error:a}}}}})}};let a3={"X-Client-Info":`storage-js/${a_}`,"Content-Type":"application/json"};var a4=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function a5(a){return"object"==typeof a&&null!==a&&"__isStorageVectorsError"in a}var a6=class extends a4{constructor(a,b,c){super(a),this.name="StorageVectorsApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},a7=class extends a4{constructor(a,b){super(a),this.name="StorageVectorsUnknownError",this.originalError=b}};let a8=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),a9=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),ba=async(a,b,c)=>{if(a&&"object"==typeof a&&"status"in a&&"ok"in a&&"number"==typeof a.status&&!(null==c?void 0:c.noResolveJson)){let c=a.status||500;"function"==typeof a.json?a.json().then(a=>{let d=(null==a?void 0:a.statusCode)||(null==a?void 0:a.code)||c+"";b(new a6(a9(a),c,d))}).catch(()=>{b(new a6(a.statusText||`HTTP ${c} error`,c,c+""))}):b(new a6(a.statusText||`HTTP ${c} error`,c,c+""))}else b(new a7(a9(a),a))};async function bb(a,b,c,d,e,f){return new Promise((g,h)=>{let i;a(c,(i={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b||!f?i:((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(f)?(i.headers=aN({"Content-Type":"application/json"},null==d?void 0:d.headers),i.body=JSON.stringify(f)):i.body=f,aN(aN({},i),e)))).then(a=>{if(!a.ok)throw a;if(null==d?void 0:d.noResolveJson)return a;let b=a.headers.get("content-type");return b&&b.includes("application/json")?a.json():{}}).then(a=>g(a)).catch(a=>ba(a,h,d))})}async function bc(a,b,c,d,e){return bb(a,"POST",b,d,e,c)}var bd=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=aN(aN({},a3),b),this.fetch=a8(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){try{return{data:await bc(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async getIndex(a,b){try{return{data:await bc(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async listIndexes(a){try{return{data:await bc(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async deleteIndex(a,b){try{return{data:await bc(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}},be=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=aN(aN({},a3),b),this.fetch=a8(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){try{if(a.vectors.length<1||a.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:await bc(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async getVectors(a){try{return{data:await bc(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async listVectors(a){try{if(void 0!==a.segmentCount){if(a.segmentCount<1||a.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==a.segmentIndex&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await bc(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async queryVectors(a){try{return{data:await bc(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async deleteVectors(a){try{if(a.keys.length<1||a.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:await bc(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}},bf=class{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=aN(aN({},a3),b),this.fetch=a8(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){try{return{data:await bc(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async getBucket(a){try{return{data:await bc(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async listBuckets(a={}){try{return{data:await bc(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}async deleteBucket(a){try{return{data:await bc(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers})||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(a5(a))return{data:null,error:a};throw a}}},bg=class extends bf{constructor(a,b={}){super(a,b.headers||{},b.fetch)}from(a){return new bh(this.url,this.headers,a,this.fetch)}async createBucket(a){return super.createBucket.call(this,a)}async getBucket(a){return super.getBucket.call(this,a)}async listBuckets(a={}){return super.listBuckets.call(this,a)}async deleteBucket(a){return super.deleteBucket.call(this,a)}},bh=class extends bd{constructor(a,b,c,d){super(a,b,d),this.vectorBucketName=c}async createIndex(a){return super.createIndex.call(this,aN(aN({},a),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(a={}){return super.listIndexes.call(this,aN(aN({},a),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(a){return super.getIndex.call(this,this.vectorBucketName,a)}async deleteIndex(a){return super.deleteIndex.call(this,this.vectorBucketName,a)}index(a){return new bi(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},bi=class extends be{constructor(a,b,c,d,e){super(a,b,e),this.vectorBucketName=c,this.indexName=d}async putVectors(a){return super.putVectors.call(this,aN(aN({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(a){return super.getVectors.call(this,aN(aN({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(a={}){return super.listVectors.call(this,aN(aN({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(a){return super.queryVectors.call(this,aN(aN({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(a){return super.deleteVectors.call(this,aN(aN({},a),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}},bj=class extends a1{constructor(a,b={},c,d){super(a,b,c,d)}from(a){return new a$(this.url,this.headers,a,this.fetch)}get vectors(){return new bg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new a2(this.url+"/iceberg",this.headers,this.fetch)}};let bk="2.89.0",bl={"X-Client-Info":`gotrue-js/${bk}`},bm="X-Supabase-Api-Version",bn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bo=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class bp extends Error{constructor(a,b,c){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=c}}function bq(a){return"object"==typeof a&&null!==a&&"__isAuthError"in a}class br extends bp{constructor(a,b,c){super(a,b,c),this.name="AuthApiError",this.status=b,this.code=c}}class bs extends bp{constructor(a,b){super(a),this.name="AuthUnknownError",this.originalError=b}}class bt extends bp{constructor(a,b,c,d){super(a,c,d),this.name=b,this.status=c}}class bu extends bt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class bv extends bt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bw extends bt{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class bx extends bt{constructor(a,b=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class by extends bt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bz extends bt{constructor(a,b){super(a,"AuthRetryableFetchError",b,void 0)}}function bA(a){return bq(a)&&"AuthRetryableFetchError"===a.name}class bB extends bt{constructor(a,b,c){super(a,"AuthWeakPasswordError",b,"weak_password"),this.reasons=c}}class bC extends bt{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}let bD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bE=" 	\n\r=".split(""),bF=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<bE.length;b+=1)a[bE[b].charCodeAt(0)]=-2;for(let b=0;b<bD.length;b+=1)a[bD[b].charCodeAt(0)]=b;return a})();function bG(a,b,c){if(null!==a)for(b.queue=b.queue<<8|a,b.queuedBits+=8;b.queuedBits>=6;)c(bD[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6;else if(b.queuedBits>0)for(b.queue=b.queue<<6-b.queuedBits,b.queuedBits=6;b.queuedBits>=6;)c(bD[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6}function bH(a,b,c){let d=bF[a];if(d>-1)for(b.queue=b.queue<<6|d,b.queuedBits+=6;b.queuedBits>=8;)c(b.queue>>b.queuedBits-8&255),b.queuedBits-=8;else if(-2===d)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}function bI(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e={queue:0,queuedBits:0},f=a=>{!function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}}(a,d,c)};for(let b=0;b<a.length;b+=1)bH(a.charCodeAt(b),e,f);return b.join("")}function bJ(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};for(let b=0;b<a.length;b+=1)bH(a.charCodeAt(b),c,d);return new Uint8Array(b)}function bK(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};return a.forEach(a=>bG(a,c,d)),bG(null,c,d),b.join("")}let bL=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),bM=async(a,b,c)=>{await a.setItem(b,JSON.stringify(c))},bN=async(a,b)=>{let c=await a.getItem(b);if(!c)return null;try{return JSON.parse(c)}catch(a){return c}},bO=async(a,b)=>{await a.removeItem(b)};class bP{constructor(){this.promise=new bP.promiseConstructor((a,b)=>{this.resolve=a,this.reject=b})}}function bQ(a){let b=a.split(".");if(3!==b.length)throw new bC("Invalid JWT structure");for(let a=0;a<b.length;a++)if(!bo.test(b[a]))throw new bC("JWT not in base64url format");return{header:JSON.parse(bI(b[0])),payload:JSON.parse(bI(b[1])),signature:bJ(b[2]),raw:{header:b[0],payload:b[1]}}}async function bR(a){return await new Promise(b=>{setTimeout(()=>b(null),a)})}function bS(a){return("0"+a.toString(16)).substr(-2)}async function bT(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>String.fromCharCode(a)).join("")}async function bU(a){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a):btoa(await bT(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bV(a,b,c=!1){let d=function(){let a=new Uint32Array(56);if("undefined"==typeof crypto){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=a.length,c="";for(let d=0;d<56;d++)c+=a.charAt(Math.floor(Math.random()*b));return c}return crypto.getRandomValues(a),Array.from(a,bS).join("")}(),e=d;c&&(e+="/PASSWORD_RECOVERY"),await bM(a,`${b}-code-verifier`,e);let f=await bU(d),g=d===f?"plain":"s256";return[f,g]}bP.promiseConstructor=Promise;let bW=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,bX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bY(a){if(!bX.test(a))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bZ(){return new Proxy({},{get:(a,b)=>{if("__isUserNotAvailableProxy"===b)return!0;if("symbol"==typeof b){let a=b.toString();if("Symbol(Symbol.toPrimitive)"===a||"Symbol(Symbol.toStringTag)"===a||"Symbol(util.inspect.custom)"===a)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${b}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function b$(a){return JSON.parse(JSON.stringify(a))}let b_=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),b0=[502,503,504];async function b1(a){var b;let c,d;if(!("object"==typeof a&&null!==a&&"status"in a&&"ok"in a&&"json"in a&&"function"==typeof a.json))throw new bz(b_(a),0);if(b0.includes(a.status))throw new bz(b_(a),a.status);try{c=await a.json()}catch(a){throw new bs(b_(a),a)}let e=function(a){let b=a.headers.get(bm);if(!b||!b.match(bW))return null;try{return new Date(`${b}T00:00:00.0Z`)}catch(a){return null}}(a);if(e&&e.getTime()>=bn["2024-01-01"].timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new bB(b_(c),a.status,(null==(b=c.weak_password)?void 0:b.reasons)||[]);else if("session_not_found"===d)throw new bu}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0))throw new bB(b_(c),a.status,c.weak_password.reasons);throw new br(b_(c),a.status||500,d)}async function b2(a,b,c,d){var e;let f=Object.assign({},null==d?void 0:d.headers);f[bm]||(f[bm]=bn["2024-01-01"].name),(null==d?void 0:d.jwt)&&(f.Authorization=`Bearer ${d.jwt}`);let g=null!=(e=null==d?void 0:d.query)?e:{};(null==d?void 0:d.redirectTo)&&(g.redirect_to=d.redirectTo);let h=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",i=await b3(a,b,c+h,{headers:f,noResolveJson:null==d?void 0:d.noResolveJson},{},null==d?void 0:d.body);return(null==d?void 0:d.xform)?null==d?void 0:d.xform(i):{data:Object.assign({},i),error:null}}async function b3(a,b,c,d,e,f){let g,h,i=(h={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==d?void 0:d.headers),h.body=JSON.stringify(f),Object.assign(Object.assign({},h),e)));try{g=await a(c,Object.assign({},i))}catch(a){throw console.error(a),new bz(b_(a),0)}if(g.ok||await b1(g),null==d?void 0:d.noResolveJson)return g;try{return await g.json()}catch(a){await b1(a)}}function b4(a){var b,c,d;let e=null;(d=a).access_token&&d.refresh_token&&d.expires_in&&(e=Object.assign({},a),a.expires_at||(e.expires_at=(c=a.expires_in,Math.round(Date.now()/1e3)+c)));return{data:{session:e,user:null!=(b=a.user)?b:a},error:null}}function b5(a){let b=b4(a);return!b.error&&a.weak_password&&"object"==typeof a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&"string"==typeof a.weak_password.message&&a.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0)&&(b.data.weak_password=a.weak_password),b}function b6(a){var b;return{data:{user:null!=(b=a.user)?b:a},error:null}}function b7(a){return{data:a,error:null}}function b8(a){let{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f}=a;return{data:{properties:{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f},user:Object.assign({},W(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function b9(a){return a}let ca=["global","local","others"];class cb{constructor({url:a="",headers:b={},fetch:c}){this.url=a,this.headers=b,this.fetch=bL(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,b=ca[0]){if(0>ca.indexOf(b))throw Error(`@supabase/auth-js: Parameter scope must be one of ${ca.join(", ")}`);try{return await b2(this.fetch,"POST",`${this.url}/logout?scope=${b}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(a){if(bq(a))return{data:null,error:a};throw a}}async inviteUserByEmail(a,b={}){try{return await b2(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:b.data},headers:this.headers,redirectTo:b.redirectTo,xform:b6})}catch(a){if(bq(a))return{data:{user:null},error:a};throw a}}async generateLink(a){try{let{options:b}=a,c=W(a,["options"]),d=Object.assign(Object.assign({},c),b);return"newEmail"in c&&(d.new_email=null==c?void 0:c.newEmail,delete d.newEmail),await b2(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:b8,redirectTo:null==b?void 0:b.redirectTo})}catch(a){if(bq(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(a){try{return await b2(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:b6})}catch(a){if(bq(a))return{data:{user:null},error:a};throw a}}async listUsers(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await b2(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:b9});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(bq(a))return{data:{users:[]},error:a};throw a}}async getUserById(a){bY(a);try{return await b2(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:b6})}catch(a){if(bq(a))return{data:{user:null},error:a};throw a}}async updateUserById(a,b){bY(a);try{return await b2(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:b,headers:this.headers,xform:b6})}catch(a){if(bq(a))return{data:{user:null},error:a};throw a}}async deleteUser(a,b=!1){bY(a);try{return await b2(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:b},xform:b6})}catch(a){if(bq(a))return{data:{user:null},error:a};throw a}}async _listFactors(a){bY(a.userId);try{let{data:b,error:c}=await b2(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:b,error:c}}catch(a){if(bq(a))return{data:null,error:a};throw a}}async _deleteFactor(a){bY(a.userId),bY(a.id);try{return{data:await b2(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(a){if(bq(a))return{data:null,error:a};throw a}}async _listOAuthClients(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await b2(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:b9});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(bq(a))return{data:{clients:[]},error:a};throw a}}async _createOAuthClient(a){try{return await b2(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(bq(a))return{data:null,error:a};throw a}}async _getOAuthClient(a){try{return await b2(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(bq(a))return{data:null,error:a};throw a}}async _updateOAuthClient(a,b){try{return await b2(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:b,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(bq(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(a){try{return await b2(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(bq(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(a){try{return await b2(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(bq(a))return{data:null,error:a};throw a}}}function cc(a={}){return{getItem:b=>a[b]||null,setItem:(b,c)=>{a[b]=c},removeItem:b=>{delete a[b]}}}globalThis;class cd extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}function ce(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}class cf extends Error{constructor({message:a,code:b,cause:c,name:d}){var e;super(a,{cause:c}),this.__isWebAuthnError=!0,this.name=null!=(e=null!=d?d:c instanceof Error?c.name:void 0)?e:"Unknown Error",this.code=b}}class cg extends cf{constructor(a,b){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:b,message:a}),this.name="WebAuthnUnknownError",this.originalError=b}}let ch=new class{createNewAbortSignal(){if(this.controller){let a=Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}let a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){let a=Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}};function ci(a){return"localhost"===a||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}async function cj(a){try{let b=await navigator.credentials.create(a);if(!b)return{data:null,error:new cg("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new cg("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){var c,d,e;let{publicKey:f}=b;if(!f)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new cf({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("ConstraintError"===a.name){if((null==(c=f.authenticatorSelection)?void 0:c.requireResidentKey)===!0)return new cf({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});else if("conditional"===b.mediation&&(null==(d=f.authenticatorSelection)?void 0:d.userVerification)==="required")return new cf({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});else if((null==(e=f.authenticatorSelection)?void 0:e.userVerification)==="required")return new cf({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else if("InvalidStateError"===a.name)return new cf({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});else if("NotAllowedError"===a.name)return new cf({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("NotSupportedError"===a.name)return new cf(0===f.pubKeyCredParams.filter(a=>"public-key"===a.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!ci(b))return new cf({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(f.rp.id!==b)return new cf({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("TypeError"===a.name){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new cf({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if("UnknownError"===a.name)return new cf({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new cf({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}async function ck(a){try{let b=await navigator.credentials.get(a);if(!b)return{data:null,error:new cg("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new cg("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){let{publicKey:c}=b;if(!c)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new cf({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("NotAllowedError"===a.name)return new cf({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!ci(b))return new cf({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(c.rpId!==b)return new cf({message:`The RP ID "${c.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("UnknownError"===a.name)return new cf({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new cf({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}let cl={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cm={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cn(...a){let b=a=>null!==a&&"object"==typeof a&&!Array.isArray(a),c=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),d={};for(let e of a)if(e)for(let a in e){let f=e[a];if(void 0!==f)if(Array.isArray(f))d[a]=f;else if(c(f))d[a]=f;else if(b(f)){let c=d[a];b(c)?d[a]=cn(c,f):d[a]=cn(f)}else d[a]=f}return d}class co{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:b,friendlyName:c,signal:d},e){try{var f,g,h,i;let{data:j,error:k}=await this.client.mfa.challenge({factorId:a,webauthn:b});if(!j)return{data:null,error:k};let l=null!=d?d:ch.createNewAbortSignal();if("create"===j.webauthn.type){let{user:a}=j.webauthn.credential_options.publicKey;a.name||(a.name=`${a.id}:${c}`),a.displayName||(a.displayName=a.name)}switch(j.webauthn.type){case"create":{let b=(f=j.webauthn.credential_options.publicKey,g=null==e?void 0:e.create,cn(cl,f,g||{})),{data:c,error:d}=await cj({publicKey:b,signal:l});if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}case"request":{let b=(h=j.webauthn.credential_options.publicKey,i=null==e?void 0:e.request,cn(cm,h,i||{})),{data:c,error:d}=await ck(Object.assign(Object.assign({},j.webauthn.credential_options),{publicKey:b,signal:l}));if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}}}catch(a){if(bq(a))return{data:null,error:a};return{data:null,error:new bs("Unexpected error in challenge",a)}}}async _verify({challengeId:a,factorId:b,webauthn:c}){return this.client.mfa.verify({factorId:b,challengeId:a,webauthn:c})}async _authenticate({factorId:a,webauthn:{rpId:b,rpOrigins:c,signal:d}={}},e){if(!b)return{data:null,error:new bp("rpId is required for WebAuthn authentication")};try{1;return{data:null,error:new bs("Browser does not support WebAuthn",null)}}catch(a){if(bq(a))return{data:null,error:a};return{data:null,error:new bs("Unexpected error in authenticate",a)}}}async _register({friendlyName:a,webauthn:{rpId:b,rpOrigins:c,signal:d}={}},e){if(!b)return{data:null,error:new bp("rpId is required for WebAuthn registration")};try{1;return{data:null,error:new bs("Browser does not support WebAuthn",null)}}catch(a){if(bq(a))return{data:null,error:a};return{data:null,error:new bs("Unexpected error in register",a)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(a){"undefined"!=typeof self&&(self.globalThis=self)}let cp={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function cq(a,b,c){return await c()}let cr={};class cs{get jwks(){var a,b;return null!=(b=null==(a=cr[this.storageKey])?void 0:a.jwks)?b:{keys:[]}}set jwks(a){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,b;return null!=(b=null==(a=cr[this.storageKey])?void 0:a.cachedAt)?b:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{cachedAt:a})}constructor(a){var b;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},cp),a);this.storageKey=c.storageKey,this.instanceID=null!=(b=cs.nextInstanceID[this.storageKey])?b:0,cs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,"function"==typeof c.debug&&(this.logger=c.debug),this.instanceID,this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new cb({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=bL(c.fetch),this.lock=c.lock||cq,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:(this.persistSession,this.lock=cq),this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new co(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:(this.memoryStorage={},this.storage=cc(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=cc(this.memoryStorage)),this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${bk}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{return await this._recoverAndRefresh(),{error:null}}catch(a){if(bq(a))return this._returnResult({error:a});return this._returnResult({error:new bs("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var b,c,d;try{let{data:e,error:f}=await b2(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(c=null==(b=null==a?void 0:a.options)?void 0:b.data)?c:{},gotrue_meta_security:{captcha_token:null==(d=null==a?void 0:a.options)?void 0:d.captchaToken}},xform:b4});if(f||!e)return this._returnResult({data:{user:null,session:null},error:f});let g=e.session,h=e.user;return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(a){var b,c,d;try{let e;if("email"in a){let{email:c,password:d,options:f}=a,g=null,h=null;"pkce"===this.flowType&&([g,h]=await bV(this.storage,this.storageKey)),e=await b2(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==f?void 0:f.emailRedirectTo,body:{email:c,password:d,data:null!=(b=null==f?void 0:f.data)?b:{},gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken},code_challenge:g,code_challenge_method:h},xform:b4})}else if("phone"in a){let{phone:b,password:f,options:g}=a;e=await b2(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:f,data:null!=(c=null==g?void 0:g.data)?c:{},channel:null!=(d=null==g?void 0:g.channel)?d:"sms",gotrue_meta_security:{captcha_token:null==g?void 0:g.captchaToken}},xform:b4})}else throw new bw("You must provide either an email or phone number and a password");let{data:f,error:g}=e;if(g||!f)return await bO(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});let h=f.session,i=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:i,session:h},error:null})}catch(a){if(await bO(this.storage,`${this.storageKey}-code-verifier`),bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(a){try{let b;if("email"in a){let{email:c,password:d,options:e}=a;b=await b2(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:b5})}else if("phone"in a){let{phone:c,password:d,options:e}=a;b=await b2(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:b5})}else throw new bw("You must provide either an email or phone number and a password");let{data:c,error:d}=b;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){let a=new bv;return this._returnResult({data:{user:null,session:null},error:a})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(a){var b,c,d,e;return await this._handleProviderSignIn(a.provider,{redirectTo:null==(b=a.options)?void 0:b.redirectTo,scopes:null==(c=a.options)?void 0:c.scopes,queryParams:null==(d=a.options)?void 0:d.queryParams,skipBrowserRedirect:null==(e=a.options)?void 0:e.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){let{chain:b}=a;switch(b){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw Error(`@supabase/auth-js: Unsupported chain "${b}"`)}}async signInWithEthereum(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:k,wallet:l,statement:p,options:q}=a;if("object"!=typeof l||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href),s=await l.request({method:"eth_requestAccounts"}).then(a=>a).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!s||0===s.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let t=ce(s[0]),u=null==(c=null==q?void 0:q.signInWithEthereum)?void 0:c.chainId;u||(u=parseInt(await l.request({method:"eth_chainId"}),16)),n=function(a){var b;let{chainId:c,domain:d,expirationTime:e,issuedAt:f=new Date,nonce:g,notBefore:h,requestId:i,resources:j,scheme:k,uri:l,version:m}=a;if(!Number.isInteger(c))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${c}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!l)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==m)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(null==(b=a.statement)?void 0:b.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`);let n=ce(a.address),o=k?`${k}://${d}`:d,p=a.statement?`${a.statement}
`:"",q=`${o} wants you to sign in with your Ethereum account:
${n}

${p}`,r=`URI: ${l}
Version: ${m}
Chain ID: ${c}${g?`
Nonce: ${g}`:""}
Issued At: ${f.toISOString()}`;if(e&&(r+=`
Expiration Time: ${e.toISOString()}`),h&&(r+=`
Not Before: ${h.toISOString()}`),i&&(r+=`
Request ID: ${i}`),j){let a="\nResources:";for(let b of j){if(!b||"string"!=typeof b)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);a+=`
- ${b}`}r+=a}return`${q}
${r}`}({domain:r.host,address:t,statement:p,uri:r.href,version:"1",chainId:u,nonce:null==(d=null==q?void 0:q.signInWithEthereum)?void 0:d.nonce,issuedAt:null!=(f=null==(e=null==q?void 0:q.signInWithEthereum)?void 0:e.issuedAt)?f:new Date,expirationTime:null==(g=null==q?void 0:q.signInWithEthereum)?void 0:g.expirationTime,notBefore:null==(h=null==q?void 0:q.signInWithEthereum)?void 0:h.notBefore,requestId:null==(i=null==q?void 0:q.signInWithEthereum)?void 0:i.requestId,resources:null==(j=null==q?void 0:q.signInWithEthereum)?void 0:j.resources}),o=await l.request({method:"personal_sign",params:[(m=n,"0x"+Array.from(new TextEncoder().encode(m),a=>a.toString(16).padStart(2,"0")).join("")),t]})}try{let{data:b,error:c}=await b2(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:n,signature:o},(null==(k=a.options)?void 0:k.captchaToken)?{gotrue_meta_security:{captcha_token:null==(l=a.options)?void 0:l.captchaToken}}:null),xform:b4});if(c)throw c;if(!b||!b.session||!b.user){let a=new bv;return this._returnResult({data:{user:null,session:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:c})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSolana(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:l,wallet:m,statement:p,options:q}=a;if("object"!=typeof m||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href);if("signIn"in m&&m.signIn){let a,b=await m.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==q?void 0:q.signInWithSolana),{version:"1",domain:r.host,uri:r.href}),p?{statement:p}:null));if(Array.isArray(b)&&b[0]&&"object"==typeof b[0])a=b[0];else if(b&&"object"==typeof b&&"signedMessage"in b&&"signature"in b)a=b;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in a&&"signature"in a&&("string"==typeof a.signedMessage||a.signedMessage instanceof Uint8Array)&&a.signature instanceof Uint8Array)n="string"==typeof a.signedMessage?a.signedMessage:new TextDecoder().decode(a.signedMessage),o=a.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in m)||"function"!=typeof m.signMessage||!("publicKey"in m)||"object"!=typeof m||!m.publicKey||!("toBase58"in m.publicKey)||"function"!=typeof m.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");n=[`${r.host} wants you to sign in with your Solana account:`,m.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${r.href}`,`Issued At: ${null!=(d=null==(c=null==q?void 0:q.signInWithSolana)?void 0:c.issuedAt)?d:new Date().toISOString()}`,...(null==(e=null==q?void 0:q.signInWithSolana)?void 0:e.notBefore)?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...(null==(f=null==q?void 0:q.signInWithSolana)?void 0:f.expirationTime)?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...(null==(g=null==q?void 0:q.signInWithSolana)?void 0:g.chainId)?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...(null==(h=null==q?void 0:q.signInWithSolana)?void 0:h.nonce)?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...(null==(i=null==q?void 0:q.signInWithSolana)?void 0:i.requestId)?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...(null==(k=null==(j=null==q?void 0:q.signInWithSolana)?void 0:j.resources)?void 0:k.length)?["Resources",...q.signInWithSolana.resources.map(a=>`- ${a}`)]:[]].join("\n");let a=await m.signMessage(new TextEncoder().encode(n),"utf8");if(!a||!(a instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");o=a}}try{let{data:b,error:c}=await b2(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:n,signature:bK(o)},(null==(l=a.options)?void 0:l.captchaToken)?{gotrue_meta_security:{captcha_token:null==(m=a.options)?void 0:m.captchaToken}}:null),xform:b4});if(c)throw c;if(!b||!b.session||!b.user){let a=new bv;return this._returnResult({data:{user:null,session:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:c})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _exchangeCodeForSession(a){let b=await bN(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(null!=b?b:"").split("/");try{if(!c&&"pkce"===this.flowType)throw new by;let{data:b,error:e}=await b2(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:c},xform:b4});if(await bO(this.storage,`${this.storageKey}-code-verifier`),e)throw e;if(!b||!b.session||!b.user){let a=new bv;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign(Object.assign({},b),{redirectType:null!=d?d:null}),error:e})}catch(a){if(await bO(this.storage,`${this.storageKey}-code-verifier`),bq(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(a){try{let{options:b,provider:c,token:d,access_token:e,nonce:f}=a,{data:g,error:h}=await b2(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:e,nonce:f,gotrue_meta_security:{captcha_token:null==b?void 0:b.captchaToken}},xform:b4});if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){let a=new bv;return this._returnResult({data:{user:null,session:null},error:a})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(a){var b,c,d,e,f;try{if("email"in a){let{email:d,options:e}=a,f=null,g=null;"pkce"===this.flowType&&([f,g]=await bV(this.storage,this.storageKey));let{error:h}=await b2(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:null!=(b=null==e?void 0:e.data)?b:{},create_user:null==(c=null==e?void 0:e.shouldCreateUser)||c,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:null==e?void 0:e.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in a){let{phone:b,options:c}=a,{data:g,error:h}=await b2(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:null!=(d=null==c?void 0:c.data)?d:{},create_user:null==(e=null==c?void 0:c.shouldCreateUser)||e,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken},channel:null!=(f=null==c?void 0:c.channel)?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:h})}throw new bw("You must provide either an email or phone number.")}catch(a){if(await bO(this.storage,`${this.storageKey}-code-verifier`),bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(a){var b,c;try{let d,e;"options"in a&&(d=null==(b=a.options)?void 0:b.redirectTo,e=null==(c=a.options)?void 0:c.captchaToken);let{data:f,error:g}=await b2(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:e}}),redirectTo:d,xform:b4});if(g)throw g;if(!f)throw Error("An error occurred on token verification.");let h=f.session,i=f.user;return(null==h?void 0:h.access_token)&&(await this._saveSession(h),await this._notifyAllSubscribers("recovery"==a.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:i,session:h},error:null})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(a){var b,c,d,e;try{let f=null,g=null;"pkce"===this.flowType&&([f,g]=await bV(this.storage,this.storageKey));let h=await b2(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:null!=(c=null==(b=a.options)?void 0:b.redirectTo)?c:void 0}),(null==(d=null==a?void 0:a.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:b7});return null==(e=h.data)||e.url,this._returnResult(h)}catch(a){if(await bO(this.storage,`${this.storageKey}-code-verifier`),bq(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;if(c)throw c;if(!b)throw new bu;let{error:d}=await b2(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:b.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{let b=`${this.url}/resend`;if("email"in a){let{email:c,type:d,options:e}=a,{error:f}=await b2(this.fetch,"POST",b,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},redirectTo:null==e?void 0:e.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in a){let{phone:c,type:d,options:e}=a,{data:f,error:g}=await b2(this.fetch,"POST",b,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==f?void 0:f.message_id},error:g})}throw new bw("You must provide either an email or phone number and a type")}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(a,b){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){let a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await b()))();return this.pendingInLock.push((async()=>{try{await c}catch(a){}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let a=b();for(this.pendingInLock.push((async()=>{try{await a}catch(a){}})()),await a;this.pendingInLock.length;){let a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{let b=await this.__loadSession();return await a(b)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let b=null,c=await bN(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",c),null!==c&&(this._isValidSession(c)?b=c:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!b)return{data:{session:null},error:null};let d=!!b.expires_at&&1e3*b.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",b.expires_at),!d){if(this.userStorage){let a=await bN(this.userStorage,this.storageKey+"-user");(null==a?void 0:a.user)?b.user=a.user:b.user=bZ()}if(this.storage.isServer&&b.user&&!b.user.__isUserNotAvailableProxy){var a;let c={value:this.suppressGetSessionWarning};b.user=(a=b.user,new Proxy(a,{get:(a,b,d)=>{if("__isInsecureUserWarningProxy"===b)return!0;if("symbol"==typeof b){let c=b.toString();if("Symbol(Symbol.toPrimitive)"===c||"Symbol(Symbol.toStringTag)"===c||"Symbol(util.inspect.custom)"===c||"Symbol(nodejs.util.inspect.custom)"===c)return Reflect.get(a,b,d)}return c.value||"string"!=typeof b||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c.value=!0),Reflect.get(a,b,d)}})),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:b},error:null}}let{data:e,error:f}=await this._callRefreshToken(b.refresh_token);if(f)return this._returnResult({data:{session:null},error:f});return this._returnResult({data:{session:e},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;let b=await this._acquireLock(-1,async()=>await this._getUser());return b.data.user&&(this.suppressGetSessionWarning=!0),b}async _getUser(a){try{if(a)return await b2(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:b6});return await this._useSession(async a=>{var b,c,d;let{data:e,error:f}=a;if(f)throw f;return(null==(b=e.session)?void 0:b.access_token)||this.hasCustomAuthorizationHeader?await b2(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0,xform:b6}):{data:{user:null},error:new bu}})}catch(a){if(bq(a))return bq(a)&&"AuthSessionMissingError"===a.name&&(await this._removeSession(),await bO(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(a,b={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,b))}async _updateUser(a,b={}){try{return await this._useSession(async c=>{let{data:d,error:e}=c;if(e)throw e;if(!d.session)throw new bu;let f=d.session,g=null,h=null;"pkce"===this.flowType&&null!=a.email&&([g,h]=await bV(this.storage,this.storageKey));let{data:i,error:j}=await b2(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==b?void 0:b.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:h}),jwt:f.access_token,xform:b6});if(j)throw j;return f.user=i.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(a){if(await bO(this.storage,`${this.storageKey}-code-verifier`),bq(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new bu;let b=Date.now()/1e3,c=b,d=!0,e=null,{payload:f}=bQ(a.access_token);if(f.exp&&(d=(c=f.exp)<=b),d){let{data:b,error:c}=await this._callRefreshToken(a.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!b)return{data:{user:null,session:null},error:null};e=b}else{let{data:d,error:f}=await this._getUser(a.access_token);if(f)throw f;e={access_token:a.access_token,refresh_token:a.refresh_token,user:d.user,token_type:"bearer",expires_in:c-b,expires_at:c},await this._saveSession(e),await this._notifyAllSubscribers("SIGNED_IN",e)}return this._returnResult({data:{user:e.user,session:e},error:null})}catch(a){if(bq(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async b=>{var c;if(!a){let{data:d,error:e}=b;if(e)throw e;a=null!=(c=d.session)?c:void 0}if(!(null==a?void 0:a.refresh_token))throw new bu;let{data:d,error:e}=await this._callRefreshToken(a.refresh_token);return e?this._returnResult({data:{user:null,session:null},error:e}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(a,b){try{throw new bx("No browser detected.")}catch(a){if(bq(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(a){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){let b=await bN(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&b)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return this._returnResult({error:e});let f=null==(c=d.session)?void 0:c.access_token;if(f){let{error:b}=await this.admin.signOut(f,a);if(b&&!(bq(b)&&"AuthApiError"===b.name&&(404===b.status||401===b.status||403===b.status)))return this._returnResult({error:b})}return"others"!==a&&(await this._removeSession(),await bO(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){let b=Symbol("auth-callback"),c={id:b,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",b),this.stateChangeEmitters.delete(b)}};return this._debug("#onAuthStateChange()","registered callback with id",b),this.stateChangeEmitters.set(b,c),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(b)})})(),{data:{subscription:c}}}async _emitInitialSession(a){return await this._useSession(async b=>{var c,d;try{let{data:{session:d},error:e}=b;if(e)throw e;await (null==(c=this.stateChangeEmitters.get(a))?void 0:c.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(b){await (null==(d=this.stateChangeEmitters.get(a))?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",b),console.error(b)}})}async resetPasswordForEmail(a,b={}){let c=null,d=null;"pkce"===this.flowType&&([c,d]=await bV(this.storage,this.storageKey,!0));try{return await b2(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:b.captchaToken}},headers:this.headers,redirectTo:b.redirectTo})}catch(a){if(await bO(this.storage,`${this.storageKey}-code-verifier`),bq(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var a;try{let{data:b,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:null!=(a=b.user.identities)?a:[]},error:null})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){try{let{data:b,error:c}=await this._useSession(async b=>{var c,d,e,f,g;let{data:h,error:i}=b;if(i)throw i;let j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:null==(c=a.options)?void 0:c.redirectTo,scopes:null==(d=a.options)?void 0:d.scopes,queryParams:null==(e=a.options)?void 0:e.queryParams,skipBrowserRedirect:!0});return await b2(this.fetch,"GET",j,{headers:this.headers,jwt:null!=(g=null==(f=h.session)?void 0:f.access_token)?g:void 0})});if(c)throw c;return this._returnResult({data:{provider:a.provider,url:null==b?void 0:b.url},error:null})}catch(b){if(bq(b))return this._returnResult({data:{provider:a.provider,url:null},error:b});throw b}}async linkIdentityIdToken(a){return await this._useSession(async b=>{var c;try{let{error:d,data:{session:e}}=b;if(d)throw d;let{options:f,provider:g,token:h,access_token:i,nonce:j}=a,{data:k,error:l}=await b2(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(c=null==e?void 0:e.access_token)?c:void 0,body:{provider:g,id_token:h,access_token:i,nonce:j,link_identity:!0,gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken}},xform:b4});if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!k||!k.session||!k.user)return this._returnResult({data:{user:null,session:null},error:new bv});return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:l})}catch(a){if(await bO(this.storage,`${this.storageKey}-code-verifier`),bq(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)throw f;return await b2(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0})})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(a){let b=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(b,"begin");try{var c,d;let e=Date.now();return await (c=async c=>(c>0&&await bR(200*Math.pow(2,c-1)),this._debug(b,"refreshing attempt",c),await b2(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:b4})),d=(a,b)=>{let c=200*Math.pow(2,a);return b&&bA(b)&&Date.now()+c-e<3e4},new Promise((a,b)=>{(async()=>{for(let e=0;e<1/0;e++)try{let b=await c(e);if(!d(e,null,b))return void a(b)}catch(a){if(!d(e,a))return void b(a)}})()}))}catch(a){if(this._debug(b,"error",a),bq(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(b,"end")}}_isValidSession(a){return"object"==typeof a&&null!==a&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,b){let c=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:b.redirectTo,scopes:b.scopes,queryParams:b.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",b,"url",c),{data:{provider:a,url:c},error:null}}async _recoverAndRefresh(){var a,b;let c="#_recoverAndRefresh()";this._debug(c,"begin");try{let d=await bN(this.storage,this.storageKey);if(d&&this.userStorage){let b=await bN(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:d.user},await bM(this.userStorage,this.storageKey+"-user",b)),d.user=null!=(a=null==b?void 0:b.user)?a:bZ()}else if(d&&!d.user&&!d.user){let a=await bN(this.storage,this.storageKey+"-user");a&&(null==a?void 0:a.user)?(d.user=a.user,await bO(this.storage,this.storageKey+"-user"),await bM(this.storage,this.storageKey,d)):d.user=bZ()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),null!==d&&await this._removeSession();return}let e=(null!=(b=d.expires_at)?b:1/0)*1e3-Date.now()<9e4;if(this._debug(c,`session has${e?"":" not"} expired with margin of 90000s`),e){if(this.autoRefreshToken&&d.refresh_token){let{error:a}=await this._callRefreshToken(d.refresh_token);a&&(console.error(a),bA(a)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(d.user&&!0===d.user.__isUserNotAvailableProxy)try{let{data:a,error:b}=await this._getUser(d.access_token);!b&&(null==a?void 0:a.user)?(d.user=a.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(c,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(a){this._debug(c,"error",a),console.error(a);return}finally{this._debug(c,"end")}}async _callRefreshToken(a){var b,c;if(!a)throw new bu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new bP;let{data:b,error:c}=await this._refreshAccessToken(a);if(c)throw c;if(!b.session)throw new bu;await this._saveSession(b.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",b.session);let d={data:b.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(d,"error",a),bq(a)){let c={data:null,error:a};return bA(a)||await this._removeSession(),null==(b=this.refreshingDeferred)||b.resolve(c),c}throw null==(c=this.refreshingDeferred)||c.reject(a),a}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,b,c=!0){let d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",b,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:a,session:b});let d=[],e=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(a,b)}catch(a){d.push(a)}});if(await Promise.all(e),d.length>0){for(let a=0;a<d.length;a+=1)console.error(d[a]);throw d[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await bO(this.storage,`${this.storageKey}-code-verifier`);let b=Object.assign({},a),c=b.user&&!0===b.user.__isUserNotAvailableProxy;if(this.userStorage){!c&&b.user&&await bM(this.userStorage,this.storageKey+"-user",{user:b.user});let a=Object.assign({},b);delete a.user;let d=b$(a);await bM(this.storage,this.storageKey,d)}else{let a=b$(b);await bM(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await bO(this.storage,this.storageKey),await bO(this.storage,this.storageKey+"-code-verifier"),await bO(this.storage,this.storageKey+"-user"),this.userStorage&&await bO(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()"),this.visibilityChangedCallback,this.visibilityChangedCallback=null}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let a=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=a,a&&"object"==typeof a&&"function"==typeof a.unref?a.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let a=Date.now();try{return await this._useSession(async b=>{let{data:{session:c}}=b;if(!c||!c.refresh_token||!c.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let d=Math.floor((1e3*c.expires_at-a)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),d<=3&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof cd)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){return this._debug("#_handleVisibilityChange()"),this.autoRefreshToken&&this.startAutoRefresh(),!1}async _onVisibilityChanged(a){let b=`#_onVisibilityChanged(${a})`;this._debug(b,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(b,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,b,c){let d=[`provider=${encodeURIComponent(b)}`];if((null==c?void 0:c.redirectTo)&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),(null==c?void 0:c.scopes)&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),"pkce"===this.flowType){let[a,b]=await bV(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push(c.toString())}if(null==c?void 0:c.queryParams){let a=new URLSearchParams(c.queryParams);d.push(a.toString())}return(null==c?void 0:c.skipBrowserRedirect)&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?this._returnResult({data:null,error:e}):await b2(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)return this._returnResult({data:null,error:f});let g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},"phone"===a.factorType?{phone:a.phone}:"totp"===a.factorType?{issuer:a.issuer}:{}),{data:h,error:i}=await b2(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:null==(c=null==e?void 0:e.session)?void 0:c.access_token});return i?this._returnResult({data:null,error:i}):("totp"===a.factorType&&"totp"===h.type&&(null==(d=null==h?void 0:h.totp)?void 0:d.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c,d,e;let{data:f,error:g}=b;if(g)return this._returnResult({data:null,error:g});let h=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:"create"===a.webauthn.type?(d=a.webauthn.credential_response,"toJSON"in d&&"function"==typeof d.toJSON?d.toJSON():{id:d.id,rawId:d.id,response:{attestationObject:bK(new Uint8Array(d.response.attestationObject)),clientDataJSON:bK(new Uint8Array(d.response.clientDataJSON))},type:"public-key",clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:null!=(e=d.authenticatorAttachment)?e:void 0}):function(a){var b;if("toJSON"in a&&"function"==typeof a.toJSON)return a.toJSON();let c=a.getClientExtensionResults(),d=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:bK(new Uint8Array(d.authenticatorData)),clientDataJSON:bK(new Uint8Array(d.clientDataJSON)),signature:bK(new Uint8Array(d.signature)),userHandle:d.userHandle?bK(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:null!=(b=a.authenticatorAttachment)?b:void 0}}(a.webauthn.credential_response)})}:{code:a.code}),{data:i,error:j}=await b2(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:h,headers:this.headers,jwt:null==(c=null==f?void 0:f.session)?void 0:c.access_token});return j?this._returnResult({data:null,error:j}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:j}))})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return this._returnResult({data:null,error:e});let f=await b2(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token});if(f.error)return f;let{data:g}=f;if("webauthn"!==g.type)return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(a);let{challenge:b,user:c,excludeCredentials:d}=a,e=W(a,["challenge","user","excludeCredentials"]),f=bJ(b).buffer,g=Object.assign(Object.assign({},c),{id:bJ(c.id).buffer}),h=Object.assign(Object.assign({},e),{challenge:f,user:g});if(d&&d.length>0){h.excludeCredentials=Array(d.length);for(let a=0;a<d.length;a++){let b=d[a];h.excludeCredentials[a]=Object.assign(Object.assign({},b),{id:bJ(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(a);let{challenge:b,allowCredentials:c}=a,d=W(a,["challenge","allowCredentials"]),e=bJ(b).buffer,f=Object.assign(Object.assign({},d),{challenge:e});if(c&&c.length>0){f.allowCredentials=Array(c.length);for(let a=0;a<c.length;a++){let b=c[a];f.allowCredentials[a]=Object.assign(Object.assign({},b),{id:bJ(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return f}(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(a){let{data:b,error:c}=await this._challenge({factorId:a.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:a.factorId,challengeId:b.id,code:a.code})}async _listFactors(){var a;let{data:{user:b},error:c}=await this.getUser();if(c)return{data:null,error:c};let d={all:[],phone:[],totp:[],webauthn:[]};for(let c of null!=(a=null==b?void 0:b.factors)?a:[])d.all.push(c),"verified"===c.status&&d[c.factor_type].push(c);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var a,b;let{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:e}=bQ(c.access_token),f=null;e.aal&&(f=e.aal);let g=f;return(null!=(b=null==(a=c.user.factors)?void 0:a.filter(a=>"verified"===a.status))?b:[]).length>0&&(g="aal2"),{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:e.amr||[]},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;return d?this._returnResult({data:null,error:d}):c?await b2(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:c.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new bu})})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(a,b){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new bu});let e=await b2(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return e.data&&e.data.redirect_url,e})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(a,b){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new bu});let e=await b2(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return e.data&&e.data.redirect_url,e})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;return c?this._returnResult({data:null,error:c}):b?await b2(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:b.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new bu})})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;return d?this._returnResult({data:null,error:d}):c?(await b2(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new bu})})}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(a,b={keys:[]}){let c=b.keys.find(b=>b.kid===a);if(c)return c;let d=Date.now();if((c=this.jwks.keys.find(b=>b.kid===a))&&this.jwks_cached_at+6e5>d)return c;let{data:e,error:f}=await b2(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return e.keys&&0!==e.keys.length&&(this.jwks=e,this.jwks_cached_at=d,c=e.keys.find(b=>b.kid===a))?c:null}async getClaims(a,b={}){try{var c;let d,e=a;if(!e){let{data:a,error:b}=await this.getSession();if(b||!a.session)return this._returnResult({data:null,error:b});e=a.session.access_token}let{header:f,payload:g,signature:h,raw:{header:i,payload:j}}=bQ(e);(null==b?void 0:b.allowExpired)||function(a){if(!a)throw Error("Missing exp claim");if(a<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(g.exp);let k=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,(null==b?void 0:b.keys)?{keys:b.keys}:null==b?void 0:b.jwks);if(!k){let{error:a}=await this.getUser(e);if(a)throw a;return{data:{claims:g,header:f,signature:h},error:null}}let l=function(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(f.alg),m=await crypto.subtle.importKey("jwk",k,l,!0,["verify"]);if(!await crypto.subtle.verify(l,m,h,(c=`${i}.${j}`,d=[],!function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(c,a=>d.push(a)),new Uint8Array(d))))throw new bC("Invalid JWT signature");return{data:{claims:g,header:f,signature:h},error:null}}catch(a){if(bq(a))return this._returnResult({data:null,error:a});throw a}}}cs.nextInstanceID={};let ct=cs,cu="";cu="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let cv={headers:{"X-Client-Info":`supabase-js-${cu}/2.89.0`}},cw={schema:"public"},cx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cy={};function cz(a){return(cz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function cA(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function cB(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?cA(Object(c),!0).forEach(function(b){!function(a,b,c){var d;(d=function(a,b){if("object"!=cz(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=cz(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"),(b="symbol"==cz(d)?d:d+"")in a)?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):cA(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var cC=class extends ct{constructor(a){super(a)}},cD=class{constructor(a,b,c){var d,e,f;this.supabaseUrl=a,this.supabaseKey=b;const g=function(a){let b=null==a?void 0:a.trim();if(!b)throw Error("supabaseUrl is required.");if(!b.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b.endsWith("/")?b:b+"/")}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(a);if(!b)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const h=`sb-${g.hostname.split(".")[0]}-auth-token`,i=function(a,b){var c,d;let{db:e,auth:f,realtime:g,global:h}=a,{db:i,auth:j,realtime:k,global:l}=b,m={db:cB(cB({},i),e),auth:cB(cB({},j),f),realtime:cB(cB({},k),g),storage:{},global:cB(cB(cB({},l),h),{},{headers:cB(cB({},null!=(c=null==l?void 0:l.headers)?c:{}),null!=(d=null==h?void 0:h.headers)?d:{})}),accessToken:async()=>""};return a.accessToken?m.accessToken=a.accessToken:delete m.accessToken,m}(null!=c?c:{},{db:cw,realtime:cy,auth:cB(cB({},cx),{},{storageKey:h}),global:cv});this.storageKey=null!=(d=i.auth.storageKey)?d:"",this.headers=null!=(e=i.global.headers)?e:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(a,b)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(f=i.auth)?f:{},this.headers,i.global.fetch),this.fetch=((a,b,c)=>{let d=c?(...a)=>c(...a):(...a)=>fetch(...a),e=Headers;return async(c,f)=>{var g;let h=null!=(g=await b())?g:a,i=new e(null==f?void 0:f.headers);return i.has("apikey")||i.set("apikey",a),i.has("Authorization")||i.set("Authorization",`Bearer ${h}`),d(c,cB(cB({},f),{},{headers:i}))}})(b,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(cB({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.accessToken&&this.accessToken().then(a=>this.realtime.setAuth(a)).catch(a=>console.warn("Failed to set initial Realtime auth token:",a)),this.rest=new ac(new URL("rest/v1",g).href,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),this.storage=new bj(this.storageUrl.href,this.headers,this.fetch,null==c?void 0:c.storage),i.accessToken||this._listenForAuthEvents()}get functions(){return new X(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,b={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,b,c)}channel(a,b={config:{}}){return this.realtime.channel(a,b)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,b;if(this.accessToken)return await this.accessToken();let{data:c}=await this.auth.getSession();return null!=(a=null==(b=c.session)?void 0:b.access_token)?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,storageKey:f,flowType:g,lock:h,debug:i,throwOnError:j},k,l){let m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cC({url:this.authUrl.href,headers:cB(cB({},m),k),storageKey:f,autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,flowType:g,lock:h,debug:i,throwOnError:j,fetch:l,hasCustomAuthorizationHeader:Object.keys(this.headers).some(a=>"authorization"===a.toLowerCase())})}_initRealtimeClient(a){return new ax(this.realtimeUrl.href,cB(cB({},a),{},{params:cB(cB({},{apikey:this.supabaseKey}),null==a?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,b)=>{this._handleTokenChanged(a,"CLIENT",null==b?void 0:b.access_token)})}_handleTokenChanged(a,b,c){("TOKEN_REFRESHED"===a||"SIGNED_IN"===a)&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):"SIGNED_OUT"===a&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0)}};(function(){if("undefined"==typeof process)return!1;let a=process.version;if(null==a)return!1;let b=a.match(/^v(\d+)\./);return!!b&&18>=parseInt(b[1],10)})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let cE=new cD("https://ukfljyhpkhzadjwhsvzf.supabase.co","sb_publishable_KKQJ_me6VhhkNQDeoJvEZw_9vJFPeIW",void 0);function cF(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function cG(...a){return b=>{let c=!1,d=a.map(a=>{let d=cF(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():cF(a[b],null)}}}}function cH(...a){return Q.useCallback(cG(...a),a)}var cI=Symbol.for("react.lazy"),cJ=Q[" use ".trim().toString()];function cK(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===cI&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}function cL(a){var b;let c,d=(b=a,(c=Q.forwardRef((a,b)=>{let{children:c,...d}=a;if(cK(c)&&"function"==typeof cJ&&(c=cJ(c._payload)),Q.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==Q.Fragment&&(h.ref=b?cG(b,g):g),Q.cloneElement(c,h)}return Q.Children.count(c)>1?Q.Children.only(null):null})).displayName=`${b}.SlotClone`,c),e=Q.forwardRef((a,b)=>{let{children:c,...e}=a;cK(c)&&"function"==typeof cJ&&(c=cJ(c._payload));let f=Q.Children.toArray(c),g=f.find(cO);if(g){let a=g.props.children,c=f.map(b=>b!==g?b:Q.Children.count(a)>1?Q.Children.only(null):Q.isValidElement(a)?a.props.children:null);return(0,P.jsx)(d,{...e,ref:b,children:Q.isValidElement(a)?Q.cloneElement(a,void 0,c):null})}return(0,P.jsx)(d,{...e,ref:b,children:c})});return e.displayName=`${a}.Slot`,e}var cM=cL("Slot"),cN=Symbol("radix.slottable");function cO(a){return Q.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===cN}function cP(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}let cQ=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,cR=(a,b)=>c=>{var d;if((null==b?void 0:b.variants)==null)return cP(a,null==c?void 0:c.class,null==c?void 0:c.className);let{variants:e,defaultVariants:f}=b,g=Object.keys(e).map(a=>{let b=null==c?void 0:c[a],d=null==f?void 0:f[a];if(null===b)return null;let g=cQ(b)||cQ(d);return e[a][g]}),h=c&&Object.entries(c).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return cP(a,g,null==b||null==(d=b.compoundVariants)?void 0:d.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...h}[b]):({...f,...h})[b]===c})?[...a,c,d]:a},[]),null==c?void 0:c.class,null==c?void 0:c.className)},cS=(a=new Map,b=null,c)=>({nextPart:a,validators:b,classGroupId:c}),cT=[],cU=(a,b,c)=>{if(0==a.length-b)return c.classGroupId;let d=a[b],e=c.nextPart.get(d);if(e){let c=cU(a,b+1,e);if(c)return c}let f=c.validators;if(null===f)return;let g=0===b?a.join("-"):a.slice(b).join("-"),h=f.length;for(let a=0;a<h;a++){let b=f[a];if(b.validator(g))return b.classGroupId}},cV=(a,b)=>{let c=cS();for(let d in a)cW(a[d],c,d,b);return c},cW=(a,b,c,d)=>{let e=a.length;for(let f=0;f<e;f++)cX(a[f],b,c,d)},cX=(a,b,c,d)=>{"string"==typeof a?cY(a,b,c):"function"==typeof a?cZ(a,b,c,d):c$(a,b,c,d)},cY=(a,b,c)=>{(""===a?b:c_(b,a)).classGroupId=c},cZ=(a,b,c,d)=>{c0(a)?cW(a(d),b,c,d):(null===b.validators&&(b.validators=[]),b.validators.push({classGroupId:c,validator:a}))},c$=(a,b,c,d)=>{let e=Object.entries(a),f=e.length;for(let a=0;a<f;a++){let[f,g]=e[a];cW(g,c_(b,f),c,d)}},c_=(a,b)=>{let c=a,d=b.split("-"),e=d.length;for(let a=0;a<e;a++){let b=d[a],e=c.nextPart.get(b);e||(e=cS(),c.nextPart.set(b,e)),c=e}return c},c0=a=>"isThemeGetter"in a&&!0===a.isThemeGetter,c1=[],c2=(a,b,c,d,e)=>({modifiers:a,hasImportantModifier:b,baseClassName:c,maybePostfixModifierPosition:d,isExternal:e}),c3=/\s+/,c4=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=c4(a[d]))&&(c&&(c+=" "),c+=b);return c},c5=[],c6=a=>{let b=b=>b[a]||c5;return b.isThemeGetter=!0,b},c7=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,c8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,c9=/^\d+\/\d+$/,da=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,db=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,dd=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,de=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,df=a=>c9.test(a),dg=a=>!!a&&!Number.isNaN(Number(a)),dh=a=>!!a&&Number.isInteger(Number(a)),di=a=>a.endsWith("%")&&dg(a.slice(0,-1)),dj=a=>da.test(a),dk=()=>!0,dl=a=>db.test(a)&&!dc.test(a),dm=()=>!1,dn=a=>dd.test(a),dp=a=>de.test(a),dq=a=>!ds(a)&&!dy(a),dr=a=>dF(a,dJ,dm),ds=a=>c7.test(a),dt=a=>dF(a,dK,dl),du=a=>dF(a,dL,dg),dv=a=>dF(a,dH,dm),dw=a=>dF(a,dI,dp),dx=a=>dF(a,dN,dn),dy=a=>c8.test(a),dz=a=>dG(a,dK),dA=a=>dG(a,dM),dB=a=>dG(a,dH),dC=a=>dG(a,dJ),dD=a=>dG(a,dI),dE=a=>dG(a,dN,!0),dF=(a,b,c)=>{let d=c7.exec(a);return!!d&&(d[1]?b(d[1]):c(d[2]))},dG=(a,b,c=!1)=>{let d=c8.exec(a);return!!d&&(d[1]?b(d[1]):c)},dH=a=>"position"===a||"percentage"===a,dI=a=>"image"===a||"url"===a,dJ=a=>"length"===a||"size"===a||"bg-size"===a,dK=a=>"length"===a,dL=a=>"number"===a,dM=a=>"family-name"===a,dN=a=>"shadow"===a,dO=((a,...b)=>{let c,d,e,f,g=a=>{let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e,sortModifiers:f}=b,g=[],h=a.trim().split(c3),i="";for(let a=h.length-1;a>=0;a-=1){let b=h[a],{isExternal:j,modifiers:k,hasImportantModifier:l,baseClassName:m,maybePostfixModifierPosition:n}=c(b);if(j){i=b+(i.length>0?" "+i:i);continue}let o=!!n,p=d(o?m.substring(0,n):m);if(!p){if(!o||!(p=d(m))){i=b+(i.length>0?" "+i:i);continue}o=!1}let q=0===k.length?"":1===k.length?k[0]:f(k).join(":"),r=l?q+"!":q,s=r+p;if(g.indexOf(s)>-1)continue;g.push(s);let t=e(p,o);for(let a=0;a<t.length;++a){let b=t[a];g.push(r+b)}i=b+(i.length>0?" "+i:i)}return i})(a,c);return e(a,f),f};return f=h=>{var i;let j;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=Object.create(null),d=Object.create(null),e=(e,f)=>{c[e]=f,++b>a&&(b=0,d=c,c=Object.create(null))};return{get(a){let b=c[a];return void 0!==b?b:void 0!==(b=d[a])?(e(a,b),b):void 0},set(a,b){a in c?c[a]=b:e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{prefix:b,experimentalParseClassName:c}=a,d=a=>{let b,c=[],d=0,e=0,f=0,g=a.length;for(let h=0;h<g;h++){let g=a[h];if(0===d&&0===e){if(":"===g){c.push(a.slice(f,h)),f=h+1;continue}if("/"===g){b=h;continue}}"["===g?d++:"]"===g?d--:"("===g?e++:")"===g&&e--}let h=0===c.length?a:a.slice(f),i=h,j=!1;return h.endsWith("!")?(i=h.slice(0,-1),j=!0):h.startsWith("!")&&(i=h.slice(1),j=!0),c2(c,j,i,b&&b>f?b-f:void 0)};if(b){let a=b+":",c=d;d=b=>b.startsWith(a)?c(b.slice(a.length)):c2(c1,!1,b,void 0,!0)}if(c){let a=d;d=b=>c({className:b,parseClassName:a})}return d})(i),sortModifiers:(j=new Map,i.orderSensitiveModifiers.forEach((a,b)=>{j.set(a,1e6+b)}),a=>{let b=[],c=[];for(let d=0;d<a.length;d++){let e=a[d],f="["===e[0],g=j.has(e);f||g?(c.length>0&&(c.sort(),b.push(...c),c=[]),b.push(e)):c.push(e)}return c.length>0&&(c.sort(),b.push(...c)),b}),...(a=>{let b=(a=>{let{theme:b,classGroups:c}=a;return cV(c,b)})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]")){var c;let b,d,e;return -1===(c=a).slice(1,-1).indexOf(":")?void 0:(d=(b=c.slice(1,-1)).indexOf(":"),(e=b.slice(0,d))?"arbitrary.."+e:void 0)}let d=a.split("-"),e=+(""===d[0]&&d.length>1);return cU(d,e,b)},getConflictingClassGroupIds:(a,b)=>{if(b){let b=d[a],e=c[a];if(b){if(e){let a=Array(e.length+b.length);for(let b=0;b<e.length;b++)a[b]=e[b];for(let c=0;c<b.length;c++)a[e.length+c]=b[c];return a}return b}return e||cT}return c[a]||cT}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)},(...a)=>f(((...a)=>{let b,c,d=0,e="";for(;d<a.length;)(b=a[d++])&&(c=c4(b))&&(e&&(e+=" "),e+=c);return e})(...a))})(()=>{let a=c6("color"),b=c6("font"),c=c6("text"),d=c6("font-weight"),e=c6("tracking"),f=c6("leading"),g=c6("breakpoint"),h=c6("container"),i=c6("spacing"),j=c6("radius"),k=c6("shadow"),l=c6("inset-shadow"),m=c6("text-shadow"),n=c6("drop-shadow"),o=c6("blur"),p=c6("perspective"),q=c6("aspect"),r=c6("ease"),s=c6("animate"),t=()=>["auto","avoid","all","avoid-page","page","left","right","column"],u=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...u(),dy,ds],w=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],y=()=>[dy,ds,i],z=()=>[df,"full","auto",...y()],A=()=>[dh,"none","subgrid",dy,ds],B=()=>["auto",{span:["full",dh,dy,ds]},dh,dy,ds],C=()=>[dh,"auto",dy,ds],D=()=>["auto","min","max","fr",dy,ds],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...y()],H=()=>[df,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],I=()=>[a,dy,ds],J=()=>[...u(),dB,dv,{position:[dy,ds]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",dC,dr,{size:[dy,ds]}],M=()=>[di,dz,dt],N=()=>["","none","full",j,dy,ds],O=()=>["",dg,dz,dt],P=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>[dg,di,dB,dv],S=()=>["","none",o,dy,ds],T=()=>["none",dg,dy,ds],U=()=>["none",dg,dy,ds],V=()=>[dg,dy,ds],W=()=>[df,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[dj],breakpoint:[dj],color:[dk],container:[dj],"drop-shadow":[dj],ease:["in","out","in-out"],font:[dq],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[dj],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[dj],shadow:[dj],spacing:["px",dg],text:[dj],"text-shadow":[dj],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",df,ds,dy,q]}],container:["container"],columns:[{columns:[dg,ds,dy,h]}],"break-after":[{"break-after":t()}],"break-before":[{"break-before":t()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[dh,"auto",dy,ds]}],basis:[{basis:[df,"full","auto",h,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[dg,df,"auto","initial","none",ds]}],grow:[{grow:["",dg,dy,ds]}],shrink:[{shrink:["",dg,dy,ds]}],order:[{order:[dh,"first","last","none",dy,ds]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[h,"screen",...H()]}],"min-w":[{"min-w":[h,"screen","none",...H()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[g]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",c,dz,dt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[d,dy,du]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",di,ds]}],"font-family":[{font:[dA,ds,b]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[e,dy,ds]}],"line-clamp":[{"line-clamp":[dg,"none",dy,du]}],leading:[{leading:[f,...y()]}],"list-image":[{"list-image":["none",dy,ds]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",dy,ds]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...P(),"wavy"]}],"text-decoration-thickness":[{decoration:[dg,"from-font","auto",dy,dt]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[dg,"auto",dy,ds]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",dy,ds]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",dy,ds]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},dh,dy,ds],radial:["",dy,ds],conic:[dh,dy,ds]},dD,dw]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:N()}],"rounded-s":[{"rounded-s":N()}],"rounded-e":[{"rounded-e":N()}],"rounded-t":[{"rounded-t":N()}],"rounded-r":[{"rounded-r":N()}],"rounded-b":[{"rounded-b":N()}],"rounded-l":[{"rounded-l":N()}],"rounded-ss":[{"rounded-ss":N()}],"rounded-se":[{"rounded-se":N()}],"rounded-ee":[{"rounded-ee":N()}],"rounded-es":[{"rounded-es":N()}],"rounded-tl":[{"rounded-tl":N()}],"rounded-tr":[{"rounded-tr":N()}],"rounded-br":[{"rounded-br":N()}],"rounded-bl":[{"rounded-bl":N()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...P(),"hidden","none"]}],"divide-style":[{divide:[...P(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...P(),"none","hidden"]}],"outline-offset":[{"outline-offset":[dg,dy,ds]}],"outline-w":[{outline:["",dg,dz,dt]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",k,dE,dx]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",l,dE,dx]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[dg,dt]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",m,dE,dx]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[dg,dy,ds]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[dg]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[dy,ds]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":u()}],"mask-image-conic-pos":[{"mask-conic":[dg]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",dy,ds]}],filter:[{filter:["","none",dy,ds]}],blur:[{blur:S()}],brightness:[{brightness:[dg,dy,ds]}],contrast:[{contrast:[dg,dy,ds]}],"drop-shadow":[{"drop-shadow":["","none",n,dE,dx]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",dg,dy,ds]}],"hue-rotate":[{"hue-rotate":[dg,dy,ds]}],invert:[{invert:["",dg,dy,ds]}],saturate:[{saturate:[dg,dy,ds]}],sepia:[{sepia:["",dg,dy,ds]}],"backdrop-filter":[{"backdrop-filter":["","none",dy,ds]}],"backdrop-blur":[{"backdrop-blur":S()}],"backdrop-brightness":[{"backdrop-brightness":[dg,dy,ds]}],"backdrop-contrast":[{"backdrop-contrast":[dg,dy,ds]}],"backdrop-grayscale":[{"backdrop-grayscale":["",dg,dy,ds]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[dg,dy,ds]}],"backdrop-invert":[{"backdrop-invert":["",dg,dy,ds]}],"backdrop-opacity":[{"backdrop-opacity":[dg,dy,ds]}],"backdrop-saturate":[{"backdrop-saturate":[dg,dy,ds]}],"backdrop-sepia":[{"backdrop-sepia":["",dg,dy,ds]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",dy,ds]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[dg,"initial",dy,ds]}],ease:[{ease:["linear","initial",r,dy,ds]}],delay:[{delay:[dg,dy,ds]}],animate:[{animate:["none",s,dy,ds]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,dy,ds]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:T()}],"rotate-x":[{"rotate-x":T()}],"rotate-y":[{"rotate-y":T()}],"rotate-z":[{"rotate-z":T()}],scale:[{scale:U()}],"scale-x":[{"scale-x":U()}],"scale-y":[{"scale-y":U()}],"scale-z":[{"scale-z":U()}],"scale-3d":["scale-3d"],skew:[{skew:V()}],"skew-x":[{"skew-x":V()}],"skew-y":[{"skew-y":V()}],transform:[{transform:[dy,ds,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:W()}],"translate-x":[{"translate-x":W()}],"translate-y":[{"translate-y":W()}],"translate-z":[{"translate-z":W()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",dy,ds]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",dy,ds]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[dg,dz,dt,du]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function dP(...a){return dO(cP(a))}let dQ=cR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function dR({className:a,variant:b,size:c,asChild:d=!1,...e}){return(0,P.jsx)(d?cM:"button",{"data-slot":"button",className:dP(dQ({variant:b,size:c,className:a})),...e})}function dS({className:a,...b}){return(0,P.jsx)("div",{"data-slot":"card",className:dP("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...b})}function dT({className:a,...b}){return(0,P.jsx)("div",{"data-slot":"card-header",className:dP("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...b})}function dU({className:a,...b}){return(0,P.jsx)("h4",{"data-slot":"card-title",className:dP("leading-none",a),...b})}function dV({className:a,...b}){return(0,P.jsx)("p",{"data-slot":"card-description",className:dP("text-muted-foreground",a),...b})}function dW({className:a,...b}){return(0,P.jsx)("div",{"data-slot":"card-content",className:dP("px-6 [&:last-child]:pb-6",a),...b})}let dX=cR("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function dY({className:a,variant:b,asChild:c=!1,...d}){return(0,P.jsx)(c?cM:"span",{"data-slot":"badge",className:dP(dX({variant:b}),a),...d})}function dZ(a){let[b,c]=(0,Q.useState)(!1),{src:d,alt:e,style:f,className:g,...h}=a;return b?(0,P.jsx)("div",{className:`inline-block bg-gray-100 text-center align-middle ${g??""}`,style:f,children:(0,P.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,P.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...h,"data-original-url":d})})}):(0,P.jsx)("img",{src:d,alt:e,className:g,style:f,...h,onError:()=>{c(!0)}})}function d$(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}function d_(a,b=[]){let c=[],d=()=>{let b=c.map(a=>Q.createContext(a));return function(c){let d=c?.[a]||b;return Q.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=Q.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=Q.useMemo(()=>g,Object.values(g));return(0,P.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=Q.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return Q.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}var d0=globalThis?.document?Q.useLayoutEffect:()=>{},d1=Q[" useId ".trim().toString()]||(()=>void 0),d2=0;function d3(a){let[b,c]=Q.useState(d1());return d0(()=>{a||c(a=>a??String(d2++))},[a]),a||(b?`radix-${b}`:"")}Q[" useEffectEvent ".trim().toString()],Q[" useInsertionEffect ".trim().toString()];var d4=Q[" useInsertionEffect ".trim().toString()]||d0;function d5({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=Q.useState(a),e=Q.useRef(c),f=Q.useRef(b);return d4(()=>{f.current=b},[b]),Q.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=Q.useRef(void 0!==a);Q.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,Q.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}Symbol("RADIX:SYNC_STATE");var d6=a.i(8716),d7=Symbol("radix.slottable");function d8(a){return Q.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===d7}var d9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{var c,d;let e,f,g,h=(d=c=`Primitive.${b}`,(e=Q.forwardRef((a,b)=>{let{children:c,...d}=a;if(Q.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==Q.Fragment&&(h.ref=b?cG(b,g):g),Q.cloneElement(c,h)}return Q.Children.count(c)>1?Q.Children.only(null):null})).displayName=`${d}.SlotClone`,f=e,(g=Q.forwardRef((a,b)=>{let{children:c,...d}=a,e=Q.Children.toArray(c),g=e.find(d8);if(g){let a=g.props.children,c=e.map(b=>b!==g?b:Q.Children.count(a)>1?Q.Children.only(null):Q.isValidElement(a)?a.props.children:null);return(0,P.jsx)(f,{...d,ref:b,children:Q.isValidElement(a)?Q.cloneElement(a,void 0,c):null})}return(0,P.jsx)(f,{...d,ref:b,children:c})})).displayName=`${c}.Slot`,g),i=Q.forwardRef((a,c)=>{let{asChild:d,...e}=a;return(0,P.jsx)(d?h:b,{...e,ref:c})});return i.displayName=`Primitive.${b}`,{...a,[b]:i}},{});function ea(a,b){a&&d6.flushSync(()=>a.dispatchEvent(b))}function eb(a){let b=Q.useRef(a);return Q.useEffect(()=>{b.current=a}),Q.useMemo(()=>(...a)=>b.current?.(...a),[])}var ec="dismissableLayer.update",ed=Q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ee=Q.forwardRef((a,b)=>{let{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:e,onFocusOutside:f,onInteractOutside:g,onDismiss:h,...i}=a,j=Q.useContext(ed),[k,l]=Q.useState(null),m=k?.ownerDocument??globalThis?.document,[,n]=Q.useState({}),o=cH(b,a=>l(a)),p=Array.from(j.layers),[q]=[...j.layersWithOutsidePointerEventsDisabled].slice(-1),r=p.indexOf(q),s=k?p.indexOf(k):-1,t=j.layersWithOutsidePointerEventsDisabled.size>0,u=s>=r,v=function(a,b=globalThis?.document){let c=eb(a),d=Q.useRef(!1),e=Q.useRef(()=>{});return Q.useEffect(()=>{let a=a=>{if(a.target&&!d.current){let d=function(){eg("dismissableLayer.pointerDownOutside",c,f,{discrete:!0})},f={originalEvent:a};"touch"===a.pointerType?(b.removeEventListener("click",e.current),e.current=d,b.addEventListener("click",e.current,{once:!0})):d()}else b.removeEventListener("click",e.current);d.current=!1},f=window.setTimeout(()=>{b.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(f),b.removeEventListener("pointerdown",a),b.removeEventListener("click",e.current)}},[b,c]),{onPointerDownCapture:()=>d.current=!0}}(a=>{let b=a.target,c=[...j.branches].some(a=>a.contains(b));u&&!c&&(e?.(a),g?.(a),a.defaultPrevented||h?.())},m),w=function(a,b=globalThis?.document){let c=eb(a),d=Q.useRef(!1);return Q.useEffect(()=>{let a=a=>{a.target&&!d.current&&eg("dismissableLayer.focusOutside",c,{originalEvent:a},{discrete:!1})};return b.addEventListener("focusin",a),()=>b.removeEventListener("focusin",a)},[b,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}(a=>{let b=a.target;![...j.branches].some(a=>a.contains(b))&&(f?.(a),g?.(a),a.defaultPrevented||h?.())},m);return!function(a,b=globalThis?.document){let c=eb(a);Q.useEffect(()=>{let a=a=>{"Escape"===a.key&&c(a)};return b.addEventListener("keydown",a,{capture:!0}),()=>b.removeEventListener("keydown",a,{capture:!0})},[c,b])}(a=>{s===j.layers.size-1&&(d?.(a),!a.defaultPrevented&&h&&(a.preventDefault(),h()))},m),Q.useEffect(()=>{if(k)return c&&(0===j.layersWithOutsidePointerEventsDisabled.size&&(N=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),j.layersWithOutsidePointerEventsDisabled.add(k)),j.layers.add(k),ef(),()=>{c&&1===j.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=N)}},[k,m,c,j]),Q.useEffect(()=>()=>{k&&(j.layers.delete(k),j.layersWithOutsidePointerEventsDisabled.delete(k),ef())},[k,j]),Q.useEffect(()=>{let a=()=>n({});return document.addEventListener(ec,a),()=>document.removeEventListener(ec,a)},[]),(0,P.jsx)(d9.div,{...i,ref:o,style:{pointerEvents:t?u?"auto":"none":void 0,...a.style},onFocusCapture:d$(a.onFocusCapture,w.onFocusCapture),onBlurCapture:d$(a.onBlurCapture,w.onBlurCapture),onPointerDownCapture:d$(a.onPointerDownCapture,v.onPointerDownCapture)})});function ef(){let a=new CustomEvent(ec);document.dispatchEvent(a)}function eg(a,b,c,{discrete:d}){let e=c.originalEvent.target,f=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});b&&e.addEventListener(a,b,{once:!0}),d?ea(e,f):e.dispatchEvent(f)}ee.displayName="DismissableLayer",Q.forwardRef((a,b)=>{let c=Q.useContext(ed),d=Q.useRef(null),e=cH(b,d);return Q.useEffect(()=>{let a=d.current;if(a)return c.branches.add(a),()=>{c.branches.delete(a)}},[c.branches]),(0,P.jsx)(d9.div,{...a,ref:e})}).displayName="DismissableLayerBranch";var eh="focusScope.autoFocusOnMount",ei="focusScope.autoFocusOnUnmount",ej={bubbles:!1,cancelable:!0},ek=Q.forwardRef((a,b)=>{let{loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f,...g}=a,[h,i]=Q.useState(null),j=eb(e),k=eb(f),l=Q.useRef(null),m=cH(b,a=>i(a)),n=Q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Q.useEffect(()=>{if(d){let a=function(a){if(n.paused||!h)return;let b=a.target;h.contains(b)?l.current=b:en(l.current,{select:!0})},b=function(a){if(n.paused||!h)return;let b=a.relatedTarget;null!==b&&(h.contains(b)||en(l.current,{select:!0}))};document.addEventListener("focusin",a),document.addEventListener("focusout",b);let c=new MutationObserver(function(a){if(document.activeElement===document.body)for(let b of a)b.removedNodes.length>0&&en(h)});return h&&c.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",b),c.disconnect()}}},[d,h,n.paused]),Q.useEffect(()=>{if(h){eo.add(n);let a=document.activeElement;if(!h.contains(a)){let b=new CustomEvent(eh,ej);h.addEventListener(eh,j),h.dispatchEvent(b),b.defaultPrevented||(function(a,{select:b=!1}={}){let c=document.activeElement;for(let d of a)if(en(d,{select:b}),document.activeElement!==c)return}(el(h).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&en(h))}return()=>{h.removeEventListener(eh,j),setTimeout(()=>{let b=new CustomEvent(ei,ej);h.addEventListener(ei,k),h.dispatchEvent(b),b.defaultPrevented||en(a??document.body,{select:!0}),h.removeEventListener(ei,k),eo.remove(n)},0)}}},[h,j,k,n]);let o=Q.useCallback(a=>{if(!c&&!d||n.paused)return;let b="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,e=document.activeElement;if(b&&e){var f;let b,d=a.currentTarget,[g,h]=[em(b=el(f=d),f),em(b.reverse(),f)];g&&h?a.shiftKey||e!==h?a.shiftKey&&e===g&&(a.preventDefault(),c&&en(h,{select:!0})):(a.preventDefault(),c&&en(g,{select:!0})):e===d&&a.preventDefault()}},[c,d,n.paused]);return(0,P.jsx)(d9.div,{tabIndex:-1,...g,ref:m,onKeyDown:o})});function el(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}function em(a,b){for(let c of a)if(!function(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(c,{upTo:b}))return c}function en(a,{select:b=!1}={}){if(a&&a.focus){var c;let d=document.activeElement;a.focus({preventScroll:!0}),a!==d&&(c=a)instanceof HTMLInputElement&&"select"in c&&b&&a.select()}}ek.displayName="FocusScope";var eo=(i=[],{add(a){let b=i[0];a!==b&&b?.pause(),(i=ep(i,a)).unshift(a)},remove(a){i=ep(i,a),i[0]?.resume()}});function ep(a,b){let c=[...a],d=c.indexOf(b);return -1!==d&&c.splice(d,1),c}var eq=Q.forwardRef((a,b)=>{let{container:c,...d}=a,[e,f]=Q.useState(!1);d0(()=>f(!0),[]);let g=c||e&&globalThis?.document?.body;return g?d6.default.createPortal((0,P.jsx)(d9.div,{...d,ref:b}),g):null});eq.displayName="Portal";var er=a=>{var b;let c,d,{present:e,children:f}=a,g=function(a){var b,c;let[d,e]=Q.useState(),f=Q.useRef(null),g=Q.useRef(a),h=Q.useRef("none"),[i,j]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},Q.useReducer((a,b)=>c[a][b]??a,b));return Q.useEffect(()=>{let a=es(f.current);h.current="mounted"===i?a:"none"},[i]),d0(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=es(b);a?j("MOUNT"):"none"===e||b?.display==="none"?j("UNMOUNT"):c&&d!==e?j("ANIMATION_OUT"):j("UNMOUNT"),g.current=a}},[a,j]),d0(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=es(f.current).includes(CSS.escape(c.animationName));if(c.target===d&&e&&(j("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=es(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}j("ANIMATION_END")},[d,j]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:Q.useCallback(a=>{f.current=a?getComputedStyle(a):null,e(a)},[])}}(e),h="function"==typeof f?f({present:g.isPresent}):Q.Children.only(f),i=cH(g.ref,(b=h,(d=(c=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.ref:(d=(c=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof f||g.isPresent?Q.cloneElement(h,{ref:i}):null};function es(a){return a?.animationName||"none"}er.displayName="Presence";var et=0;function eu(){Q.useEffect(()=>{let a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??ev()),document.body.insertAdjacentElement("beforeend",a[1]??ev()),et++,()=>{1===et&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),et--}},[])}function ev(){let a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var ew="right-scroll-bar-position",ex="width-before-scroll-bar";function ey(a,b){return"function"==typeof a?a(b):a&&(a.current=b),a}var ez=Q.useEffect,eA=new WeakMap,eB=(void 0===v&&(v={}),(void 0===w&&(w=function(a){return a}),x=[],y=!1,z={read:function(){if(y)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return x.length?x[x.length-1]:null},useMedium:function(a){var b=w(a,y);return x.push(b),function(){x=x.filter(function(a){return a!==b})}},assignSyncMedium:function(a){for(y=!0;x.length;){var b=x;x=[],b.forEach(a)}x={push:function(b){return a(b)},filter:function(){return x}}},assignMedium:function(a){y=!0;var b=[];if(x.length){var c=x;x=[],c.forEach(a),b=x}var d=function(){var c=b;b=[],c.forEach(a)},e=function(){return Promise.resolve().then(d)};e(),x={push:function(a){b.push(a),e()},filter:function(a){return b=b.filter(a),x}}}}).options=V({async:!0,ssr:!1},v),z),eC=function(){},eD=Q.forwardRef(function(a,b){var c,d,e,f,g=Q.useRef(null),h=Q.useState({onScrollCapture:eC,onWheelCapture:eC,onTouchMoveCapture:eC}),i=h[0],j=h[1],k=a.forwardProps,l=a.children,m=a.className,n=a.removeScrollBar,o=a.enabled,p=a.shards,q=a.sideCar,r=a.noRelative,s=a.noIsolation,t=a.inert,u=a.allowPinchZoom,v=a.as,w=a.gapMode,x=W(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),y=(c=[g,b],d=function(a){return c.forEach(function(b){return ey(b,a)})},(e=(0,Q.useState)(function(){return{value:null,callback:d,facade:{get current(){return e.value},set current(value){var a=e.value;a!==value&&(e.value=value,e.callback(value,a))}}}})[0]).callback=d,f=e.facade,ez(function(){var a=eA.get(f);if(a){var b=new Set(a),d=new Set(c),e=f.current;b.forEach(function(a){d.has(a)||ey(a,null)}),d.forEach(function(a){b.has(a)||ey(a,e)})}eA.set(f,c)},[c]),f),z=V(V({},x),i);return Q.createElement(Q.Fragment,null,o&&Q.createElement(q,{sideCar:eB,removeScrollBar:n,shards:p,noRelative:r,noIsolation:s,inert:t,setCallbacks:j,allowPinchZoom:!!u,lockRef:g,gapMode:w}),k?Q.cloneElement(Q.Children.only(l),V(V({},z),{ref:y})):Q.createElement(void 0===v?"div":v,V({},z,{className:m,ref:y}),l))});eD.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},eD.classNames={fullWidth:ex,zeroRight:ew};var eE=function(a){var b=a.sideCar,c=W(a,["sideCar"]);if(!b)throw Error("Sidecar: please provide `sideCar` property to import the right car");var d=b.read();if(!d)throw Error("Sidecar medium not found");return Q.createElement(d,V({},c))};eE.isSideCarExport=!0;var eF=function(){var a=0,b=null;return{add:function(c){if(0==a&&(b=function(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var b=O||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return b&&a.setAttribute("nonce",b),a}())){var d,e;(d=b).styleSheet?d.styleSheet.cssText=c:d.appendChild(document.createTextNode(c)),e=b,(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}a++},remove:function(){--a||!b||(b.parentNode&&b.parentNode.removeChild(b),b=null)}}},eG=function(){var a=eF();return function(b,c){Q.useEffect(function(){return a.add(b),function(){a.remove()}},[b&&c])}},eH=function(){var a=eG();return function(b){return a(b.styles,b.dynamic),null}},eI={left:0,top:0,right:0,gap:0},eJ=eH(),eK="data-scroll-locked",eL=function(a,b,c,d){var e=a.left,f=a.top,g=a.right,h=a.gap;return void 0===c&&(c="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(d,";\n   padding-right: ").concat(h,"px ").concat(d,";\n  }\n  body[").concat(eK,"] {\n    overflow: hidden ").concat(d,";\n    overscroll-behavior: contain;\n    ").concat([b&&"position: relative ".concat(d,";"),"margin"===c&&"\n    padding-left: ".concat(e,"px;\n    padding-top: ").concat(f,"px;\n    padding-right: ").concat(g,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(h,"px ").concat(d,";\n    "),"padding"===c&&"padding-right: ".concat(h,"px ").concat(d,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(ew," {\n    right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(ex," {\n    margin-right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(ew," .").concat(ew," {\n    right: 0 ").concat(d,";\n  }\n  \n  .").concat(ex," .").concat(ex," {\n    margin-right: 0 ").concat(d,";\n  }\n  \n  body[").concat(eK,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(h,"px;\n  }\n")},eM=function(){var a=parseInt(document.body.getAttribute(eK)||"0",10);return isFinite(a)?a:0},eN=function(){Q.useEffect(function(){return document.body.setAttribute(eK,(eM()+1).toString()),function(){var a=eM()-1;a<=0?document.body.removeAttribute(eK):document.body.setAttribute(eK,a.toString())}},[])},eO=function(a){var b=a.noRelative,c=a.noImportant,d=a.gapMode,e=void 0===d?"margin":d;eN();var f=Q.useMemo(function(){return void 0===e,eI},[e]);return Q.createElement(eJ,{styles:eL(f,!b,e,c?"":"!important")})},eP=function(a,b){if(!(a instanceof Element))return!1;var c=window.getComputedStyle(a);return"hidden"!==c[b]&&(c.overflowY!==c.overflowX||"TEXTAREA"===a.tagName||"visible"!==c[b])},eQ=function(a,b){var c=b.ownerDocument,d=b;do{if("undefined"!=typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host),eR(a,d)){var e=eS(a,d);if(e[1]>e[2])return!0}d=d.parentNode}while(d&&d!==c.body)return!1},eR=function(a,b){return"v"===a?eP(b,"overflowY"):eP(b,"overflowX")},eS=function(a,b){return"v"===a?[b.scrollTop,b.scrollHeight,b.clientHeight]:[b.scrollLeft,b.scrollWidth,b.clientWidth]},eT=function(a,b,c,d,e){var f,g=(f=window.getComputedStyle(b).direction,"h"===a&&"rtl"===f?-1:1),h=g*d,i=c.target,j=b.contains(i),k=!1,l=h>0,m=0,n=0;do{if(!i)break;var o=eS(a,i),p=o[0],q=o[1]-o[2]-g*p;(p||q)&&eR(a,i)&&(m+=q,n+=p);var r=i.parentNode;i=r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.host:r}while(!j&&i!==document.body||j&&(b.contains(i)||b===i))return l&&(e&&1>Math.abs(m)||!e&&h>m)?k=!0:!l&&(e&&1>Math.abs(n)||!e&&-h>n)&&(k=!0),k},eU=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},eV=function(a){return[a.deltaX,a.deltaY]},eW=function(a){return a&&"current"in a?a.current:a},eX=0,eY=[];let eZ=(A=function(a){var b=Q.useRef([]),c=Q.useRef([0,0]),d=Q.useRef(),e=Q.useState(eX++)[0],f=Q.useState(eH)[0],g=Q.useRef(a);Q.useEffect(function(){g.current=a},[a]),Q.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(e));var b=(function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))})([a.lockRef.current],(a.shards||[]).map(eW),!0).filter(Boolean);return b.forEach(function(a){return a.classList.add("allow-interactivity-".concat(e))}),function(){document.body.classList.remove("block-interactivity-".concat(e)),b.forEach(function(a){return a.classList.remove("allow-interactivity-".concat(e))})}}},[a.inert,a.lockRef.current,a.shards]);var h=Q.useCallback(function(a,b){if("touches"in a&&2===a.touches.length||"wheel"===a.type&&a.ctrlKey)return!g.current.allowPinchZoom;var e,f=eU(a),h=c.current,i="deltaX"in a?a.deltaX:h[0]-f[0],j="deltaY"in a?a.deltaY:h[1]-f[1],k=a.target,l=Math.abs(i)>Math.abs(j)?"h":"v";if("touches"in a&&"h"===l&&"range"===k.type)return!1;var m=window.getSelection(),n=m&&m.anchorNode;if(n&&(n===k||n.contains(k)))return!1;var o=eQ(l,k);if(!o)return!0;if(o?e=l:(e="v"===l?"h":"v",o=eQ(l,k)),!o)return!1;if(!d.current&&"changedTouches"in a&&(i||j)&&(d.current=e),!e)return!0;var p=d.current||e;return eT(p,b,a,"h"===p?i:j,!0)},[]),i=Q.useCallback(function(a){if(eY.length&&eY[eY.length-1]===f){var c="deltaY"in a?eV(a):eU(a),d=b.current.filter(function(b){var d;return b.name===a.type&&(b.target===a.target||a.target===b.shadowParent)&&(d=b.delta,d[0]===c[0]&&d[1]===c[1])})[0];if(d&&d.should){a.cancelable&&a.preventDefault();return}if(!d){var e=(g.current.shards||[]).map(eW).filter(Boolean).filter(function(b){return b.contains(a.target)});(e.length>0?h(a,e[0]):!g.current.noIsolation)&&a.cancelable&&a.preventDefault()}}},[]),j=Q.useCallback(function(a,c,d,e){var f={name:a,delta:c,target:d,should:e,shadowParent:function(a){for(var b=null;null!==a;)a instanceof ShadowRoot&&(b=a.host,a=a.host),a=a.parentNode;return b}(d)};b.current.push(f),setTimeout(function(){b.current=b.current.filter(function(a){return a!==f})},1)},[]),k=Q.useCallback(function(a){c.current=eU(a),d.current=void 0},[]),l=Q.useCallback(function(b){j(b.type,eV(b),b.target,h(b,a.lockRef.current))},[]),m=Q.useCallback(function(b){j(b.type,eU(b),b.target,h(b,a.lockRef.current))},[]);Q.useEffect(function(){return eY.push(f),a.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:m}),document.addEventListener("wheel",i,!1),document.addEventListener("touchmove",i,!1),document.addEventListener("touchstart",k,!1),function(){eY=eY.filter(function(a){return a!==f}),document.removeEventListener("wheel",i,!1),document.removeEventListener("touchmove",i,!1),document.removeEventListener("touchstart",k,!1)}},[]);var n=a.removeScrollBar,o=a.inert;return Q.createElement(Q.Fragment,null,o?Q.createElement(f,{styles:"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")}):null,n?Q.createElement(eO,{noRelative:a.noRelative,gapMode:a.gapMode}):null)},eB.useMedium(A),eE);var e$=Q.forwardRef(function(a,b){return Q.createElement(eD,V({},a,{ref:b,sideCar:eZ}))});e$.classNames=eD.classNames;var e_=new WeakMap,e0=new WeakMap,e1={},e2=0,e3=function(a){return a&&(a.host||e3(a.parentNode))},e4=function(a,b,c,d){var e=(Array.isArray(a)?a:[a]).map(function(a){if(b.contains(a))return a;var c=e3(a);return c&&b.contains(c)?c:(console.error("aria-hidden",a,"in not contained inside",b,". Doing nothing"),null)}).filter(function(a){return!!a});e1[c]||(e1[c]=new WeakMap);var f=e1[c],g=[],h=new Set,i=new Set(e),j=function(a){!a||h.has(a)||(h.add(a),j(a.parentNode))};e.forEach(j);var k=function(a){!a||i.has(a)||Array.prototype.forEach.call(a.children,function(a){if(h.has(a))k(a);else try{var b=a.getAttribute(d),e=null!==b&&"false"!==b,i=(e_.get(a)||0)+1,j=(f.get(a)||0)+1;e_.set(a,i),f.set(a,j),g.push(a),1===i&&e&&e0.set(a,!0),1===j&&a.setAttribute(c,"true"),e||a.setAttribute(d,"true")}catch(b){console.error("aria-hidden: cannot operate on ",a,b)}})};return k(b),h.clear(),e2++,function(){g.forEach(function(a){var b=e_.get(a)-1,e=f.get(a)-1;e_.set(a,b),f.set(a,e),b||(e0.has(a)||a.removeAttribute(d),e0.delete(a)),e||a.removeAttribute(c)}),--e2||(e_=new WeakMap,e_=new WeakMap,e0=new WeakMap,e1={})}},e5=function(a,b,c){void 0===c&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),e=b||("undefined"==typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return e?(d.push.apply(d,Array.from(e.querySelectorAll("[aria-live], script"))),e4(d,e,c,"aria-hidden")):function(){return null}},e6=Symbol("radix.slottable");function e7(a){return Q.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===e6}var e8="Dialog",[e9,fa]=d_(e8),[fb,fc]=e9(e8),fd=a=>{let{__scopeDialog:b,children:c,open:d,defaultOpen:e,onOpenChange:f,modal:g=!0}=a,h=Q.useRef(null),i=Q.useRef(null),[j,k]=d5({prop:d,defaultProp:e??!1,onChange:f,caller:e8});return(0,P.jsx)(fb,{scope:b,triggerRef:h,contentRef:i,contentId:d3(),titleId:d3(),descriptionId:d3(),open:j,onOpenChange:k,onOpenToggle:Q.useCallback(()=>k(a=>!a),[k]),modal:g,children:c})};fd.displayName=e8;var fe="DialogTrigger";Q.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=fc(fe,c),f=cH(b,e.triggerRef);return(0,P.jsx)(d9.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":fy(e.open),...d,ref:f,onClick:d$(a.onClick,e.onOpenToggle)})}).displayName=fe;var ff="DialogPortal",[fg,fh]=e9(ff,{forceMount:void 0}),fi=a=>{let{__scopeDialog:b,forceMount:c,children:d,container:e}=a,f=fc(ff,b);return(0,P.jsx)(fg,{scope:b,forceMount:c,children:Q.Children.map(d,a=>(0,P.jsx)(er,{present:c||f.open,children:(0,P.jsx)(eq,{asChild:!0,container:e,children:a})}))})};fi.displayName=ff;var fj="DialogOverlay",fk=Q.forwardRef((a,b)=>{let c=fh(fj,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=fc(fj,a.__scopeDialog);return f.modal?(0,P.jsx)(er,{present:d||f.open,children:(0,P.jsx)(fm,{...e,ref:b})}):null});fk.displayName=fj;var fl=((j=Q.forwardRef((a,b)=>{let{children:c,...d}=a;if(Q.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==Q.Fragment&&(h.ref=b?cG(b,g):g),Q.cloneElement(c,h)}return Q.Children.count(c)>1?Q.Children.only(null):null})).displayName="DialogOverlay.RemoveScroll.SlotClone",c=j,(d=Q.forwardRef((a,b)=>{let{children:d,...e}=a,f=Q.Children.toArray(d),g=f.find(e7);if(g){let a=g.props.children,d=f.map(b=>b!==g?b:Q.Children.count(a)>1?Q.Children.only(null):Q.isValidElement(a)?a.props.children:null);return(0,P.jsx)(c,{...e,ref:b,children:Q.isValidElement(a)?Q.cloneElement(a,void 0,d):null})}return(0,P.jsx)(c,{...e,ref:b,children:d})})).displayName="DialogOverlay.RemoveScroll.Slot",d),fm=Q.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=fc(fj,c);return(0,P.jsx)(e$,{as:fl,allowPinchZoom:!0,shards:[e.contentRef],children:(0,P.jsx)(d9.div,{"data-state":fy(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),fn="DialogContent",fo=Q.forwardRef((a,b)=>{let c=fh(fn,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=fc(fn,a.__scopeDialog);return(0,P.jsx)(er,{present:d||f.open,children:f.modal?(0,P.jsx)(fp,{...e,ref:b}):(0,P.jsx)(fq,{...e,ref:b})})});fo.displayName=fn;var fp=Q.forwardRef((a,b)=>{let c=fc(fn,a.__scopeDialog),d=Q.useRef(null),e=cH(b,c.contentRef,d);return Q.useEffect(()=>{let a=d.current;if(a)return e5(a)},[]),(0,P.jsx)(fr,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:d$(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:d$(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:d$(a.onFocusOutside,a=>a.preventDefault())})}),fq=Q.forwardRef((a,b)=>{let c=fc(fn,a.__scopeDialog),d=Q.useRef(!1),e=Q.useRef(!1);return(0,P.jsx)(fr,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,e.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(e.current=!0));let f=b.target;c.triggerRef.current?.contains(f)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&e.current&&b.preventDefault()}})}),fr=Q.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:e,onCloseAutoFocus:f,...g}=a,h=fc(fn,c),i=Q.useRef(null),j=cH(b,i);return eu(),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ek,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:e,onUnmountAutoFocus:f,children:(0,P.jsx)(ee,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":fy(h.open),...g,ref:j,onDismiss:()=>h.onOpenChange(!1)})}),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(fC,{titleId:h.titleId}),(0,P.jsx)(fD,{contentRef:i,descriptionId:h.descriptionId})]})]})}),fs="DialogTitle",ft=Q.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=fc(fs,c);return(0,P.jsx)(d9.h2,{id:e.titleId,...d,ref:b})});ft.displayName=fs;var fu="DialogDescription",fv=Q.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=fc(fu,c);return(0,P.jsx)(d9.p,{id:e.descriptionId,...d,ref:b})});fv.displayName=fu;var fw="DialogClose",fx=Q.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=fc(fw,c);return(0,P.jsx)(d9.button,{type:"button",...d,ref:b,onClick:d$(a.onClick,()=>e.onOpenChange(!1))})});function fy(a){return a?"open":"closed"}fx.displayName=fw;var fz="DialogTitleWarning",[fA,fB]=(B={contentName:fn,titleName:fs,docsSlug:"dialog"},e=Q.createContext(B),(f=a=>{let{children:b,...c}=a,d=Q.useMemo(()=>c,Object.values(c));return(0,P.jsx)(e.Provider,{value:d,children:b})}).displayName=fz+"Provider",[f,function(a){let b=Q.useContext(e);if(b)return b;if(void 0!==B)return B;throw Error(`\`${a}\` must be used within \`${fz}\``)}]),fC=({titleId:a})=>{let b=fB(fz),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return Q.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},fD=({contentRef:a,descriptionId:b})=>{let c=fB("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return Q.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null};let fE=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},fF=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var fG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let fH=(0,Q.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,Q.createElement)("svg",{ref:i,...fG,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:fF("lucide",e),...!f&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(h)&&{"aria-hidden":"true"},...h},[...g.map(([a,b])=>(0,Q.createElement)(a,b)),...Array.isArray(f)?f:[f]])),fI=(a,b)=>{let c=(0,Q.forwardRef)(({className:c,...d},e)=>(0,Q.createElement)(fH,{ref:e,iconNode:b,className:fF(`lucide-${fE(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=fE(a),c},fJ=fI("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function fK({...a}){return(0,P.jsx)(fd,{"data-slot":"dialog",...a})}function fL({...a}){return(0,P.jsx)(fi,{"data-slot":"dialog-portal",...a})}function fM({className:a,...b}){return(0,P.jsx)(fk,{"data-slot":"dialog-overlay",className:dP("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function fN({className:a,children:b,...c}){return(0,P.jsxs)(fL,{"data-slot":"dialog-portal",children:[(0,P.jsx)(fM,{}),(0,P.jsxs)(fo,{"data-slot":"dialog-content",className:dP("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c,children:[b,(0,P.jsxs)(fx,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,P.jsx)(fJ,{}),(0,P.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function fO({className:a,...b}){return(0,P.jsx)("div",{"data-slot":"dialog-header",className:dP("flex flex-col gap-2 text-center sm:text-left",a),...b})}function fP({className:a,...b}){return(0,P.jsx)(ft,{"data-slot":"dialog-title",className:dP("text-lg leading-none font-semibold",a),...b})}function fQ({className:a,...b}){return(0,P.jsx)(fv,{"data-slot":"dialog-description",className:dP("text-muted-foreground text-sm",a),...b})}let fR=fI("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),fS=fI("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),fT=fI("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),fU=fI("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),fV=fI("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),fW=fI("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),fX=fI("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),fY=fI("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),fZ=fI("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),f$=fI("images",[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16",key:"9kzy35"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2",key:"1t0f0t"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor",key:"1obus6"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2",key:"1gvhby"}]]),f_=fI("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),f0=fI("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),f1=fI("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),f2=fI("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),f3=fI("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),f4=fI("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),f5=fI("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),f6=fI("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),f7=fI("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);function f8({onNavigate:a}){let[b,c]=(0,Q.useState)([]),[d,e]=(0,Q.useState)([]),[f,g]=(0,Q.useState)([]),[h,i]=(0,Q.useState)(null),[j,k]=(0,Q.useState)(null),[l,m]=(0,Q.useState)([]),[n,o]=(0,Q.useState)(!0);async function p(){o(!0);try{let{data:a}=await cE.from("classes").select("*").order("year",{ascending:!1});a&&a.length>0&&(c(a),k(a[0].id));let{data:b}=await cE.from("notices").select("*").eq("publish_homepage",!0).order("created_at",{ascending:!1});b&&e(b);let{data:d}=await cE.from("galleries").select("*").order("created_at",{ascending:!1});d&&g(d)}catch(a){console.error("Fetch error:",a)}finally{o(!1)}}async function q(a){try{let{data:b}=await cE.from("exam_results").select("*").eq("class_id",a).eq("is_public",!0).order("marks",{ascending:!1});if(b){let a=b.filter((a,b,c)=>b===c.findIndex(b=>b.student_id===a.student_id));m(a.slice(0,10))}}catch(a){console.error("Rank fetch error:",a)}}return((0,Q.useEffect)(()=>{p()},[]),(0,Q.useEffect)(()=>{j&&q(j)},[j]),n)?(0,P.jsxs)("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-white",children:[(0,P.jsx)(f_,{className:"size-12 text-teal-600 animate-pulse mb-4"}),(0,P.jsx)("p",{className:"font-black uppercase tracking-[0.3em] text-[10px] text-slate-400 italic",children:"Initializing Portal..."})]}):(0,P.jsxs)("div",{className:"min-h-screen bg-[#FAFBFC] text-slate-900 selection:bg-teal-100",children:[(0,P.jsxs)("nav",{className:"fixed top-0 w-full z-50 bg-white/90 backdrop-blur-md border-b border-slate-100 px-6 py-4 flex justify-between items-center shadow-sm",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)("img",{src:"/logo.png",alt:"Logic Logo",className:"h-10 w-auto object-contain"}),(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("h2",{className:"text-base font-black text-slate-800 tracking-tighter uppercase italic leading-none",children:"Logic with Dilshan"}),(0,P.jsx)("span",{className:"text-[7px] font-bold text-teal-600 uppercase tracking-widest mt-1 italic",children:"Authorized Educational Platform"})]})]}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)(dR,{variant:"ghost",onClick:()=>a("student"),className:"font-bold text-slate-600 hover:bg-slate-50 rounded-xl px-5 text-xs uppercase tracking-widest transition-all",children:"Student Login"}),(0,P.jsx)(dR,{onClick:()=>a("admin-login"),className:"bg-slate-900 hover:bg-black text-white font-bold rounded-xl px-6 text-xs uppercase tracking-widest shadow-md",children:"Staff Portal"})]})]}),(0,P.jsx)("section",{className:"pt-48 pb-24 px-6 bg-white overflow-hidden relative border-b border-slate-100",children:(0,P.jsxs)("div",{className:"max-w-7xl mx-auto grid md:grid-cols-2 gap-16 items-center relative z-10",children:[(0,P.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-8 duration-700",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)("div",{className:"h-px w-10 bg-teal-500"}),(0,P.jsx)("span",{className:"text-teal-600 font-black uppercase tracking-[0.3em] text-[10px]",children:"Enrollment 2026 Open"})]}),(0,P.jsxs)("h1",{className:"text-7xl md:text-8xl font-black leading-[0.85] tracking-tighter uppercase italic text-slate-900",children:["Master Your ",(0,P.jsx)("br",{})," ",(0,P.jsx)("span",{className:"text-teal-600",children:"Mind."})]}),(0,P.jsx)("p",{className:"text-xl text-slate-500 leading-relaxed font-medium max-w-md italic",children:'"Logic is not just a subject, but a way of thinking, questioning, and discovering the world."'}),(0,P.jsxs)("div",{className:"flex flex-wrap gap-4 pt-4",children:[(0,P.jsx)(dR,{size:"lg",className:"bg-slate-900 hover:bg-black text-white rounded-2xl px-12 font-black uppercase text-xs h-16 shadow-2xl active:scale-95 transition-all",onClick:()=>a("student"),children:"Begin Journey"}),(0,P.jsx)("a",{href:"https://wa.me/94770224060",target:"_blank",rel:"noreferrer",children:(0,P.jsxs)(dR,{size:"lg",variant:"outline",className:"rounded-2xl px-10 border-slate-200 text-slate-600 h-16 font-black uppercase text-xs hover:bg-slate-50 transition-all flex gap-2 items-center",children:[(0,P.jsx)(f7,{size:16})," WhatsApp"]})})]})]}),(0,P.jsxs)("div",{className:"relative group animate-in fade-in slide-in-from-right-8 duration-1000",children:[(0,P.jsx)("div",{className:"absolute -inset-1 bg-teal-500/10 rounded-[4rem] blur-2xl opacity-50"}),(0,P.jsx)(dZ,{src:"/teacher-dilshan.jpg",alt:"Dilshan Uthpala",className:"rounded-[3.5rem] border-[12px] border-white shadow-2xl relative z-10 grayscale hover:grayscale-0 transition-all duration-700 aspect-[4/5] object-cover"})]})]})}),(0,P.jsx)("section",{className:"py-32 px-6 max-w-7xl mx-auto",children:(0,P.jsxs)("div",{className:"grid md:grid-cols-2 gap-24 items-start",children:[(0,P.jsxs)("div",{className:"space-y-10",children:[(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsxs)("h2",{className:"text-xs font-black uppercase tracking-[0.4em] text-teal-600 flex items-center gap-3",children:[(0,P.jsx)("div",{className:"h-0.5 w-8 bg-teal-600"})," About Us"]}),(0,P.jsxs)("h3",{className:"text-5xl font-black text-slate-900 uppercase italic leading-tight",children:["Logic with ",(0,P.jsx)("br",{})," Dilshan Uthpala"]}),(0,P.jsx)("p",{className:"text-slate-600 leading-relaxed text-xl font-medium",children:"We believe that logic is not just another subject but a way of thinking, questioning and discovering the world around us."}),(0,P.jsx)("p",{className:"text-slate-500 leading-relaxed text-lg border-l-4 border-teal-500 pl-6 py-2 italic font-medium",children:"Created by a passionate law student, this logic platform helps students build a sharper mind and strengthen their reasoning."})]}),(0,P.jsxs)("div",{className:"p-10 bg-slate-900 rounded-[3rem] text-white relative shadow-2xl border-t-8 border-teal-500 group overflow-hidden",children:[(0,P.jsx)(f0,{className:"absolute top-6 right-6 size-12 text-teal-500/20 group-hover:scale-110 transition-transform"}),(0,P.jsxs)("p",{className:"text-3xl font-black italic tracking-tighter leading-tight uppercase relative z-10",children:['"  ',(0,P.jsx)("br",{}),'  "']})]})]}),(0,P.jsxs)("div",{className:"space-y-16 py-12",children:[(0,P.jsxs)("div",{className:"flex gap-8 group",children:[(0,P.jsx)("div",{className:"bg-white p-5 rounded-[2rem] shadow-xl h-fit border border-slate-50 group-hover:bg-teal-600 transition-all duration-300",children:(0,P.jsx)(f1,{className:"text-teal-600 group-hover:text-white size-10 transition-colors"})}),(0,P.jsxs)("div",{className:"space-y-3",children:[(0,P.jsx)("h4",{className:"text-2xl font-black uppercase italic text-slate-900",children:"Our Goal"}),(0,P.jsx)("p",{className:"text-slate-500 leading-relaxed text-lg font-medium",children:"To simplify the subject of logic and present it to the student in a fun, intuitive and understandable way."})]})]}),(0,P.jsxs)("div",{className:"flex gap-8 group",children:[(0,P.jsx)("div",{className:"bg-white p-5 rounded-[2rem] shadow-xl h-fit border border-slate-50 group-hover:bg-teal-600 transition-all duration-300",children:(0,P.jsx)(f2,{className:"text-teal-600 group-hover:text-white size-10 transition-colors"})}),(0,P.jsxs)("div",{className:"space-y-3",children:[(0,P.jsx)("h4",{className:"text-2xl font-black uppercase italic text-slate-900",children:"Our Mission"}),(0,P.jsx)("p",{className:"text-slate-500 leading-relaxed text-lg font-medium",children:"Instead of teaching a mere subject, we instill a rational mindset and teach scientific methods with equal emphasis."})]})]})]})]})}),d.length>0&&(0,P.jsx)("section",{className:"py-24 bg-slate-50 border-y border-slate-100",children:(0,P.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 mb-16",children:[(0,P.jsx)(fY,{className:"text-teal-600 size-7"}),(0,P.jsx)("h2",{className:"text-3xl font-black uppercase tracking-tighter text-slate-900 italic",children:"Notice Board"})]}),(0,P.jsx)("div",{className:"grid md:grid-cols-3 gap-8",children:d.map(a=>(0,P.jsxs)(dS,{className:"rounded-[2.5rem] border-none bg-white shadow-xl shadow-slate-200/50 p-4 transition-transform hover:-translate-y-2",children:[(0,P.jsxs)(dT,{children:[(0,P.jsx)("div",{className:"text-[10px] font-black text-teal-600 uppercase mb-3 tracking-widest bg-teal-50 w-fit px-3 py-1 rounded-full",children:new Date(a.created_at).toLocaleDateString()}),(0,P.jsx)(dU,{className:"text-xl font-black uppercase italic leading-tight text-slate-800",children:a.title})]}),(0,P.jsx)(dW,{children:(0,P.jsx)("p",{className:"text-sm text-slate-500 font-medium leading-relaxed",children:a.content})})]},a.id))})]})}),(0,P.jsxs)("section",{className:"py-32 px-6 max-w-7xl mx-auto text-center",children:[(0,P.jsxs)("div",{className:"flex flex-col items-center mb-16",children:[(0,P.jsx)(fT,{className:"text-teal-600 size-14 mb-6"}),(0,P.jsx)("h2",{className:"text-6xl font-black tracking-tighter uppercase italic text-slate-900",children:"Hall of Fame"}),(0,P.jsx)("p",{className:"text-slate-400 font-bold uppercase tracking-[0.4em] text-xs mt-4",children:"Recognition of Excellence"})]}),(0,P.jsx)("div",{className:"flex flex-wrap justify-center gap-3 mt-12 mb-20",children:b.map(a=>(0,P.jsxs)(dR,{variant:j===a.id?"default":"outline",onClick:()=>k(a.id),className:`rounded-2xl font-black px-8 h-14 uppercase text-[10px] tracking-[0.2em] transition-all ${j===a.id?"bg-slate-900 text-white shadow-lg":"text-slate-400 border-slate-200 hover:text-slate-900"}`,children:[a.year," ",a.type]},a.id))}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:l.length>0?l.map((a,b)=>(0,P.jsxs)(dS,{className:`rounded-[3rem] border-none bg-white shadow-2xl p-6 relative transition-all hover:scale-105 ${0===b?"ring-2 ring-teal-500":""}`,children:[0===b&&(0,P.jsx)(fX,{className:"absolute -top-3 -right-3 size-12 text-yellow-400 fill-yellow-400"}),(0,P.jsxs)(dT,{className:"text-left p-0 pb-6 border-b border-slate-50",children:[(0,P.jsx)("div",{className:`size-14 rounded-2xl flex items-center justify-center font-black text-2xl mb-4 ${0===b?"bg-teal-600 text-white":"bg-slate-50 text-slate-300"}`,children:b+1}),(0,P.jsx)(dU,{className:"text-xl font-black uppercase italic truncate text-slate-800",children:a.student_name}),(0,P.jsx)(dV,{className:"text-[10px] font-bold uppercase truncate text-slate-400 tracking-tight",children:a.school_name})]}),(0,P.jsx)(dW,{className:"pt-6 px-0",children:(0,P.jsxs)("div",{className:"p-6 bg-[#FAFBFC] rounded-[2rem] text-center border border-slate-100",children:[(0,P.jsx)("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2 italic",children:a.exam_name}),(0,P.jsxs)("div",{className:"text-5xl font-black text-teal-600 tracking-tighter italic",children:[a.marks,"%"]})]})})]},b)):(0,P.jsx)("div",{className:"col-span-full py-24 text-slate-300 font-black uppercase tracking-[0.4em] italic border-4 border-dashed rounded-[4rem]",children:"Rankings Processing..."})})]}),(0,P.jsx)("section",{className:"py-32 px-6 bg-white border-y border-slate-100",children:(0,P.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,P.jsxs)("div",{className:"text-center mb-20 space-y-4",children:[(0,P.jsx)("h2",{className:"text-5xl font-black tracking-tighter uppercase italic text-slate-900 leading-none",children:"Class Schedule"}),(0,P.jsx)("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"Instructor: Dilshan Uthpala"})]}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:b.map(b=>(0,P.jsxs)(dS,{className:"border-none rounded-[3.5rem] bg-slate-50 shadow-sm hover:shadow-2xl transition-all duration-500 group overflow-hidden border border-transparent hover:border-teal-500/20",children:[(0,P.jsxs)(dT,{className:"p-10 pb-6",children:[(0,P.jsx)(dY,{className:"bg-slate-900 text-white border-none px-6 py-2 rounded-full mb-6 w-fit uppercase font-bold tracking-widest",children:b.year}),(0,P.jsx)(dU,{className:"text-3xl font-black uppercase italic text-slate-800 leading-tight group-hover:text-teal-600 transition-colors",children:b.title}),(0,P.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-2 block",children:b.type})]}),(0,P.jsxs)(dW,{className:"p-10 pt-0 space-y-5",children:[(0,P.jsxs)("div",{className:"flex items-center gap-4 text-sm font-bold text-slate-600",children:[(0,P.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:(0,P.jsx)(fR,{size:18,className:"text-teal-600"})})," ",b.class_day]}),(0,P.jsxs)("div",{className:"flex items-center gap-4 text-sm font-bold text-slate-600",children:[(0,P.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:(0,P.jsx)(fZ,{size:18,className:"text-teal-600"})})," ",b.class_time]}),(0,P.jsxs)("div",{className:"flex items-center gap-4 text-sm font-medium text-slate-400",children:[(0,P.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:(0,P.jsx)(fS,{size:18})})," ",b.institute_name]}),(0,P.jsx)(dR,{className:"w-full h-16 mt-8 bg-slate-900 hover:bg-teal-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest transition-all",onClick:()=>a("student"),children:"Enroll Now"})]})]},b.id))})]})}),(0,P.jsxs)("section",{className:"py-32 px-6 max-w-7xl mx-auto",children:[(0,P.jsxs)("div",{className:"flex items-center justify-between mb-20 border-l-8 border-teal-500 pl-8",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h2",{className:"text-6xl font-black tracking-tighter uppercase italic text-slate-900",children:"Visuals"}),(0,P.jsx)("p",{className:"text-teal-600 font-bold uppercase tracking-widest text-sm mt-3",children:"Moments from logic sessions"})]}),(0,P.jsx)(f$,{className:"size-16 text-slate-200 hidden md:block"})]}),(0,P.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:f.map(a=>(0,P.jsx)(dS,{className:"group cursor-pointer overflow-hidden rounded-[3rem] border-none shadow-2xl transition-all active:scale-95",onClick:()=>i(a),children:(0,P.jsxs)("div",{className:"relative h-[28rem] w-full",children:[(0,P.jsx)("img",{src:a.image_urls[0],alt:a.name,className:"h-full w-full object-cover transition-transform group-hover:scale-110 duration-1000 grayscale group-hover:grayscale-0"}),(0,P.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-transparent opacity-80"}),(0,P.jsxs)("div",{className:"absolute bottom-8 left-8 right-8 text-white",children:[(0,P.jsx)("h3",{className:"font-black text-2xl mb-1 tracking-tighter uppercase italic leading-none",children:a.name}),(0,P.jsxs)(dY,{className:"bg-teal-500 text-white border-none font-black text-[9px] px-3 mt-4",children:[a.image_urls.length," ASSETS"]})]})]})},a.id))})]}),(0,P.jsx)("footer",{className:"bg-[#030712] text-white pt-32 pb-12 px-6",children:(0,P.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,P.jsxs)("div",{className:"grid md:grid-cols-3 gap-24 border-b border-white/5 pb-24",children:[(0,P.jsxs)("div",{className:"space-y-8",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)("div",{className:"bg-white p-2 rounded-xl shadow-lg",children:(0,P.jsx)(f_,{className:"text-slate-950 fill-slate-950 size-6"})}),(0,P.jsx)("h3",{className:"text-4xl font-black uppercase italic tracking-tighter",children:"Logic"})]}),(0,P.jsx)("p",{className:"text-slate-400 text-lg leading-relaxed italic font-medium",children:"Instilling a rational mindset and simplified logic education through intuitive reasoning."}),(0,P.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,P.jsxs)("div",{className:"flex items-center gap-3 text-slate-300 text-sm",children:[(0,P.jsx)(f5,{className:"size-4 text-teal-500"})," dilshanuthpalalogic@gmail.com"]}),(0,P.jsxs)("div",{className:"flex items-center gap-3 text-slate-300 text-sm",children:[(0,P.jsx)(f6,{className:"size-4 text-teal-500"})," +94 77 022 4060"]})]}),(0,P.jsxs)("div",{className:"flex gap-6 pt-6",children:[(0,P.jsx)("a",{href:"https://web.facebook.com/profile.php?id=100094065144515",target:"_blank",rel:"noreferrer",className:"bg-white/5 p-4 rounded-2xl hover:bg-teal-600 transition-all group",children:(0,P.jsx)(fU,{className:"size-5 text-white group-hover:scale-110 transition-transform"})}),(0,P.jsx)("a",{href:"https://www.youtube.com/@DilshanUthpala",target:"_blank",rel:"noreferrer",className:"bg-white/5 p-4 rounded-2xl hover:bg-teal-600 transition-all group",children:(0,P.jsx)(fV,{className:"size-5 text-white group-hover:scale-110 transition-transform"})}),(0,P.jsx)("a",{href:"#",className:"bg-white/5 p-4 rounded-2xl hover:bg-teal-600 transition-all group",children:(0,P.jsx)(fW,{className:"size-5 text-white group-hover:scale-110 transition-transform"})})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("h4",{className:"font-black mb-10 uppercase text-slate-500 tracking-[0.4em] text-[10px]",children:"Navigation"}),(0,P.jsxs)("ul",{className:"space-y-6 text-slate-300 font-bold text-sm uppercase tracking-widest",children:[(0,P.jsxs)("li",{onClick:()=>a("home"),className:"hover:text-teal-500 cursor-pointer flex items-center gap-2 group transition-colors italic",children:[(0,P.jsx)(f3,{className:"size-4 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})," Home Portal"]}),(0,P.jsxs)("li",{onClick:()=>a("student"),className:"hover:text-teal-500 cursor-pointer flex items-center gap-2 group transition-colors italic",children:[(0,P.jsx)(f3,{className:"size-4 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})," Student Hub"]}),(0,P.jsxs)("li",{onClick:()=>a("admin-login"),className:"hover:text-teal-500 cursor-pointer flex items-center gap-2 group transition-colors italic",children:[(0,P.jsx)(f3,{className:"size-4 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"})," Staff Hub"]})]})]}),(0,P.jsxs)("div",{className:"space-y-10",children:[(0,P.jsxs)("div",{className:"p-8 bg-[#0B0F1A] rounded-[2.5rem] border border-white/5 group hover:border-teal-500/40 transition-all shadow-2xl relative overflow-hidden",children:[(0,P.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-teal-500/5 -translate-y-12 translate-x-12 rounded-full blur-2xl"}),(0,P.jsx)("p",{className:"text-[10px] text-teal-500 font-black uppercase tracking-widest mb-6",children:"Developed By"}),(0,P.jsxs)("div",{className:"flex items-center justify-between",children:[(0,P.jsxs)("p",{className:"text-3xl font-black tracking-tight uppercase italic leading-[0.9] text-white",children:["Lakruwan ",(0,P.jsx)("br",{})," Shashika"]}),(0,P.jsx)("a",{href:"https://www.linkedin.com/in/lakruwan-shashika/",target:"_blank",rel:"noreferrer",className:"bg-teal-600 p-4 rounded-[1.25rem] text-white hover:bg-teal-500 transition-all shadow-lg",children:(0,P.jsx)(f4,{size:28})})]})]}),(0,P.jsx)("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.5em] text-center italic",children:" 2025 LOGIC EDUCATION PLATFORM"})]})]})})}),h&&(0,P.jsx)(fK,{open:!!h,onOpenChange:()=>i(null),children:(0,P.jsxs)(fN,{className:"max-w-6xl max-h-[90vh] overflow-y-auto rounded-[4rem] p-12 bg-zinc-950 border border-white/10 shadow-2xl",children:[(0,P.jsxs)(fO,{className:"mb-12 text-center",children:[(0,P.jsx)(fP,{className:"text-5xl font-black tracking-tighter italic text-white uppercase",children:h.name}),(0,P.jsx)(fQ,{className:"text-sm font-black text-zinc-500 uppercase tracking-[0.3em] mt-2 italic underline underline-offset-8 decoration-teal-500 decoration-4",children:"Exclusive Gallery Archive"})]}),(0,P.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:h.image_urls.map((a,b)=>(0,P.jsx)("div",{className:"aspect-[4/3] rounded-[2.5rem] overflow-hidden border-4 border-white/5 shadow-2xl group transition-all hover:border-teal-500/30",children:(0,P.jsx)("img",{src:a,alt:`Gallery asset ${b}`,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-700 cursor-zoom-in",onClick:()=>window.open(a,"_blank")})},b))}),(0,P.jsx)("div",{className:"mt-16 flex justify-center",children:(0,P.jsx)(dR,{variant:"outline",className:"rounded-full px-16 h-16 font-black uppercase text-xs tracking-widest border-zinc-800 text-white hover:bg-white hover:text-black transition-all",onClick:()=>i(null),children:"Close Archive"})})]})})]})}function f9({className:a,type:b,...c}){return(0,P.jsx)("input",{type:b,"data-slot":"input",className:dP("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}function ga(a){var b;let c,d=(b=a,(c=Q.forwardRef((a,b)=>{let{children:c,...d}=a;if(Q.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==Q.Fragment&&(h.ref=b?cG(b,g):g),Q.cloneElement(c,h)}return Q.Children.count(c)>1?Q.Children.only(null):null})).displayName=`${b}.SlotClone`,c),e=Q.forwardRef((a,b)=>{let{children:c,...e}=a,f=Q.Children.toArray(c),g=f.find(gc);if(g){let a=g.props.children,c=f.map(b=>b!==g?b:Q.Children.count(a)>1?Q.Children.only(null):Q.isValidElement(a)?a.props.children:null);return(0,P.jsx)(d,{...e,ref:b,children:Q.isValidElement(a)?Q.cloneElement(a,void 0,c):null})}return(0,P.jsx)(d,{...e,ref:b,children:c})});return e.displayName=`${a}.Slot`,e}var gb=Symbol("radix.slottable");function gc(a){return Q.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===gb}function gd(a){let b=a+"CollectionProvider",[c,d]=d_(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=a=>{let{scope:b,children:c}=a,d=Q.default.useRef(null),f=Q.default.useRef(new Map).current;return(0,P.jsx)(e,{scope:b,itemMap:f,collectionRef:d,children:c})};g.displayName=b;let h=a+"CollectionSlot",i=ga(h),j=Q.default.forwardRef((a,b)=>{let{scope:c,children:d}=a,e=cH(b,f(h,c).collectionRef);return(0,P.jsx)(i,{ref:e,children:d})});j.displayName=h;let k=a+"CollectionItemSlot",l="data-radix-collection-item",m=ga(k),n=Q.default.forwardRef((a,b)=>{let{scope:c,children:d,...e}=a,g=Q.default.useRef(null),h=cH(b,g),i=f(k,c);return Q.default.useEffect(()=>(i.itemMap.set(g,{ref:g,...e}),()=>void i.itemMap.delete(g))),(0,P.jsx)(m,{...{[l]:""},ref:h,children:d})});return n.displayName=k,[{Provider:g,Slot:j,ItemSlot:n},function(b){let c=f(a+"CollectionConsumer",b);return Q.default.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${l}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},d]}var ge=new WeakMap;function gf(a,b){var c,d;let e,f,g;if("at"in Array.prototype)return Array.prototype.at.call(a,b);let h=(c=a,d=b,e=c.length,(g=(f=gg(d))>=0?f:e+f)<0||g>=e?-1:g);return -1===h?void 0:a[h]}function gg(a){return a!=a||0===a?0:Math.trunc(a)}(class a extends Map{#a;constructor(a){super(a),this.#a=[...super.keys()],ge.set(this,!0)}set(a,b){return ge.get(this)&&(this.has(a)?this.#a[this.#a.indexOf(a)]=a:this.#a.push(a)),super.set(a,b),this}insert(a,b,c){let d,e=this.has(b),f=this.#a.length,g=gg(a),h=g>=0?g:f+g,i=h<0||h>=f?-1:h;if(i===this.size||e&&i===this.size-1||-1===i)return this.set(b,c),this;let j=this.size+ +!e;g<0&&h++;let k=[...this.#a],l=!1;for(let a=h;a<j;a++)if(h===a){let f=k[a];k[a]===b&&(f=k[a+1]),e&&this.delete(b),d=this.get(f),this.set(b,c)}else{l||k[a-1]!==b||(l=!0);let c=k[l?a:a-1],e=d;d=this.get(c),this.delete(c),this.set(c,e)}return this}with(b,c,d){let e=new a(this);return e.insert(b,c,d),e}before(a){let b=this.#a.indexOf(a)-1;if(!(b<0))return this.entryAt(b)}setBefore(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d,b,c)}after(a){let b=this.#a.indexOf(a);if(-1!==(b=-1===b||b===this.size-1?-1:b+1))return this.entryAt(b)}setAfter(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d+1,b,c)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#a=[],super.clear()}delete(a){let b=super.delete(a);return b&&this.#a.splice(this.#a.indexOf(a),1),b}deleteAt(a){let b=this.keyAt(a);return void 0!==b&&this.delete(b)}at(a){let b=gf(this.#a,a);if(void 0!==b)return this.get(b)}entryAt(a){let b=gf(this.#a,a);if(void 0!==b)return[b,this.get(b)]}indexOf(a){return this.#a.indexOf(a)}keyAt(a){return gf(this.#a,a)}from(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.at(d)}keyFrom(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.keyAt(d)}find(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return d;c++}}findIndex(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return c;c++}return -1}filter(b,c){let d=[],e=0;for(let a of this)Reflect.apply(b,c,[a,e,this])&&d.push(a),e++;return new a(d)}map(b,c){let d=[],e=0;for(let a of this)d.push([a[0],Reflect.apply(b,c,[a,e,this])]),e++;return new a(d)}reduce(...a){let[b,c]=a,d=0,e=c??this.at(0);for(let c of this)e=0===d&&1===a.length?c:Reflect.apply(b,this,[e,c,d,this]),d++;return e}reduceRight(...a){let[b,c]=a,d=c??this.at(-1);for(let c=this.size-1;c>=0;c--){let e=this.at(c);d=c===this.size-1&&1===a.length?e:Reflect.apply(b,this,[d,e,c,this])}return d}toSorted(b){return new a([...this.entries()].sort(b))}toReversed(){let b=new a;for(let a=this.size-1;a>=0;a--){let c=this.keyAt(a),d=this.get(c);b.set(c,d)}return b}toSpliced(...b){let c=[...this.entries()];return c.splice(...b),new a(c)}slice(b,c){let d=new a,e=this.size-1;if(void 0===b)return d;b<0&&(b+=this.size),void 0!==c&&c>0&&(e=c-1);for(let a=b;a<=e;a++){let b=this.keyAt(a),c=this.get(b);d.set(b,c)}return d}every(a,b){let c=0;for(let d of this){if(!Reflect.apply(a,b,[d,c,this]))return!1;c++}return!0}some(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return!0;c++}return!1}});var gh=Q.createContext(void 0);function gi(a){let b=Q.useContext(gh);return a||b||"ltr"}var gj="rovingFocusGroup.onEntryFocus",gk={bubbles:!1,cancelable:!0},gl="RovingFocusGroup",[gm,gn,go]=gd(gl),[gp,gq]=d_(gl,[go]),[gr,gs]=gp(gl),gt=Q.forwardRef((a,b)=>(0,P.jsx)(gm.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,P.jsx)(gm.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,P.jsx)(gu,{...a,ref:b})})}));gt.displayName=gl;var gu=Q.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,orientation:d,loop:e=!1,dir:f,currentTabStopId:g,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:i,onEntryFocus:j,preventScrollOnEntryFocus:k=!1,...l}=a,m=Q.useRef(null),n=cH(b,m),o=gi(f),[p,q]=d5({prop:g,defaultProp:h??null,onChange:i,caller:gl}),[r,s]=Q.useState(!1),t=eb(j),u=gn(c),v=Q.useRef(!1),[w,x]=Q.useState(0);return Q.useEffect(()=>{let a=m.current;if(a)return a.addEventListener(gj,t),()=>a.removeEventListener(gj,t)},[t]),(0,P.jsx)(gr,{scope:c,orientation:d,dir:o,loop:e,currentTabStopId:p,onItemFocus:Q.useCallback(a=>q(a),[q]),onItemShiftTab:Q.useCallback(()=>s(!0),[]),onFocusableItemAdd:Q.useCallback(()=>x(a=>a+1),[]),onFocusableItemRemove:Q.useCallback(()=>x(a=>a-1),[]),children:(0,P.jsx)(d9.div,{tabIndex:r||0===w?-1:0,"data-orientation":d,...l,ref:n,style:{outline:"none",...a.style},onMouseDown:d$(a.onMouseDown,()=>{v.current=!0}),onFocus:d$(a.onFocus,a=>{let b=!v.current;if(a.target===a.currentTarget&&b&&!r){let b=new CustomEvent(gj,gk);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=u().filter(a=>a.focusable);gy([a.find(a=>a.active),a.find(a=>a.id===p),...a].filter(Boolean).map(a=>a.ref.current),k)}}v.current=!1}),onBlur:d$(a.onBlur,()=>s(!1))})})}),gv="RovingFocusGroupItem",gw=Q.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,focusable:d=!0,active:e=!1,tabStopId:f,children:g,...h}=a,i=d3(),j=f||i,k=gs(gv,c),l=k.currentTabStopId===j,m=gn(c),{onFocusableItemAdd:n,onFocusableItemRemove:o,currentTabStopId:p}=k;return Q.useEffect(()=>{if(d)return n(),()=>o()},[d,n,o]),(0,P.jsx)(gm.ItemSlot,{scope:c,id:j,focusable:d,active:e,children:(0,P.jsx)(d9.span,{tabIndex:l?0:-1,"data-orientation":k.orientation,...h,ref:b,onMouseDown:d$(a.onMouseDown,a=>{d?k.onItemFocus(j):a.preventDefault()}),onFocus:d$(a.onFocus,()=>k.onItemFocus(j)),onKeyDown:d$(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void k.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return gx[e]}(a,k.orientation,k.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=m().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=k.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>gy(e))}}),children:"function"==typeof g?g({isCurrentTabStop:l,hasTabStop:null!=p}):g})})});gw.displayName=gv;var gx={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gy(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var gz="Tabs",[gA,gB]=d_(gz,[gq]),gC=gq(),[gD,gE]=gA(gz),gF=Q.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,onValueChange:e,defaultValue:f,orientation:g="horizontal",dir:h,activationMode:i="automatic",...j}=a,k=gi(h),[l,m]=d5({prop:d,onChange:e,defaultProp:f??"",caller:gz});return(0,P.jsx)(gD,{scope:c,baseId:d3(),value:l,onValueChange:m,orientation:g,dir:k,activationMode:i,children:(0,P.jsx)(d9.div,{dir:k,"data-orientation":g,...j,ref:b})})});gF.displayName=gz;var gG="TabsList",gH=Q.forwardRef((a,b)=>{let{__scopeTabs:c,loop:d=!0,...e}=a,f=gE(gG,c),g=gC(c);return(0,P.jsx)(gt,{asChild:!0,...g,orientation:f.orientation,dir:f.dir,loop:d,children:(0,P.jsx)(d9.div,{role:"tablist","aria-orientation":f.orientation,...e,ref:b})})});gH.displayName=gG;var gI="TabsTrigger",gJ=Q.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,disabled:e=!1,...f}=a,g=gE(gI,c),h=gC(c),i=gM(g.baseId,d),j=gN(g.baseId,d),k=d===g.value;return(0,P.jsx)(gw,{asChild:!0,...h,focusable:!e,active:k,children:(0,P.jsx)(d9.button,{type:"button",role:"tab","aria-selected":k,"aria-controls":j,"data-state":k?"active":"inactive","data-disabled":e?"":void 0,disabled:e,id:i,...f,ref:b,onMouseDown:d$(a.onMouseDown,a=>{e||0!==a.button||!1!==a.ctrlKey?a.preventDefault():g.onValueChange(d)}),onKeyDown:d$(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&g.onValueChange(d)}),onFocus:d$(a.onFocus,()=>{let a="manual"!==g.activationMode;k||e||!a||g.onValueChange(d)})})})});gJ.displayName=gI;var gK="TabsContent",gL=Q.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,forceMount:e,children:f,...g}=a,h=gE(gK,c),i=gM(h.baseId,d),j=gN(h.baseId,d),k=d===h.value,l=Q.useRef(k);return Q.useEffect(()=>{let a=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,P.jsx)(er,{present:e||k,children:({present:c})=>(0,P.jsx)(d9.div,{"data-state":k?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":i,hidden:!c,id:j,tabIndex:0,...g,ref:b,style:{...a.style,animationDuration:l.current?"0s":void 0},children:c&&f})})});function gM(a,b){return`${a}-trigger-${b}`}function gN(a,b){return`${a}-content-${b}`}function gO({className:a,...b}){return(0,P.jsx)(gF,{"data-slot":"tabs",className:dP("flex flex-col gap-2",a),...b})}function gP({className:a,...b}){return(0,P.jsx)(gH,{"data-slot":"tabs-list",className:dP("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",a),...b})}function gQ({className:a,...b}){return(0,P.jsx)(gJ,{"data-slot":"tabs-trigger",className:dP("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...b})}function gR({className:a,...b}){return(0,P.jsx)(gL,{"data-slot":"tabs-content",className:dP("flex-1 outline-none",a),...b})}function gS({className:a,...b}){return(0,P.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,P.jsx)("table",{"data-slot":"table",className:dP("w-full caption-bottom text-sm",a),...b})})}function gT({className:a,...b}){return(0,P.jsx)("thead",{"data-slot":"table-header",className:dP("[&_tr]:border-b",a),...b})}function gU({className:a,...b}){return(0,P.jsx)("tbody",{"data-slot":"table-body",className:dP("[&_tr:last-child]:border-0",a),...b})}function gV({className:a,...b}){return(0,P.jsx)("tr",{"data-slot":"table-row",className:dP("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...b})}function gW({className:a,...b}){return(0,P.jsx)("th",{"data-slot":"table-head",className:dP("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...b})}function gX({className:a,...b}){return(0,P.jsx)("td",{"data-slot":"table-cell",className:dP("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...b})}gL.displayName=gK;let gY=fI("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),gZ=fI("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),g$=fI("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),g_=fI("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),g0=fI("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),g1=fI("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),g2=fI("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),g3=fI("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),g4=fI("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function g5({onNavigate:a}){let[b,c]=(0,Q.useState)(null),[d,e]=(0,Q.useState)([]),[f,g]=(0,Q.useState)(null),[h,i]=(0,Q.useState)([]),[j,k]=(0,Q.useState)([]),[l,m]=(0,Q.useState)(!0),[n,o]=(0,Q.useState)([]),[p,q]=(0,Q.useState)(""),[r,s]=(0,Q.useState)([]);async function t(){m(!0);let{data:{session:b}}=await cE.auth.getSession();if(!b?.user)return void a("home");let{data:d}=await cE.from("profiles").select("*").eq("id",b.user.id).single();c(d);let{data:f}=await cE.from("enrollments").select("classes (*)").eq("student_id",b.user.id);if(f){let a=f.map(a=>a.classes).filter(Boolean);e(a),a.length>0&&g(a[0].id)}let{data:h}=await cE.from("exam_results").select("*, classes (title)").eq("student_id",b.user.id).order("created_at",{ascending:!1});h&&k(h);let{data:i}=await cE.from("private_questions").select("*").eq("student_id",b.user.id).order("created_at",{ascending:!1});s(i||[]),m(!1)}async function u(){if(!f)return;let{data:a}=await cE.from("class_content").select("*").eq("class_id",f).order("created_at",{ascending:!1});a&&i(a);let{data:b}=await cE.from("class_messages").select("*").eq("class_id",f).order("created_at",{ascending:!1});o(b||[])}async function v(){if(!p.trim()||!b)return;let{error:a}=await cE.from("private_questions").insert([{student_id:b.id,student_name:b.full_name,question_text:p.trim()}]);if(a)alert("Submission Error: "+a.message);else{q("");let{data:a}=await cE.from("private_questions").select("*").eq("student_id",b.id).order("created_at",{ascending:!1});s(a||[])}}(0,Q.useEffect)(()=>{t()},[]),(0,Q.useEffect)(()=>{f&&b?.is_paid&&!b?.is_suspended&&u()},[f,b]);let w=async()=>{await cE.auth.signOut(),a("home")};if(l)return(0,P.jsx)("div",{className:"h-screen flex items-center justify-center font-bold text-teal-600 animate-pulse italic tracking-tighter",children:"ESTABLISHING SECURE GATEWAY..."});if(!b?.is_paid||b?.is_suspended)return(0,P.jsx)("div",{className:"h-screen flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:(0,P.jsxs)(dS,{className:"p-10 rounded-[3rem] shadow-2xl max-w-md border-t-8 border-rose-500 bg-white",children:[(0,P.jsx)("div",{className:"bg-rose-50 p-5 rounded-full w-fit mx-auto mb-6",children:b?.is_suspended?(0,P.jsx)(g2,{className:"size-12 text-rose-600"}):(0,P.jsx)(g1,{className:"size-12 text-rose-600"})}),(0,P.jsx)("h2",{className:"text-3xl font-black mb-4 tracking-tighter uppercase text-slate-800",children:"Access Restricted"}),(0,P.jsx)("p",{className:"text-slate-500 mb-8 font-medium leading-relaxed",children:b?.is_suspended?"Your account is currently suspended. Please contact the administration.":"Payment verification pending. Please settle your monthly dues to unlock your course materials."}),(0,P.jsx)(dR,{className:"w-full py-7 rounded-2xl font-black bg-slate-900 text-white shadow-xl",onClick:()=>a("home"),children:"Exit Portal"})]})});let x=d.find(a=>a.id===f);return(0,P.jsxs)("div",{className:"flex h-screen bg-[#F8FAFC] text-slate-900 overflow-hidden",children:[(0,P.jsxs)("aside",{className:"w-80 border-r p-6 bg-white flex flex-col shadow-sm",children:[(0,P.jsxs)("div",{className:"mb-10 px-2",children:[(0,P.jsx)("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter uppercase italic",children:"Logic Student"}),(0,P.jsx)("p",{className:"text-[9px] font-bold text-teal-600 tracking-[0.2em] uppercase mt-1",children:"Authorized Access"})]}),(0,P.jsxs)("div",{className:"flex-1 space-y-1 overflow-y-auto pr-2 custom-scrollbar",children:[(0,P.jsx)("p",{className:"text-[11px] uppercase font-black text-slate-400 ml-3 mb-4 tracking-widest",children:"Available Folders"}),d.map(a=>(0,P.jsxs)(dR,{variant:f===a.id?"default":"ghost",className:`w-full justify-start h-auto py-5 px-4 rounded-2xl transition-all mb-2 ${f===a.id?"bg-slate-900 shadow-xl ring-4 ring-slate-100":"hover:bg-slate-50"}`,onClick:()=>g(a.id),children:[(0,P.jsx)(gY,{className:`mr-4 h-6 w-6 ${f===a.id?"text-teal-400":"text-slate-400"}`}),(0,P.jsxs)("div",{className:"text-left overflow-hidden",children:[(0,P.jsx)("div",{className:`text-sm font-black truncate uppercase ${f===a.id?"text-white":"text-slate-700"}`,children:a.title}),(0,P.jsxs)("div",{className:`text-[10px] font-bold ${(a.id,"text-slate-400")}`,children:[a.year,"  ",a.type]})]})]},a.id))]}),(0,P.jsxs)("div",{className:"pt-6 border-t mt-auto space-y-4",children:[(0,P.jsxs)("div",{className:"px-4 py-3 bg-slate-50 rounded-2xl flex items-center gap-3 border",children:[(0,P.jsx)("div",{className:"size-10 bg-white rounded-xl flex items-center justify-center border shadow-sm font-black text-teal-600 italic",children:"L"}),(0,P.jsxs)("div",{className:"overflow-hidden",children:[(0,P.jsx)("p",{className:"text-xs font-black truncate",children:b?.full_name}),(0,P.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase truncate",children:b?.school_name})]})]}),(0,P.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,P.jsx)(dR,{variant:"outline",className:"text-xs h-10 rounded-xl font-bold",onClick:()=>a("home"),children:"Home"}),(0,P.jsx)(dR,{variant:"ghost",className:"text-xs h-10 rounded-xl font-bold text-rose-500 hover:bg-rose-50",onClick:w,children:"Logout"})]})]})]}),(0,P.jsx)("main",{className:"flex-1 p-10 overflow-auto",children:(0,P.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,P.jsxs)("header",{className:"flex justify-between items-start bg-white p-8 rounded-[2.5rem] shadow-sm border relative overflow-hidden",children:[(0,P.jsx)("div",{className:"absolute top-0 right-0 w-32 h-full bg-teal-50 -skew-x-12 translate-x-10 opacity-50"}),(0,P.jsxs)("div",{className:"space-y-3 relative z-10",children:[(0,P.jsx)("h1",{className:"text-4xl font-black tracking-tighter uppercase italic text-slate-800",children:x?.title||"Course Portal"}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)(dY,{className:"bg-teal-600 text-white border-none px-4 py-1 font-bold rounded-full",children:x?.year||"----"}),(0,P.jsx)(dY,{variant:"outline",className:"border-slate-200 text-slate-500 px-4 py-1 font-bold rounded-full uppercase text-[10px]",children:x?.type||"----"})]})]}),(0,P.jsxs)("div",{className:"text-right relative z-10",children:[(0,P.jsx)("p",{className:"text-xs uppercase font-black text-slate-400 tracking-widest mb-1",children:"Instructor"}),(0,P.jsx)("p",{className:"text-xl font-black text-slate-900 italic leading-none",children:"Dilshan Uthpala"})]})]}),(0,P.jsxs)(gO,{defaultValue:"video",className:"w-full",children:[(0,P.jsxs)(gP,{className:"mb-8 p-1.5 bg-slate-200/50 rounded-[1.5rem] h-16 w-fit shadow-inner",children:[(0,P.jsxs)(gQ,{value:"video",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,P.jsx)(g0,{size:14,className:"mr-2"})," Recordings"]}),(0,P.jsxs)(gQ,{value:"notes",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,P.jsx)(gZ,{size:14,className:"mr-2"})," Materials"]}),(0,P.jsxs)(gQ,{value:"marks",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,P.jsx)(g$,{size:14,className:"mr-2"})," Performance"]}),(0,P.jsxs)(gQ,{value:"inquiry",className:"rounded-xl font-black text-xs uppercase px-6 h-full data-[state=active]:bg-white data-[state=active]:shadow-md",children:[(0,P.jsx)(g4,{size:14,className:"mr-2"})," Q&A Help"]})]}),n.length>0&&(0,P.jsxs)("div",{className:"mb-10 space-y-3",children:[(0,P.jsxs)("p",{className:"text-[10px] font-black uppercase text-teal-600 tracking-widest ml-2 flex items-center gap-2",children:[(0,P.jsx)(fY,{size:12})," Class Updates"]}),n.map(a=>(0,P.jsxs)(dS,{className:"border-none bg-teal-600 text-white rounded-3xl shadow-xl shadow-teal-900/10 p-6 relative overflow-hidden group",children:[(0,P.jsx)(f0,{className:"absolute -right-2 -bottom-2 size-24 opacity-10 group-hover:scale-110 transition-transform"}),(0,P.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,P.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-teal-100",children:"Folder Announcement"}),(0,P.jsx)("span",{className:"text-[10px] font-bold opacity-60",children:new Date(a.created_at).toLocaleDateString()})]}),(0,P.jsx)("p",{className:"font-bold text-lg leading-relaxed relative z-10",children:a.message_text})]},a.id))]}),(0,P.jsx)(gR,{value:"video",className:"grid gap-4",children:h.filter(a=>"video"===a.type).length>0?h.filter(a=>"video"===a.type).map(a=>(0,P.jsxs)(dS,{className:"p-6 flex items-center justify-between bg-white rounded-[2rem] border-none shadow-sm hover:shadow-xl hover:scale-[1.01] transition-all group",children:[(0,P.jsxs)("div",{className:"flex items-center gap-6",children:[(0,P.jsx)("div",{className:"bg-slate-100 p-5 rounded-2xl group-hover:bg-slate-900 group-hover:text-white transition-all duration-300",children:(0,P.jsx)(g0,{className:"size-7 fill-current"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{className:"font-black text-xl block uppercase tracking-tight text-slate-800",children:a.title}),(0,P.jsxs)("span",{className:"text-[10px] uppercase font-bold text-slate-400 italic",children:["Logical Analysis  ",new Date(a.created_at).toLocaleDateString()]})]})]}),(0,P.jsx)(dR,{size:"lg",className:"rounded-2xl px-10 font-black bg-teal-600 hover:bg-teal-700 text-white uppercase text-xs h-14",onClick:()=>window.open(a.url,"_blank"),children:"Play Lesson"})]},a.id)):(0,P.jsx)("div",{className:"py-24 text-center border-4 border-dashed rounded-[3rem] text-slate-300 font-bold uppercase tracking-widest italic",children:"Choose a course folder to view recordings"})}),(0,P.jsx)(gR,{value:"notes",className:"grid gap-4",children:h.filter(a=>"note"===a.type).map(a=>(0,P.jsxs)(dS,{className:"p-6 flex items-center justify-between bg-white rounded-[2rem] border-2 border-transparent hover:border-teal-500/20 transition-all shadow-sm",children:[(0,P.jsxs)("div",{className:"flex items-center gap-6",children:[(0,P.jsx)("div",{className:"bg-orange-50 p-5 rounded-2xl text-orange-500",children:(0,P.jsx)(gZ,{className:"size-7"})}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{className:"font-black text-xl block uppercase tracking-tight text-slate-800",children:a.title}),(0,P.jsx)("p",{className:"text-[10px] font-bold text-teal-600 uppercase tracking-widest italic leading-none mt-1",children:"Verified PDF Material"})]})]}),(0,P.jsx)(dR,{variant:"ghost",size:"icon",className:"rounded-2xl size-14 hover:bg-teal-50 text-teal-600 transition-all border border-slate-100",onClick:()=>window.open(a.url,"_blank"),children:(0,P.jsx)(g_,{className:"h-7 w-7"})})]},a.id))}),(0,P.jsxs)(gR,{value:"marks",className:"space-y-6",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center px-4",children:[(0,P.jsx)("h3",{className:"text-xl font-black uppercase italic tracking-tight text-slate-800",children:"Verified Result History"}),(0,P.jsxs)(dY,{className:"bg-emerald-50 text-emerald-600 border border-emerald-100 px-4 py-1.5 rounded-full font-bold",children:["Total Entries: ",j.length]})]}),(0,P.jsx)(dS,{className:"border-none shadow-2xl overflow-hidden rounded-[2.5rem] bg-white",children:(0,P.jsxs)(gS,{children:[(0,P.jsx)(gT,{className:"bg-slate-900",children:(0,P.jsxs)(gV,{className:"hover:bg-transparent border-none",children:[(0,P.jsx)(gW,{className:"py-6 pl-10 font-black uppercase text-[10px] text-white",children:"Date Released"}),(0,P.jsx)(gW,{className:"font-black uppercase text-[10px] text-white text-center",children:"Paper / Exam Details"}),(0,P.jsx)(gW,{className:"text-right pr-10 font-black uppercase text-[10px] text-white",children:"Final Score"})]})}),(0,P.jsx)(gU,{children:j.map((a,b)=>(0,P.jsxs)(gV,{className:`border-slate-50 hover:bg-slate-50 transition-colors ${0===b?"bg-teal-50/20":""}`,children:[(0,P.jsx)(gX,{className:"py-8 pl-10 text-xs font-bold text-slate-400",children:new Date(a.created_at).toLocaleDateString()}),(0,P.jsx)(gX,{className:"text-center",children:(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:"text-[10px] font-black uppercase text-teal-600 mb-0.5",children:a.classes?.title}),(0,P.jsx)("span",{className:"font-black text-slate-800 uppercase italic text-sm",children:a.exam_name})]})}),(0,P.jsx)(gX,{className:"text-right pr-10",children:(0,P.jsxs)("div",{className:"flex flex-col items-end",children:[(0,P.jsxs)("span",{className:"text-4xl font-black text-teal-600 italic tracking-tighter leading-none",children:[a.marks,"%"]}),(0,P.jsx)("span",{className:"text-[8px] font-black uppercase text-slate-300 mt-1",children:"Assessment Confirmed"})]})})]},a.id))})]})})]}),(0,P.jsxs)(gR,{value:"inquiry",className:"grid gap-8",children:[(0,P.jsxs)(dS,{className:"p-8 rounded-[2.5rem] shadow-xl border-t-8 border-teal-500 bg-white",children:[(0,P.jsxs)(dU,{className:"mb-4 uppercase italic text-xl text-slate-800 flex items-center gap-2",children:[(0,P.jsx)(g4,{size:20,className:"text-teal-600"})," Help Desk"]}),(0,P.jsx)(dV,{className:"mb-6 font-medium text-slate-500",children:"Ask a question directly to Dilshan Uthpala. All inquiries are private between you and the instructor."}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)(f9,{placeholder:"Describe your logical doubt here...",className:"h-14 rounded-2xl bg-slate-50 border-none px-6 focus-visible:ring-teal-500",value:p,onChange:a=>q(a.target.value)}),(0,P.jsxs)(dR,{className:"bg-slate-900 text-white rounded-2xl px-10 font-black uppercase text-xs hover:bg-black transition-all",onClick:v,children:[(0,P.jsx)(g3,{size:16,className:"mr-2"})," Ask"]})]})]}),(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsx)("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-4",children:"Conversation History"}),r.map(a=>(0,P.jsxs)(dS,{className:"p-6 rounded-[2rem] border-none shadow-md bg-white",children:[(0,P.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,P.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:new Date(a.created_at).toLocaleDateString()}),a.is_resolved?(0,P.jsx)(dY,{className:"bg-teal-500 text-white border-none",children:"Answered"}):(0,P.jsx)(dY,{className:"bg-slate-100 text-slate-500 border-none font-bold italic uppercase text-[9px]",children:"Awaiting Reply"})]}),(0,P.jsxs)("p",{className:"font-bold text-slate-700 mb-4 bg-slate-50 p-4 rounded-xl border border-slate-100",children:["Q: ",a.question_text]}),a.admin_reply&&(0,P.jsxs)("div",{className:"p-5 bg-teal-50 rounded-2xl border border-teal-100 relative overflow-hidden",children:[(0,P.jsx)("div",{className:"absolute top-0 right-0 w-24 h-full bg-teal-600/5 -skew-x-12 translate-x-10"}),(0,P.jsx)("p",{className:"text-[10px] font-black text-teal-700 uppercase mb-2 tracking-widest",children:"Instructor Reply:"}),(0,P.jsxs)("p",{className:"text-sm font-medium text-slate-700 italic relative z-10 leading-relaxed",children:['"',a.admin_reply,'"']})]})]},a.id)),0===r.length&&(0,P.jsx)("div",{className:"py-24 text-center text-slate-300 font-bold uppercase italic border-4 border-dashed rounded-[3rem]",children:"No recorded inquiries"})]})]})]})]})})]})}var g6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=cL(`Primitive.${b}`),d=Q.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,P.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),g7=Q.forwardRef((a,b)=>(0,P.jsx)(g6.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));function g8({className:a,...b}){return(0,P.jsx)(g7,{"data-slot":"label",className:dP("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...b})}function g9({className:a,...b}){return(0,P.jsx)("textarea",{"data-slot":"textarea",className:dP("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...b})}g7.displayName="Label";let ha=["top","right","bottom","left"],hb=Math.min,hc=Math.max,hd=Math.round,he=Math.floor,hf=a=>({x:a,y:a}),hg={left:"right",right:"left",bottom:"top",top:"bottom"},hh={start:"end",end:"start"};function hi(a,b){return"function"==typeof a?a(b):a}function hj(a){return a.split("-")[0]}function hk(a){return a.split("-")[1]}function hl(a){return"x"===a?"y":"x"}function hm(a){return"y"===a?"height":"width"}let hn=new Set(["top","bottom"]);function ho(a){return hn.has(hj(a))?"y":"x"}function hp(a){return a.replace(/start|end/g,a=>hh[a])}let hq=["left","right"],hr=["right","left"],hs=["top","bottom"],ht=["bottom","top"];function hu(a){return a.replace(/left|right|bottom|top/g,a=>hg[a])}function hv(a){return"number"!=typeof a?{top:0,right:0,bottom:0,left:0,...a}:{top:a,right:a,bottom:a,left:a}}function hw(a){let{x:b,y:c,width:d,height:e}=a;return{width:d,height:e,top:c,left:b,right:b+d,bottom:c+e,x:b,y:c}}function hx(a,b,c){let d,{reference:e,floating:f}=a,g=ho(b),h=hl(ho(b)),i=hm(h),j=hj(b),k="y"===g,l=e.x+e.width/2-f.width/2,m=e.y+e.height/2-f.height/2,n=e[i]/2-f[i]/2;switch(j){case"top":d={x:l,y:e.y-f.height};break;case"bottom":d={x:l,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:m};break;case"left":d={x:e.x-f.width,y:m};break;default:d={x:e.x,y:e.y}}switch(hk(b)){case"start":d[h]-=n*(c&&k?-1:1);break;case"end":d[h]+=n*(c&&k?-1:1)}return d}let hy=async(a,b,c)=>{let{placement:d="bottom",strategy:e="absolute",middleware:f=[],platform:g}=c,h=f.filter(Boolean),i=await (null==g.isRTL?void 0:g.isRTL(b)),j=await g.getElementRects({reference:a,floating:b,strategy:e}),{x:k,y:l}=hx(j,d,i),m=d,n={},o=0;for(let c=0;c<h.length;c++){let{name:f,fn:p}=h[c],{x:q,y:r,data:s,reset:t}=await p({x:k,y:l,initialPlacement:d,placement:m,strategy:e,middlewareData:n,rects:j,platform:g,elements:{reference:a,floating:b}});k=null!=q?q:k,l=null!=r?r:l,n={...n,[f]:{...n[f],...s}},t&&o<=50&&(o++,"object"==typeof t&&(t.placement&&(m=t.placement),t.rects&&(j=!0===t.rects?await g.getElementRects({reference:a,floating:b,strategy:e}):t.rects),{x:k,y:l}=hx(j,m,i)),c=-1)}return{x:k,y:l,placement:m,strategy:e,middlewareData:n}};async function hz(a,b){var c;void 0===b&&(b={});let{x:d,y:e,platform:f,rects:g,elements:h,strategy:i}=a,{boundary:j="clippingAncestors",rootBoundary:k="viewport",elementContext:l="floating",altBoundary:m=!1,padding:n=0}=hi(b,a),o=hv(n),p=h[m?"floating"===l?"reference":"floating":l],q=hw(await f.getClippingRect({element:null==(c=await (null==f.isElement?void 0:f.isElement(p)))||c?p:p.contextElement||await (null==f.getDocumentElement?void 0:f.getDocumentElement(h.floating)),boundary:j,rootBoundary:k,strategy:i})),r="floating"===l?{x:d,y:e,width:g.floating.width,height:g.floating.height}:g.reference,s=await (null==f.getOffsetParent?void 0:f.getOffsetParent(h.floating)),t=await (null==f.isElement?void 0:f.isElement(s))&&await (null==f.getScale?void 0:f.getScale(s))||{x:1,y:1},u=hw(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:r,offsetParent:s,strategy:i}):r);return{top:(q.top-u.top+o.top)/t.y,bottom:(u.bottom-q.bottom+o.bottom)/t.y,left:(q.left-u.left+o.left)/t.x,right:(u.right-q.right+o.right)/t.x}}function hA(a,b){return{top:a.top-b.height,right:a.right-b.width,bottom:a.bottom-b.height,left:a.left-b.width}}function hB(a){return ha.some(b=>a[b]>=0)}let hC=new Set(["left","top"]);async function hD(a,b){let{placement:c,platform:d,elements:e}=a,f=await (null==d.isRTL?void 0:d.isRTL(e.floating)),g=hj(c),h=hk(c),i="y"===ho(c),j=hC.has(g)?-1:1,k=f&&i?-1:1,l=hi(b,a),{mainAxis:m,crossAxis:n,alignmentAxis:o}="number"==typeof l?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:l.mainAxis||0,crossAxis:l.crossAxis||0,alignmentAxis:l.alignmentAxis};return h&&"number"==typeof o&&(n="end"===h?-1*o:o),i?{x:n*k,y:m*j}:{x:m*j,y:n*k}}function hE(a){return function(a){return!1}(a)?(a.nodeName||"").toLowerCase():"#document"}function hF(a){var b;return(null==a||null==(b=a.ownerDocument)?void 0:b.defaultView)||window}function hG(a){var b;return null==(b=(function(a){return!1}(a)?a.ownerDocument:a.document)||window.document)?void 0:b.documentElement}function hH(a){return!1}let hI=new Set(["inline","contents"]);function hJ(a){let{overflow:b,overflowX:c,overflowY:d,display:e}=hU(a);return/auto|scroll|overlay|hidden|clip/.test(b+d+c)&&!hI.has(e)}let hK=new Set(["table","td","th"]),hL=[":popover-open",":modal"];function hM(a){return hL.some(b=>{try{return a.matches(b)}catch(a){return!1}})}let hN=["transform","translate","scale","rotate","perspective"],hO=["transform","translate","scale","rotate","perspective","filter"],hP=["paint","layout","strict","content"];function hQ(a){let b=hR(),c=a;return hN.some(a=>!!c[a]&&"none"!==c[a])||!!c.containerType&&"normal"!==c.containerType||!b&&!!c.backdropFilter&&"none"!==c.backdropFilter||!b&&!!c.filter&&"none"!==c.filter||hO.some(a=>(c.willChange||"").includes(a))||hP.some(a=>(c.contain||"").includes(a))}function hR(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let hS=new Set(["html","body","#document"]);function hT(a){return hS.has(hE(a))}function hU(a){return hF(a).getComputedStyle(a)}function hV(a){return{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function hW(a){if("html"===hE(a))return a;let b=a.assignedSlot||a.parentNode||!1||hG(a);return b}function hX(a,b,c){var d;void 0===b&&(b=[]),void 0===c&&(c=!0);let e=function a(b){let c=hW(b);return hT(c)?b.ownerDocument?b.ownerDocument.body:b.body:a(c)}(a),f=e===(null==(d=a.ownerDocument)?void 0:d.body),g=hF(e);if(f){let a=hY(g);return b.concat(g,g.visualViewport||[],hJ(e)?e:[],a&&c?hX(a):[])}return b.concat(e,hX(e,[],c))}function hY(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function hZ(a){let b=hU(a),c=parseFloat(b.width)||0,d=parseFloat(b.height)||0,e=!1,f=e?a.offsetWidth:c,g=e?a.offsetHeight:d,h=hd(c)!==f||hd(d)!==g;return h&&(c=f,d=g),{width:c,height:d,$:h}}function h$(a){return 0,a.contextElement}function h_(a){let b=h$(a);1;return hf(1)}let h0=hf(0);function h1(a){let b=hF(a);return hR()&&b.visualViewport?{x:b.visualViewport.offsetLeft,y:b.visualViewport.offsetTop}:h0}function h2(a,b,c,d){var e;void 0===b&&(b=!1),void 0===c&&(c=!1);let f=a.getBoundingClientRect(),g=h$(a),h=hf(1);b&&(d||(h=h_(a)));let i=(void 0===(e=c)&&(e=!1),d&&(!e||d===hF(g))&&e)?h1(g):hf(0),j=(f.left+i.x)/h.x,k=(f.top+i.y)/h.y,l=f.width/h.x,m=f.height/h.y;if(g){let a=hF(g),b=d,c=a,e=hY(c);for(;e&&d&&b!==c;){let a=h_(e),b=e.getBoundingClientRect(),d=hU(e),f=b.left+(e.clientLeft+parseFloat(d.paddingLeft))*a.x,g=b.top+(e.clientTop+parseFloat(d.paddingTop))*a.y;j*=a.x,k*=a.y,l*=a.x,m*=a.y,j+=f,k+=g,e=hY(c=hF(e))}}return hw({width:l,height:m,x:j,y:k})}function h3(a,b){let c=hV(a).scrollLeft;return b?b.left+c:h2(hG(a)).left+c}function h4(a,b){let c=a.getBoundingClientRect();return{x:c.left+b.scrollLeft-h3(a,c),y:c.top+b.scrollTop}}function h5(a,b,c){var d;let e;if("viewport"===b)e=function(a,b){let c=hF(a),d=hG(a),e=c.visualViewport,f=d.clientWidth,g=d.clientHeight,h=0,i=0;if(e){f=e.width,g=e.height;let a=hR();(!a||a&&"fixed"===b)&&(h=e.offsetLeft,i=e.offsetTop)}let j=h3(d);if(j<=0){let a=d.ownerDocument,b=a.body,c=getComputedStyle(b),e="CSS1Compat"===a.compatMode&&parseFloat(c.marginLeft)+parseFloat(c.marginRight)||0,g=Math.abs(d.clientWidth-b.clientWidth-e);g<=25&&(f-=g)}else j<=25&&(f+=j);return{width:f,height:g,x:h,y:i}}(a,c);else if("document"===b){let b,c,f,g,h,i,j;d=hG(a),b=hG(d),c=hV(d),f=d.ownerDocument.body,g=hc(b.scrollWidth,b.clientWidth,f.scrollWidth,f.clientWidth),h=hc(b.scrollHeight,b.clientHeight,f.scrollHeight,f.clientHeight),i=-c.scrollLeft+h3(d),j=-c.scrollTop,"rtl"===hU(f).direction&&(i+=hc(b.clientWidth,f.clientWidth)-g),e={width:g,height:h,x:i,y:j}}else{1;{let c=h1(a);e={x:b.x-c.x,y:b.y-c.y,width:b.width,height:b.height}}}return hw(e)}function h6(a){return"static"===hU(a).position}function h7(a,b){1;return null}function h8(a,b){var c;let d=hF(a);if(hM(a))return d;1;{let b=hW(a);for(;b&&!hT(b);){0;b=hW(b)}return d}}let h9=async function(a){let b=this.getOffsetParent||h8,c=this.getDimensions,d=await c(a.floating);return{reference:function(a,b,c){var d;let e=(d=0,!1),f=hG(b),g="fixed"===c,h=h2(a,!0,g,b),i={scrollLeft:0,scrollTop:0},j=hf(0);if(e||!e&&!g)if(("body"!==hE(b)||hJ(f))&&(i=hV(b)),e){let a=h2(b,!0,g,b);j.x=a.x+b.clientLeft,j.y=a.y+b.clientTop}else f&&(j.x=h3(f));g&&!e&&f&&(j.x=h3(f));let k=!f||e||g?hf(0):h4(f,i);return{x:h.left+i.scrollLeft-j.x-k.x,y:h.top+i.scrollTop-j.y-k.y,width:h.width,height:h.height}}(a.reference,await b(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}},ia={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){var b,c;let{elements:d,rect:e,offsetParent:f,strategy:g}=a,h="fixed"===g,i=hG(f),j=!!d&&hM(d.floating);if(f===i||j&&h)return e;let k={scrollLeft:0,scrollTop:0},l=hf(1),m=hf(0),n=(b=0,!1);(n||!n&&!h)&&(("body"!==hE(f)||hJ(i))&&(k=hV(f)),c=0,0);let o=!i||n||h?hf(0):h4(i,k);return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-k.scrollLeft*l.x+m.x+o.x,y:e.y*l.y-k.scrollTop*l.y+m.y+o.y}},getDocumentElement:hG,getClippingRect:function(a){let{element:b,boundary:c,rootBoundary:d,strategy:e}=a,f=[..."clippingAncestors"===c?hM(b)?[]:function(a,b){var c;let d=b.get(a);if(d)return d;let e=hX(a,[],!1).filter(a=>{var b;return b=0,!1}),f="fixed"===hU(a).position,g=f?hW(a):a;return c=0,b.set(a,e),e}(b,this._c):[].concat(c),d],g=f[0],h=f.reduce((a,c)=>{let d=h5(b,c,e);return a.top=hc(d.top,a.top),a.right=hb(d.right,a.right),a.bottom=hb(d.bottom,a.bottom),a.left=hc(d.left,a.left),a},h5(b,g,e));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}},getOffsetParent:h8,getElementRects:h9,getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){let{width:b,height:c}=hZ(a);return{width:b,height:c}},getScale:h_,isElement:hH,isRTL:function(a){return"rtl"===hU(a).direction}};function ib(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height}let ic=a=>({name:"arrow",options:a,async fn(b){let{x:c,y:d,placement:e,rects:f,platform:g,elements:h,middlewareData:i}=b,{element:j,padding:k=0}=hi(a,b)||{};if(null==j)return{};let l=hv(k),m={x:c,y:d},n=hl(ho(e)),o=hm(n),p=await g.getDimensions(j),q="y"===n,r=q?"clientHeight":"clientWidth",s=f.reference[o]+f.reference[n]-m[n]-f.floating[o],t=m[n]-f.reference[n],u=await (null==g.getOffsetParent?void 0:g.getOffsetParent(j)),v=u?u[r]:0;v&&await (null==g.isElement?void 0:g.isElement(u))||(v=h.floating[r]||f.floating[o]);let w=v/2-p[o]/2-1,x=hb(l[q?"top":"left"],w),y=hb(l[q?"bottom":"right"],w),z=v-p[o]-y,A=v/2-p[o]/2+(s/2-t/2),B=hc(x,hb(A,z)),C=!i.arrow&&null!=hk(e)&&A!==B&&f.reference[o]/2-(A<x?x:y)-p[o]/2<0,D=C?A<x?A-x:A-z:0;return{[n]:m[n]+D,data:{[n]:B,centerOffset:A-B-D,...C&&{alignmentOffset:D}},reset:C}}});var id="undefined"!=typeof document?Q.useLayoutEffect:function(){};function ie(a,b){let c,d,e;if(a===b)return!0;if(typeof a!=typeof b)return!1;if("function"==typeof a&&a.toString()===b.toString())return!0;if(a&&b&&"object"==typeof a){if(Array.isArray(a)){if((c=a.length)!==b.length)return!1;for(d=c;0!=d--;)if(!ie(a[d],b[d]))return!1;return!0}if((c=(e=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(d=c;0!=d--;)if(!({}).hasOwnProperty.call(b,e[d]))return!1;for(d=c;0!=d--;){let c=e[d];if(("_owner"!==c||!a.$$typeof)&&!ie(a[c],b[c]))return!1}return!0}return a!=a&&b!=b}function ig(a,b){let c=1;return Math.round(b*c)/c}function ih(a){let b=Q.useRef(a);return id(()=>{b.current=a}),b}var ii=Q.forwardRef((a,b)=>{let{children:c,width:d=10,height:e=5,...f}=a;return(0,P.jsx)(d9.svg,{...f,ref:b,width:d,height:e,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:(0,P.jsx)("polygon",{points:"0,0 30,0 15,10"})})});ii.displayName="Arrow";var ij="Popper",[ik,il]=d_(ij),[im,io]=ik(ij),ip=a=>{let{__scopePopper:b,children:c}=a,[d,e]=Q.useState(null);return(0,P.jsx)(im,{scope:b,anchor:d,onAnchorChange:e,children:c})};ip.displayName=ij;var iq="PopperAnchor",ir=Q.forwardRef((a,b)=>{let{__scopePopper:c,virtualRef:d,...e}=a,f=io(iq,c),g=Q.useRef(null),h=cH(b,g),i=Q.useRef(null);return Q.useEffect(()=>{let a=i.current;i.current=d?.current||g.current,a!==i.current&&f.onAnchorChange(i.current)}),d?null:(0,P.jsx)(d9.div,{...e,ref:h})});ir.displayName=iq;var is="PopperContent",[it,iu]=ik(is),iv=Q.forwardRef((a,b)=>{var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;let{__scopePopper:x,side:y="bottom",sideOffset:z=0,align:A="center",alignOffset:B=0,arrowPadding:C=0,avoidCollisions:D=!0,collisionBoundary:E=[],collisionPadding:F=0,sticky:G="partial",hideWhenDetached:H=!1,updatePositionStrategy:I="optimized",onPlaced:J,...K}=a,L=io(is,x),[M,N]=Q.useState(null),O=cH(b,a=>N(a)),[R,S]=Q.useState(null),T=function(a){let[b,c]=Q.useState(void 0);return d0(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(R),U=T?.width??0,V=T?.height??0,W="number"==typeof F?F:{top:0,right:0,bottom:0,left:0,...F},X=Array.isArray(E)?E:[E],Y=X.length>0,Z={padding:W,boundary:X.filter(iz),altBoundary:Y},{refs:$,floatingStyles:_,placement:aa,isPositioned:ab,middlewareData:ac}=function(a){void 0===a&&(a={});let{placement:b="bottom",strategy:c="absolute",middleware:d=[],platform:e,elements:{reference:f,floating:g}={},transform:h=!0,whileElementsMounted:i,open:j}=a,[k,l]=Q.useState({x:0,y:0,strategy:c,placement:b,middlewareData:{},isPositioned:!1}),[m,n]=Q.useState(d);ie(m,d)||n(d);let[o,p]=Q.useState(null),[q,r]=Q.useState(null),s=Q.useCallback(a=>{a!==w.current&&(w.current=a,p(a))},[]),t=Q.useCallback(a=>{a!==x.current&&(x.current=a,r(a))},[]),u=f||o,v=g||q,w=Q.useRef(null),x=Q.useRef(null),y=Q.useRef(k),z=null!=i,A=ih(i),B=ih(e),C=ih(j),D=Q.useCallback(()=>{var a,d;let e,f,g;if(!w.current||!x.current)return;let h={placement:b,strategy:c,middleware:m};B.current&&(h.platform=B.current),(a=w.current,d=x.current,e=new Map,g={...(f={platform:ia,...h}).platform,_c:e},hy(a,d,{...f,platform:g})).then(a=>{let b={...a,isPositioned:!1!==C.current};E.current&&!ie(y.current,b)&&(y.current=b,d6.flushSync(()=>{l(b)}))})},[m,b,c,B,C]);id(()=>{!1===j&&y.current.isPositioned&&(y.current.isPositioned=!1,l(a=>({...a,isPositioned:!1})))},[j]);let E=Q.useRef(!1);id(()=>(E.current=!0,()=>{E.current=!1}),[]),id(()=>{if(u&&(w.current=u),v&&(x.current=v),u&&v){if(A.current)return A.current(u,v,D);D()}},[u,v,D,A,z]);let F=Q.useMemo(()=>({reference:w,floating:x,setReference:s,setFloating:t}),[s,t]),G=Q.useMemo(()=>({reference:u,floating:v}),[u,v]),H=Q.useMemo(()=>{let a={position:c,left:0,top:0};if(!G.floating)return a;let b=ig(G.floating,k.x),d=ig(G.floating,k.y);if(h)return{...a,transform:"translate("+b+"px, "+d+"px)",...(G.floating,false)};return{position:c,left:b,top:d}},[c,h,G.floating,k.x,k.y]);return Q.useMemo(()=>({...k,update:D,refs:F,elements:G,floatingStyles:H}),[k,D,F,G,H])}({strategy:"fixed",placement:y+("center"!==A?"-"+A:""),whileElementsMounted:(...a)=>(function(a,b,c,d){let e;void 0===d&&(d={});let{ancestorScroll:f=!0,ancestorResize:g=!0,elementResize:h="function"==typeof ResizeObserver,layoutShift:i="function"==typeof IntersectionObserver,animationFrame:j=!1}=d,k=h$(a),l=f||g?[...k?hX(k):[],...hX(b)]:[];l.forEach(a=>{f&&a.addEventListener("scroll",c,{passive:!0}),g&&a.addEventListener("resize",c)});let m=k&&i?function(a,b){let c,d=null,e=hG(a);function f(){var a;clearTimeout(c),null==(a=d)||a.disconnect(),d=null}return!function g(h,i){void 0===h&&(h=!1),void 0===i&&(i=1),f();let j=a.getBoundingClientRect(),{left:k,top:l,width:m,height:n}=j;if(h||b(),!m||!n)return;let o={rootMargin:-he(l)+"px "+-he(e.clientWidth-(k+m))+"px "+-he(e.clientHeight-(l+n))+"px "+-he(k)+"px",threshold:hc(0,hb(1,i))||1},p=!0;function q(b){let d=b[0].intersectionRatio;if(d!==i){if(!p)return g();d?g(!1,d):c=setTimeout(()=>{g(!1,1e-7)},1e3)}1!==d||ib(j,a.getBoundingClientRect())||g(),p=!1}try{d=new IntersectionObserver(q,{...o,root:e.ownerDocument})}catch(a){d=new IntersectionObserver(q,o)}d.observe(a)}(!0),f}(k,c):null,n=-1,o=null;h&&(o=new ResizeObserver(a=>{let[d]=a;d&&d.target===k&&o&&(o.unobserve(b),cancelAnimationFrame(n),n=requestAnimationFrame(()=>{var a;null==(a=o)||a.observe(b)})),c()}),k&&!j&&o.observe(k),o.observe(b));let p=j?h2(a):null;return j&&function b(){let d=h2(a);p&&!ib(p,d)&&c(),p=d,e=requestAnimationFrame(b)}(),c(),()=>{var a;l.forEach(a=>{f&&a.removeEventListener("scroll",c),g&&a.removeEventListener("resize",c)}),null==m||m(),null==(a=o)||a.disconnect(),o=null,j&&cancelAnimationFrame(e)}})(...a,{animationFrame:"always"===I}),elements:{reference:L.anchor},middleware:[{...{name:"offset",options:e=c={mainAxis:z+V,alignmentAxis:B},async fn(a){var b,c;let{x:d,y:f,placement:g,middlewareData:h}=a,i=await hD(a,e);return g===(null==(b=h.offset)?void 0:b.placement)&&null!=(c=h.arrow)&&c.alignmentOffset?{}:{x:d+i.x,y:f+i.y,data:{...i,placement:g}}}},options:[c,d]},D&&{...{name:"shift",options:k=i={mainAxis:!0,crossAxis:!1,limiter:"partial"===G?{...(void 0===(h=f)&&(h={}),{options:h,fn(a){let{x:b,y:c,placement:d,rects:e,middlewareData:f}=a,{offset:g=0,mainAxis:i=!0,crossAxis:j=!0}=hi(h,a),k={x:b,y:c},l=ho(d),m=hl(l),n=k[m],o=k[l],p=hi(g,a),q="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(i){let a="y"===m?"height":"width",b=e.reference[m]-e.floating[a]+q.mainAxis,c=e.reference[m]+e.reference[a]-q.mainAxis;n<b?n=b:n>c&&(n=c)}if(j){var r,s;let a="y"===m?"width":"height",b=hC.has(hj(d)),c=e.reference[l]-e.floating[a]+(b&&(null==(r=f.offset)?void 0:r[l])||0)+(b?0:q.crossAxis),g=e.reference[l]+e.reference[a]+(b?0:(null==(s=f.offset)?void 0:s[l])||0)-(b?q.crossAxis:0);o<c?o=c:o>g&&(o=g)}return{[m]:n,[l]:o}}}),options:[f,g]}:void 0,...Z},async fn(a){let{x:b,y:c,placement:d}=a,{mainAxis:e=!0,crossAxis:f=!1,limiter:g={fn:a=>{let{x:b,y:c}=a;return{x:b,y:c}}},...h}=hi(k,a),i={x:b,y:c},j=await hz(a,h),l=ho(hj(d)),m=hl(l),n=i[m],o=i[l];if(e){let a="y"===m?"top":"left",b="y"===m?"bottom":"right",c=n+j[a],d=n-j[b];n=hc(c,hb(n,d))}if(f){let a="y"===l?"top":"left",b="y"===l?"bottom":"right",c=o+j[a],d=o-j[b];o=hc(c,hb(o,d))}let p=g.fn({...a,[m]:n,[l]:o});return{...p,data:{x:p.x-b,y:p.y-c,enabled:{[m]:e,[l]:f}}}}},options:[i,j]},D&&{...{name:"flip",options:n=l={...Z},async fn(a){var b,c,d,e,f,g,h,i;let j,k,l,{placement:m,middlewareData:o,rects:p,initialPlacement:q,platform:r,elements:s}=a,{mainAxis:t=!0,crossAxis:u=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...z}=hi(n,a);if(null!=(b=o.arrow)&&b.alignmentOffset)return{};let A=hj(m),B=ho(q),C=hj(q)===q,D=await (null==r.isRTL?void 0:r.isRTL(s.floating)),E=v||(C||!y?[hu(q)]:(j=hu(q),[hp(q),j,hp(j)])),F="none"!==x;!v&&F&&E.push(...(k=hk(q),l=function(a,b,c){switch(a){case"top":case"bottom":if(c)return b?hr:hq;return b?hq:hr;case"left":case"right":return b?hs:ht;default:return[]}}(hj(q),"start"===x,D),k&&(l=l.map(a=>a+"-"+k),y&&(l=l.concat(l.map(hp)))),l));let G=[q,...E],H=await hz(a,z),I=[],J=(null==(c=o.flip)?void 0:c.overflows)||[];if(t&&I.push(H[A]),u){let a,b,c,d,e=(g=m,h=p,void 0===(i=D)&&(i=!1),a=hk(g),c=hm(b=hl(ho(g))),d="x"===b?a===(i?"end":"start")?"right":"left":"start"===a?"bottom":"top",h.reference[c]>h.floating[c]&&(d=hu(d)),[d,hu(d)]);I.push(H[e[0]],H[e[1]])}if(J=[...J,{placement:m,overflows:I}],!I.every(a=>a<=0)){let a=((null==(d=o.flip)?void 0:d.index)||0)+1,b=G[a];if(b&&("alignment"!==u||B===ho(b)||J.every(a=>ho(a.placement)!==B||a.overflows[0]>0)))return{data:{index:a,overflows:J},reset:{placement:b}};let c=null==(e=J.filter(a=>a.overflows[0]<=0).sort((a,b)=>a.overflows[1]-b.overflows[1])[0])?void 0:e.placement;if(!c)switch(w){case"bestFit":{let a=null==(f=J.filter(a=>{if(F){let b=ho(a.placement);return b===B||"y"===b}return!0}).map(a=>[a.placement,a.overflows.filter(a=>a>0).reduce((a,b)=>a+b,0)]).sort((a,b)=>a[1]-b[1])[0])?void 0:f[0];a&&(c=a);break}case"initialPlacement":c=q}if(m!==c)return{reset:{placement:c}}}return{}}},options:[l,m]},{...{name:"size",options:q=o={...Z,apply:({elements:a,rects:b,availableWidth:c,availableHeight:d})=>{let{width:e,height:f}=b.reference,g=a.floating.style;g.setProperty("--radix-popper-available-width",`${c}px`),g.setProperty("--radix-popper-available-height",`${d}px`),g.setProperty("--radix-popper-anchor-width",`${e}px`),g.setProperty("--radix-popper-anchor-height",`${f}px`)}},async fn(a){var b,c;let d,e,{placement:f,rects:g,platform:h,elements:i}=a,{apply:j=()=>{},...k}=hi(q,a),l=await hz(a,k),m=hj(f),n=hk(f),o="y"===ho(f),{width:p,height:r}=g.floating;"top"===m||"bottom"===m?(d=m,e=n===(await (null==h.isRTL?void 0:h.isRTL(i.floating))?"start":"end")?"left":"right"):(e=m,d="end"===n?"top":"bottom");let s=r-l.top-l.bottom,t=p-l.left-l.right,u=hb(r-l[d],s),v=hb(p-l[e],t),w=!a.middlewareData.shift,x=u,y=v;if(null!=(b=a.middlewareData.shift)&&b.enabled.x&&(y=t),null!=(c=a.middlewareData.shift)&&c.enabled.y&&(x=s),w&&!n){let a=hc(l.left,0),b=hc(l.right,0),c=hc(l.top,0),d=hc(l.bottom,0);o?y=p-2*(0!==a||0!==b?a+b:hc(l.left,l.right)):x=r-2*(0!==c||0!==d?c+d:hc(l.top,l.bottom))}await j({...a,availableWidth:y,availableHeight:x});let z=await h.getDimensions(i.floating);return p!==z.width||r!==z.height?{reset:{rects:!0}}:{}}},options:[o,p]},R&&{...{name:"arrow",options:t=r={element:R,padding:C},fn(a){let{element:b,padding:c}="function"==typeof t?t(a):t;return b&&({}).hasOwnProperty.call(b,"current")?null!=b.current?ic({element:b.current,padding:c}).fn(a):{}:b?ic({element:b,padding:c}).fn(a):{}}},options:[r,s]},iA({arrowWidth:U,arrowHeight:V}),H&&{...{name:"hide",options:w=u={strategy:"referenceHidden",...Z},async fn(a){let{rects:b}=a,{strategy:c="referenceHidden",...d}=hi(w,a);switch(c){case"referenceHidden":{let c=hA(await hz(a,{...d,elementContext:"reference"}),b.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:hB(c)}}}case"escaped":{let c=hA(await hz(a,{...d,altBoundary:!0}),b.floating);return{data:{escapedOffsets:c,escaped:hB(c)}}}default:return{}}}},options:[u,v]}]}),[ad,ae]=iB(aa),af=eb(J);d0(()=>{ab&&af?.()},[ab,af]);let ag=ac.arrow?.x,ah=ac.arrow?.y,ai=ac.arrow?.centerOffset!==0,[aj,ak]=Q.useState();return d0(()=>{M&&ak(window.getComputedStyle(M).zIndex)},[M]),(0,P.jsx)("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:ab?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:aj,"--radix-popper-transform-origin":[ac.transformOrigin?.x,ac.transformOrigin?.y].join(" "),...ac.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:(0,P.jsx)(it,{scope:x,placedSide:ad,onArrowChange:S,arrowX:ag,arrowY:ah,shouldHideArrow:ai,children:(0,P.jsx)(d9.div,{"data-side":ad,"data-align":ae,...K,ref:O,style:{...K.style,animation:ab?void 0:"none"}})})})});iv.displayName=is;var iw="PopperArrow",ix={top:"bottom",right:"left",bottom:"top",left:"right"},iy=Q.forwardRef(function(a,b){let{__scopePopper:c,...d}=a,e=iu(iw,c),f=ix[e.placedSide];return(0,P.jsx)("span",{ref:e.onArrowChange,style:{position:"absolute",left:e.arrowX,top:e.arrowY,[f]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[e.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[e.placedSide],visibility:e.shouldHideArrow?"hidden":void 0},children:(0,P.jsx)(ii,{...d,ref:b,style:{...d.style,display:"block"}})})});function iz(a){return null!==a}iy.displayName=iw;var iA=a=>({name:"transformOrigin",options:a,fn(b){let{placement:c,rects:d,middlewareData:e}=b,f=e.arrow?.centerOffset!==0,g=f?0:a.arrowWidth,h=f?0:a.arrowHeight,[i,j]=iB(c),k={start:"0%",center:"50%",end:"100%"}[j],l=(e.arrow?.x??0)+g/2,m=(e.arrow?.y??0)+h/2,n="",o="";return"bottom"===i?(n=f?k:`${l}px`,o=`${-h}px`):"top"===i?(n=f?k:`${l}px`,o=`${d.floating.height+h}px`):"right"===i?(n=`${-h}px`,o=f?k:`${m}px`):"left"===i&&(n=`${d.floating.width+h}px`,o=f?k:`${m}px`),{data:{x:n,y:o}}}});function iB(a){let[b,c="center"]=a.split("-");return[b,c]}var iC=Symbol("radix.slottable");function iD(a){return Q.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===iC}var iE=["Enter"," "],iF=["ArrowUp","PageDown","End"],iG=["ArrowDown","PageUp","Home",...iF],iH={ltr:[...iE,"ArrowRight"],rtl:[...iE,"ArrowLeft"]},iI={ltr:["ArrowLeft"],rtl:["ArrowRight"]},iJ="Menu",[iK,iL,iM]=gd(iJ),[iN,iO]=d_(iJ,[iM,il,gq]),iP=il(),iQ=gq(),[iR,iS]=iN(iJ),[iT,iU]=iN(iJ),iV=a=>{let{__scopeMenu:b,open:c=!1,children:d,dir:e,onOpenChange:f,modal:g=!0}=a,h=iP(b),[i,j]=Q.useState(null),k=Q.useRef(!1),l=eb(f),m=gi(e);return Q.useEffect(()=>{let a=()=>{k.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>k.current=!1;return document.addEventListener("keydown",a,{capture:!0}),()=>{document.removeEventListener("keydown",a,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),(0,P.jsx)(ip,{...h,children:(0,P.jsx)(iR,{scope:b,open:c,onOpenChange:l,content:i,onContentChange:j,children:(0,P.jsx)(iT,{scope:b,onClose:Q.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:k,dir:m,modal:g,children:d})})})};iV.displayName=iJ;var iW=Q.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=iP(c);return(0,P.jsx)(ir,{...e,...d,ref:b})});iW.displayName="MenuAnchor";var iX="MenuPortal",[iY,iZ]=iN(iX,{forceMount:void 0}),i$=a=>{let{__scopeMenu:b,forceMount:c,children:d,container:e}=a,f=iS(iX,b);return(0,P.jsx)(iY,{scope:b,forceMount:c,children:(0,P.jsx)(er,{present:c||f.open,children:(0,P.jsx)(eq,{asChild:!0,container:e,children:d})})})};i$.displayName=iX;var i_="MenuContent",[i0,i1]=iN(i_),i2=Q.forwardRef((a,b)=>{let c=iZ(i_,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=iS(i_,a.__scopeMenu),g=iU(i_,a.__scopeMenu);return(0,P.jsx)(iK.Provider,{scope:a.__scopeMenu,children:(0,P.jsx)(er,{present:d||f.open,children:(0,P.jsx)(iK.Slot,{scope:a.__scopeMenu,children:g.modal?(0,P.jsx)(i3,{...e,ref:b}):(0,P.jsx)(i4,{...e,ref:b})})})})}),i3=Q.forwardRef((a,b)=>{let c=iS(i_,a.__scopeMenu),d=Q.useRef(null),e=cH(b,d);return Q.useEffect(()=>{let a=d.current;if(a)return e5(a)},[]),(0,P.jsx)(i6,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:d$(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),i4=Q.forwardRef((a,b)=>{let c=iS(i_,a.__scopeMenu);return(0,P.jsx)(i6,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),i5=((k=Q.forwardRef((a,b)=>{let{children:c,...d}=a;if(Q.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==Q.Fragment&&(h.ref=b?cG(b,g):g),Q.cloneElement(c,h)}return Q.Children.count(c)>1?Q.Children.only(null):null})).displayName="MenuContent.ScrollLock.SlotClone",g=k,(h=Q.forwardRef((a,b)=>{let{children:c,...d}=a,e=Q.Children.toArray(c),f=e.find(iD);if(f){let a=f.props.children,c=e.map(b=>b!==f?b:Q.Children.count(a)>1?Q.Children.only(null):Q.isValidElement(a)?a.props.children:null);return(0,P.jsx)(g,{...d,ref:b,children:Q.isValidElement(a)?Q.cloneElement(a,void 0,c):null})}return(0,P.jsx)(g,{...d,ref:b,children:c})})).displayName="MenuContent.ScrollLock.Slot",h),i6=Q.forwardRef((a,b)=>{let{__scopeMenu:c,loop:d=!1,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEntryFocus:i,onEscapeKeyDown:j,onPointerDownOutside:k,onFocusOutside:l,onInteractOutside:m,onDismiss:n,disableOutsideScroll:o,...p}=a,q=iS(i_,c),r=iU(i_,c),s=iP(c),t=iQ(c),u=iL(c),[v,w]=Q.useState(null),x=Q.useRef(null),y=cH(b,x,q.onContentChange),z=Q.useRef(0),A=Q.useRef(""),B=Q.useRef(0),C=Q.useRef(null),D=Q.useRef("right"),E=Q.useRef(0),F=o?e$:Q.Fragment;Q.useEffect(()=>()=>window.clearTimeout(z.current),[]),eu();let G=Q.useCallback(a=>{var b,c;return D.current===C.current?.side&&(b=a,!!(c=C.current?.area)&&function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}({x:b.clientX,y:b.clientY},c))},[]);return(0,P.jsx)(i0,{scope:c,searchRef:A,onItemEnter:Q.useCallback(a=>{G(a)&&a.preventDefault()},[G]),onItemLeave:Q.useCallback(a=>{G(a)||(x.current?.focus(),w(null))},[G]),onTriggerLeave:Q.useCallback(a=>{G(a)&&a.preventDefault()},[G]),pointerGraceTimerRef:B,onPointerGraceIntentChange:Q.useCallback(a=>{C.current=a},[]),children:(0,P.jsx)(F,{...o?{as:i5,allowPinchZoom:!0}:void 0,children:(0,P.jsx)(ek,{asChild:!0,trapped:e,onMountAutoFocus:d$(f,a=>{a.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:g,children:(0,P.jsx)(ee,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:j,onPointerDownOutside:k,onFocusOutside:l,onInteractOutside:m,onDismiss:n,children:(0,P.jsx)(gt,{asChild:!0,...t,dir:r.dir,orientation:"vertical",loop:d,currentTabStopId:v,onCurrentTabStopIdChange:w,onEntryFocus:d$(i,a=>{r.isUsingKeyboardRef.current||a.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,P.jsx)(iv,{role:"menu","aria-orientation":"vertical","data-state":jw(q.open),"data-radix-menu-content":"",dir:r.dir,...s,...p,ref:y,style:{outline:"none",...p.style},onKeyDown:d$(p.onKeyDown,a=>{let b=a.target.closest("[data-radix-menu-content]")===a.currentTarget,c=a.ctrlKey||a.altKey||a.metaKey,d=1===a.key.length;if(b){var e;let b,f,g,h,i,j;"Tab"===a.key&&a.preventDefault(),!c&&d&&(e=a.key,b=A.current+e,f=u().filter(a=>!a.disabled),g=document.activeElement,h=f.find(a=>a.ref.current===g)?.textValue,i=function(a,b,c){var d;let e=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,f=c?a.indexOf(c):-1,g=(d=Math.max(f,0),a.map((b,c)=>a[(d+c)%a.length]));1===e.length&&(g=g.filter(a=>a!==c));let h=g.find(a=>a.toLowerCase().startsWith(e.toLowerCase()));return h!==c?h:void 0}(f.map(a=>a.textValue),b,h),j=f.find(a=>a.textValue===i)?.ref.current,function a(b){A.current=b,window.clearTimeout(z.current),""!==b&&(z.current=window.setTimeout(()=>a(""),1e3))}(b),j&&setTimeout(()=>j.focus()))}let f=x.current;if(a.target!==f||!iG.includes(a.key))return;a.preventDefault();let g=u().filter(a=>!a.disabled).map(a=>a.ref.current);iF.includes(a.key)&&g.reverse(),function(a){let b=document.activeElement;for(let c of a)if(c===b||(c.focus(),document.activeElement!==b))return}(g)}),onBlur:d$(a.onBlur,a=>{a.currentTarget.contains(a.target)||(window.clearTimeout(z.current),A.current="")}),onPointerMove:d$(a.onPointerMove,jz(a=>{let b=a.target,c=E.current!==a.clientX;a.currentTarget.contains(b)&&c&&(D.current=a.clientX>E.current?"right":"left",E.current=a.clientX)}))})})})})})})});i2.displayName=i_;var i7=Q.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,P.jsx)(d9.div,{role:"group",...d,ref:b})});i7.displayName="MenuGroup";var i8=Q.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,P.jsx)(d9.div,{...d,ref:b})});i8.displayName="MenuLabel";var i9="MenuItem",ja="menu.itemSelect",jb=Q.forwardRef((a,b)=>{let{disabled:c=!1,onSelect:d,...e}=a,f=Q.useRef(null),g=iU(i9,a.__scopeMenu),h=i1(i9,a.__scopeMenu),i=cH(b,f),j=Q.useRef(!1);return(0,P.jsx)(jc,{...e,ref:i,disabled:c,onClick:d$(a.onClick,()=>{let a=f.current;if(!c&&a){let b=new CustomEvent(ja,{bubbles:!0,cancelable:!0});a.addEventListener(ja,a=>d?.(a),{once:!0}),ea(a,b),b.defaultPrevented?j.current=!1:g.onClose()}}),onPointerDown:b=>{a.onPointerDown?.(b),j.current=!0},onPointerUp:d$(a.onPointerUp,a=>{j.current||a.currentTarget?.click()}),onKeyDown:d$(a.onKeyDown,a=>{let b=""!==h.searchRef.current;c||b&&" "===a.key||iE.includes(a.key)&&(a.currentTarget.click(),a.preventDefault())})})});jb.displayName=i9;var jc=Q.forwardRef((a,b)=>{let{__scopeMenu:c,disabled:d=!1,textValue:e,...f}=a,g=i1(i9,c),h=iQ(c),i=Q.useRef(null),j=cH(b,i),[k,l]=Q.useState(!1),[m,n]=Q.useState("");return Q.useEffect(()=>{let a=i.current;a&&n((a.textContent??"").trim())},[f.children]),(0,P.jsx)(iK.ItemSlot,{scope:c,disabled:d,textValue:e??m,children:(0,P.jsx)(gw,{asChild:!0,...h,focusable:!d,children:(0,P.jsx)(d9.div,{role:"menuitem","data-highlighted":k?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...f,ref:j,onPointerMove:d$(a.onPointerMove,jz(a=>{d?g.onItemLeave(a):(g.onItemEnter(a),a.defaultPrevented||a.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:d$(a.onPointerLeave,jz(a=>g.onItemLeave(a))),onFocus:d$(a.onFocus,()=>l(!0)),onBlur:d$(a.onBlur,()=>l(!1))})})})}),jd=Q.forwardRef((a,b)=>{let{checked:c=!1,onCheckedChange:d,...e}=a;return(0,P.jsx)(jl,{scope:a.__scopeMenu,checked:c,children:(0,P.jsx)(jb,{role:"menuitemcheckbox","aria-checked":jx(c)?"mixed":c,...e,ref:b,"data-state":jy(c),onSelect:d$(e.onSelect,()=>d?.(!!jx(c)||!c),{checkForDefaultPrevented:!1})})})});jd.displayName="MenuCheckboxItem";var je="MenuRadioGroup",[jf,jg]=iN(je,{value:void 0,onValueChange:()=>{}}),jh=Q.forwardRef((a,b)=>{let{value:c,onValueChange:d,...e}=a,f=eb(d);return(0,P.jsx)(jf,{scope:a.__scopeMenu,value:c,onValueChange:f,children:(0,P.jsx)(i7,{...e,ref:b})})});jh.displayName=je;var ji="MenuRadioItem",jj=Q.forwardRef((a,b)=>{let{value:c,...d}=a,e=jg(ji,a.__scopeMenu),f=c===e.value;return(0,P.jsx)(jl,{scope:a.__scopeMenu,checked:f,children:(0,P.jsx)(jb,{role:"menuitemradio","aria-checked":f,...d,ref:b,"data-state":jy(f),onSelect:d$(d.onSelect,()=>e.onValueChange?.(c),{checkForDefaultPrevented:!1})})})});jj.displayName=ji;var jk="MenuItemIndicator",[jl,jm]=iN(jk,{checked:!1}),jn=Q.forwardRef((a,b)=>{let{__scopeMenu:c,forceMount:d,...e}=a,f=jm(jk,c);return(0,P.jsx)(er,{present:d||jx(f.checked)||!0===f.checked,children:(0,P.jsx)(d9.span,{...e,ref:b,"data-state":jy(f.checked)})})});jn.displayName=jk;var jo=Q.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,P.jsx)(d9.div,{role:"separator","aria-orientation":"horizontal",...d,ref:b})});jo.displayName="MenuSeparator";var jp=Q.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=iP(c);return(0,P.jsx)(iy,{...e,...d,ref:b})});jp.displayName="MenuArrow";var[jq,jr]=iN("MenuSub"),js="MenuSubTrigger",jt=Q.forwardRef((a,b)=>{let c=iS(js,a.__scopeMenu),d=iU(js,a.__scopeMenu),e=jr(js,a.__scopeMenu),f=i1(js,a.__scopeMenu),g=Q.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:i}=f,j={__scopeMenu:a.__scopeMenu},k=Q.useCallback(()=>{g.current&&window.clearTimeout(g.current),g.current=null},[]);return Q.useEffect(()=>k,[k]),Q.useEffect(()=>{let a=h.current;return()=>{window.clearTimeout(a),i(null)}},[h,i]),(0,P.jsx)(iW,{asChild:!0,...j,children:(0,P.jsx)(jc,{id:e.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":e.contentId,"data-state":jw(c.open),...a,ref:cG(b,e.onTriggerChange),onClick:b=>{a.onClick?.(b),a.disabled||b.defaultPrevented||(b.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:d$(a.onPointerMove,jz(b=>{f.onItemEnter(b),!b.defaultPrevented&&(a.disabled||c.open||g.current||(f.onPointerGraceIntentChange(null),g.current=window.setTimeout(()=>{c.onOpenChange(!0),k()},100)))})),onPointerLeave:d$(a.onPointerLeave,jz(a=>{k();let b=c.content?.getBoundingClientRect();if(b){let d=c.content?.dataset.side,e="right"===d,g=b[e?"left":"right"],i=b[e?"right":"left"];f.onPointerGraceIntentChange({area:[{x:a.clientX+(e?-5:5),y:a.clientY},{x:g,y:b.top},{x:i,y:b.top},{x:i,y:b.bottom},{x:g,y:b.bottom}],side:d}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>f.onPointerGraceIntentChange(null),300)}else{if(f.onTriggerLeave(a),a.defaultPrevented)return;f.onPointerGraceIntentChange(null)}})),onKeyDown:d$(a.onKeyDown,b=>{let e=""!==f.searchRef.current;a.disabled||e&&" "===b.key||iH[d.dir].includes(b.key)&&(c.onOpenChange(!0),c.content?.focus(),b.preventDefault())})})})});jt.displayName=js;var ju="MenuSubContent",jv=Q.forwardRef((a,b)=>{let c=iZ(i_,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=iS(i_,a.__scopeMenu),g=iU(i_,a.__scopeMenu),h=jr(ju,a.__scopeMenu),i=Q.useRef(null),j=cH(b,i);return(0,P.jsx)(iK.Provider,{scope:a.__scopeMenu,children:(0,P.jsx)(er,{present:d||f.open,children:(0,P.jsx)(iK.Slot,{scope:a.__scopeMenu,children:(0,P.jsx)(i6,{id:h.contentId,"aria-labelledby":h.triggerId,...e,ref:j,align:"start",side:"rtl"===g.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{g.isUsingKeyboardRef.current&&i.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:d$(a.onFocusOutside,a=>{a.target!==h.trigger&&f.onOpenChange(!1)}),onEscapeKeyDown:d$(a.onEscapeKeyDown,a=>{g.onClose(),a.preventDefault()}),onKeyDown:d$(a.onKeyDown,a=>{let b=a.currentTarget.contains(a.target),c=iI[g.dir].includes(a.key);b&&c&&(f.onOpenChange(!1),h.trigger?.focus(),a.preventDefault())})})})})})});function jw(a){return a?"open":"closed"}function jx(a){return"indeterminate"===a}function jy(a){return jx(a)?"indeterminate":a?"checked":"unchecked"}function jz(a){return b=>"mouse"===b.pointerType?a(b):void 0}jv.displayName=ju;var jA="DropdownMenu",[jB,jC]=d_(jA,[iO]),jD=iO(),[jE,jF]=jB(jA),jG=a=>{let{__scopeDropdownMenu:b,children:c,dir:d,open:e,defaultOpen:f,onOpenChange:g,modal:h=!0}=a,i=jD(b),j=Q.useRef(null),[k,l]=d5({prop:e,defaultProp:f??!1,onChange:g,caller:jA});return(0,P.jsx)(jE,{scope:b,triggerId:d3(),triggerRef:j,contentId:d3(),open:k,onOpenChange:l,onOpenToggle:Q.useCallback(()=>l(a=>!a),[l]),modal:h,children:(0,P.jsx)(iV,{...i,open:k,onOpenChange:l,dir:d,modal:h,children:c})})};jG.displayName=jA;var jH="DropdownMenuTrigger",jI=Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,disabled:d=!1,...e}=a,f=jF(jH,c),g=jD(c);return(0,P.jsx)(iW,{asChild:!0,...g,children:(0,P.jsx)(d9.button,{type:"button",id:f.triggerId,"aria-haspopup":"menu","aria-expanded":f.open,"aria-controls":f.open?f.contentId:void 0,"data-state":f.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...e,ref:cG(b,f.triggerRef),onPointerDown:d$(a.onPointerDown,a=>{!d&&0===a.button&&!1===a.ctrlKey&&(f.onOpenToggle(),f.open||a.preventDefault())}),onKeyDown:d$(a.onKeyDown,a=>{!d&&(["Enter"," "].includes(a.key)&&f.onOpenToggle(),"ArrowDown"===a.key&&f.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});jI.displayName=jH;var jJ=a=>{let{__scopeDropdownMenu:b,...c}=a,d=jD(b);return(0,P.jsx)(i$,{...d,...c})};jJ.displayName="DropdownMenuPortal";var jK="DropdownMenuContent",jL=Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jF(jK,c),f=jD(c),g=Q.useRef(!1);return(0,P.jsx)(i2,{id:e.contentId,"aria-labelledby":e.triggerId,...f,...d,ref:b,onCloseAutoFocus:d$(a.onCloseAutoFocus,a=>{g.current||e.triggerRef.current?.focus(),g.current=!1,a.preventDefault()}),onInteractOutside:d$(a.onInteractOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey,d=2===b.button||c;(!e.modal||d)&&(g.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jL.displayName=jK,Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(i7,{...e,...d,ref:b})}).displayName="DropdownMenuGroup",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(i8,{...e,...d,ref:b})}).displayName="DropdownMenuLabel";var jM=Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jb,{...e,...d,ref:b})});jM.displayName="DropdownMenuItem",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jd,{...e,...d,ref:b})}).displayName="DropdownMenuCheckboxItem",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jh,{...e,...d,ref:b})}).displayName="DropdownMenuRadioGroup",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jj,{...e,...d,ref:b})}).displayName="DropdownMenuRadioItem",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jn,{...e,...d,ref:b})}).displayName="DropdownMenuItemIndicator",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jo,{...e,...d,ref:b})}).displayName="DropdownMenuSeparator",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jp,{...e,...d,ref:b})}).displayName="DropdownMenuArrow",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jt,{...e,...d,ref:b})}).displayName="DropdownMenuSubTrigger",Q.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=jD(c);return(0,P.jsx)(jv,{...e,...d,ref:b,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent";let jN=fI("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function jO({...a}){return(0,P.jsx)(jG,{"data-slot":"dropdown-menu",...a})}function jP({...a}){return(0,P.jsx)(jI,{"data-slot":"dropdown-menu-trigger",...a})}function jQ({className:a,sideOffset:b=4,...c}){return(0,P.jsx)(jJ,{children:(0,P.jsx)(jL,{"data-slot":"dropdown-menu-content",sideOffset:b,className:dP("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...c})})}function jR({className:a,inset:b,variant:c="default",...d}){return(0,P.jsx)(jM,{"data-slot":"dropdown-menu-item","data-inset":b,"data-variant":c,className:dP("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...d})}fI("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);let jS=fI("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),jT=fI("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),jU=fI("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),jV=fI("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),jW=fI("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),jX=fI("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),jY=fI("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),jZ=fI("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),j$=fI("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),j_=fI("school",[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),j0=fI("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),j1=fI("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),j2=fI("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),j3=fI("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),j4=fI("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),j5=fI("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function j6({onNavigate:a}){let[b,c]=(0,Q.useState)("classes"),[d,e]=(0,Q.useState)([]),[f,g]=(0,Q.useState)([]),[h,i]=(0,Q.useState)([]),[j,k]=(0,Q.useState)([]),[l,m]=(0,Q.useState)(null),[n,o]=(0,Q.useState)([]),[p,q]=(0,Q.useState)([]),[r,s]=(0,Q.useState)([]),[t,u]=(0,Q.useState)(""),[v,w]=(0,Q.useState)(!0),[x,y]=(0,Q.useState)(!1),[z,A]=(0,Q.useState)(""),[B,C]=(0,Q.useState)([]),[D,E]=(0,Q.useState)([]),[F,G]=(0,Q.useState)({}),[H,I]=(0,Q.useState)(!1),[J,K]=(0,Q.useState)({title:"",content:""}),[L,M]=(0,Q.useState)({email:"",password:"",fullName:""}),[N,O]=(0,Q.useState)("Monthly Test"),[R,S]=(0,Q.useState)({}),[T,U]=(0,Q.useState)([]),[V,W]=(0,Q.useState)(""),[X,Y]=(0,Q.useState)([]),[Z,$]=(0,Q.useState)({email:"",password:"",fullName:"",academicYear:"",schoolName:"",phoneNumber:"",institute:""}),[_,aa]=(0,Q.useState)({title:"",year:"",type:"Theory",class_day:"",class_time:"",institute_name:"",class_category:"Group",instructor:"Dilshan Uthpala"}),[ab,ac]=(0,Q.useState)(null),[ad,ae]=(0,Q.useState)({title:"",url:"",type:"video"});async function af(){w(!0);try{let{data:a}=await cE.from("classes").select("*").order("year",{ascending:!1}),c=a||[];e(c);let{data:d}=await cE.from("notices").select("*").order("created_at",{ascending:!1});g(d||[]);let{data:f}=await cE.from("profiles").select("*").eq("role","admin");i(f||[]);let{data:h}=await cE.from("galleries").select("*").order("created_at",{ascending:!1});k(h||[]);let{data:j}=await cE.from("profiles").select("*").eq("role","student").order("full_name"),{data:l}=await cE.from("enrollments").select("student_id, class_id");if(j){let b=j.map(b=>({...b,enrolled_folders:l?.filter(a=>a.student_id===b.id).map(b=>(a||[]).find(a=>a.id===b.class_id)).filter(Boolean)||[]}));q(b)}"inquiries"===b&&await ah()}catch(a){console.error("Sync Error:",a.message)}w(!1)}(0,Q.useEffect)(()=>{af()},[b]),(0,Q.useEffect)(()=>{l&&(at(),aB(l.id),aA(l.id),ak(l.id))},[l]);let ag=p.filter(a=>a.full_name?.toLowerCase().includes(t.toLowerCase())||a.email?.toLowerCase().includes(t.toLowerCase())||a.phone_number?.includes(t));async function ah(){let{data:a}=await cE.from("private_questions").select("*").order("is_resolved",{ascending:!0}).order("created_at",{ascending:!1});E(a||[])}async function ai(a){let b=F[a];if(!b)return alert("Type a reply first");let{error:c}=await cE.from("private_questions").update({admin_reply:b,is_resolved:!0,replied_at:new Date().toISOString()}).eq("id",a);c?alert("Reply failed: "+c.message):(alert("Reply Sent!"),G(b=>{let c={...b};return delete c[a],c}),ah())}async function aj(){let{data:{session:a}}=await cE.auth.getSession(),b=a?.user?.id;if(!a?.user){let{data:a}=await cE.auth.refreshSession();b=a.session?.user?.id}if(!b)return alert("Security session lost. Please log out and log back in.");if(!z||!l)return alert("Enter message text.");let{error:c}=await cE.from("class_messages").insert([{class_id:l.id,sender_id:b,sender_name:"Dilshan Uthpala",message_text:z}]);c?alert("Messaging Error: "+c.message):(A(""),ak(l.id))}async function ak(a){let{data:b}=await cE.from("class_messages").select("*").eq("class_id",a).order("created_at",{ascending:!1});C(b||[])}async function al(){if(!L.email||!L.password||!L.fullName)return alert("Fill all fields");w(!0);let{data:a,error:b}=await cE.auth.signUp({email:L.email,password:L.password,options:{data:{full_name:L.fullName,role:"admin"}}});if(a.user){let{error:b}=await cE.from("profiles").upsert([{id:a.user.id,full_name:L.fullName,email:L.email,role:"admin"}]);b?alert("DB Error: "+b.message):(alert("Admin registered!"),M({email:"",password:"",fullName:""}),af())}else b&&alert(b.message);w(!1)}async function am(a){if(confirm("Permanently delete this student account?")){let{error:b}=await cE.from("profiles").delete().eq("id",a);b?alert("Delete failed: "+b.message):(alert("Student removed."),af())}}async function an(a){let{data:{user:b}}=await cE.auth.getUser();if(b?.email!=="lakruwanshashika21@gmail.com")return alert("Access Denied: Only the Super Admin can remove other Admins.");if(confirm("Revoke admin access?")){let{error:b}=await cE.from("profiles").delete().eq("id",a);b?alert("Deletion Error: "+b.message):af()}}async function ao(){if(!Z.email||!Z.password)return alert("Required fields missing");w(!0);try{let{data:a,error:b}=await cE.auth.signUp({email:Z.email,password:Z.password,options:{data:{full_name:Z.fullName,role:"student"}}});if(b)throw b;if(a.user){let{error:b}=await cE.from("profiles").insert([{id:a.user.id,full_name:Z.fullName,email:Z.email,academic_year:Z.academicYear,phone_number:Z.phoneNumber,role:"student"}]);if(b)throw b;I(!1),af(),alert("Student enrolled successfully!")}}catch(a){alert("Error: "+a.message)}finally{w(!1)}}async function ap(){if(!_.title||!_.year)return alert("Fill details");await cE.from("classes").insert([_]),aa({title:"",year:"",type:"Theory",class_day:"",class_time:"",institute_name:"",class_category:"Group",instructor:"Dilshan Uthpala"}),af()}async function aq(){await cE.from("classes").update(ab).eq("id",ab.id),ac(null),af()}async function ar(a){confirm("Delete class folder?")&&(await cE.from("classes").delete().eq("id",a),m(null),af())}async function as(a){confirm("Remove material?")&&(await cE.from("class_content").delete().eq("id",a),at())}async function at(){let{data:a}=await cE.from("class_content").select("*").eq("class_id",l.id);o(a||[])}async function au(a,b){let{data:c}=await cE.from("enrollments").select("*").eq("student_id",a).eq("class_id",b).maybeSingle();c?await cE.from("enrollments").delete().eq("student_id",a).eq("class_id",b):await cE.from("enrollments").insert([{student_id:a,class_id:b}]),af()}async function av(a){let b=a.target.files?.[0];if(b&&l){y(!0);try{let a=b.name.replace(/[^a-z0-9.]/gi,"_").toLowerCase(),c=`${l.id}/${Date.now()}_${a}`,{error:d}=await cE.storage.from("class-materials").upload(c,b);if(d)throw d;let{data:e}=cE.storage.from("class-materials").getPublicUrl(c);ae(a=>({...a,url:e.publicUrl,type:"note"}))}catch(a){alert("Upload failed")}finally{y(!1)}}}async function aw(){if(!ad.title||!ad.url)return alert("Fill details");await cE.from("class_content").insert([{...ad,class_id:l.id}]),ae({title:"",url:"",type:"video"}),at()}async function ax(a,b,c){let{error:d}=await cE.from("profiles").update({[b]:!c}).eq("id",a);d?alert("Update failed: "+d.message):af()}async function ay(){if(!J.title||!J.content)return alert("Fill all fields");await cE.from("notices").insert([J]),K({title:"",content:""}),af()}async function az(a){confirm("Remove notice?")&&(await cE.from("notices").delete().eq("id",a),af())}async function aA(a){let{data:b}=await cE.from("exam_results").select("*").eq("class_id",a).order("created_at",{ascending:!1});U(b||[])}async function aB(a){let{data:b}=await cE.from("enrollments").select("student_id").eq("class_id",a),c=b?.map(a=>a.student_id)||[];if(c.length>0){let{data:a}=await cE.from("profiles").select("*").in("id",c);s(a||[])}else s([])}async function aC(a,b,c){let d=R[a];if(!d)return alert("Enter mark");await cE.from("exam_results").insert([{student_id:a,class_id:l.id,student_name:b,school_name:c||"N/A",marks:parseFloat(d),exam_name:N,is_public:!0}]),S(b=>({...b,[a]:""})),aA(l.id)}async function aD(a){await cE.from("exam_results").update({is_public:!1}).eq("id",a),aA(l.id)}async function aE(a){let b=a.target.files;if(b&&0!==b.length){y(!0);for(let a=0;a<b.length;a++){let c=b[a],d=c.name.replace(/[^a-z0-9.]/gi,"_").toLowerCase(),e=`images/${Date.now()}_${d}`,{error:f}=await cE.storage.from("gallery").upload(e,c);if(!f){let{data:a}=cE.storage.from("gallery").getPublicUrl(e);Y(b=>[...b,a.publicUrl])}}y(!1)}}async function aF(){if(!V||0===X.length)return alert("Fill details");await cE.from("galleries").insert([{name:V,image_urls:X}]),W(""),Y([]),af()}async function aG(a,b){confirm("Delete gallery?")&&(await cE.from("galleries").delete().eq("id",a),af())}return v?(0,P.jsx)("div",{className:"h-screen flex items-center justify-center font-bold text-slate-900 italic",children:"Syncing Admin Hub..."}):(0,P.jsxs)("div",{className:"flex h-screen bg-[#F8FAFC] text-foreground",children:[(0,P.jsxs)("aside",{className:"w-72 border-r bg-white p-6 flex flex-col shadow-sm",children:[(0,P.jsxs)("div",{className:"mb-8 px-2",children:[(0,P.jsx)("h2",{className:"text-2xl font-black text-slate-800 tracking-tighter uppercase italic leading-none",children:"Logic Admin"}),(0,P.jsx)("p",{className:"text-[9px] font-bold text-teal-600 mt-2 tracking-widest uppercase",children:"   "})]}),(0,P.jsxs)("nav",{className:"space-y-1 flex-1",children:[(0,P.jsxs)(dR,{variant:"classes"===b?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>{c("classes"),m(null)},children:[(0,P.jsx)(jV,{size:18})," Course Folders"]}),(0,P.jsxs)(dR,{variant:"students"===b?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>c("students"),children:[(0,P.jsx)(jS,{size:18})," Student Access"]}),(0,P.jsxs)(dR,{variant:"inquiries"===b?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>c("inquiries"),children:[(0,P.jsx)(g4,{size:18})," Student Inquiries"]}),(0,P.jsxs)(dR,{variant:"notices"===b?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>c("notices"),children:[(0,P.jsx)(fY,{size:18})," Notice Board"]}),(0,P.jsxs)(dR,{variant:"gallery"===b?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>c("gallery"),children:[(0,P.jsx)(j2,{size:18})," Gallery Card"]}),(0,P.jsx)("div",{className:"h-px bg-zinc-100 my-4"}),(0,P.jsxs)(dR,{variant:"staff"===b?"default":"ghost",className:"w-full justify-start gap-3 rounded-xl h-11 font-bold",onClick:()=>c("staff"),children:[(0,P.jsx)(j4,{size:18})," Staff Details"]})]}),(0,P.jsx)(dR,{variant:"outline",className:"w-full rounded-xl border-2 font-black uppercase text-xs tracking-widest",onClick:()=>a("home"),children:"Exit Portal"})]}),(0,P.jsxs)("main",{className:"flex-1 p-10 overflow-auto",children:["students"===b&&(0,P.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,P.jsxs)("header",{className:"flex justify-between items-center",children:[(0,P.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter uppercase text-slate-800",children:"Student Access"}),(0,P.jsxs)(dR,{className:"bg-blue-700 h-12 px-6 rounded-xl font-bold text-white shadow-lg",onClick:()=>I(!0),children:[(0,P.jsx)(jX,{className:"mr-2"})," Enroll Student"]})]}),(0,P.jsxs)(dS,{className:"shadow-sm p-4 flex items-center gap-3 rounded-2xl border bg-white",children:[(0,P.jsx)(jY,{className:"text-slate-400 size-5"}),(0,P.jsx)(f9,{placeholder:"Search students...",className:"border-none shadow-none focus-visible:ring-0 text-lg",value:t,onChange:a=>u(a.target.value)})]}),(0,P.jsx)(dS,{className:"shadow-md border-none rounded-3xl overflow-hidden bg-white",children:(0,P.jsxs)(gS,{children:[(0,P.jsx)(gT,{className:"bg-zinc-950",children:(0,P.jsxs)(gV,{children:[(0,P.jsx)(gW,{className:"text-white font-bold py-5 pl-8",children:"Student Detail"}),(0,P.jsx)(gW,{className:"text-white font-bold",children:"Contact Info"}),(0,P.jsx)(gW,{className:"text-white font-bold",children:"Access Folders"}),(0,P.jsx)(gW,{className:"text-white font-bold text-center",children:"Fee Status"}),(0,P.jsx)(gW,{className:"text-white text-right pr-8 font-bold",children:"Manage"})]})}),(0,P.jsx)(gU,{children:ag.map(a=>(0,P.jsxs)(gV,{className:a.is_suspended?"opacity-50 grayscale":"border-zinc-50",children:[(0,P.jsxs)(gX,{className:"py-6 pl-8",children:[(0,P.jsx)("div",{className:"font-black uppercase text-sm text-slate-800",children:a.full_name}),(0,P.jsxs)("div",{className:"text-[10px] text-slate-400 font-bold italic lowercase",children:[a.academic_year||"---"," Exam Year"]})]}),(0,P.jsx)(gX,{children:(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsxs)("div",{className:"flex items-center gap-1.5 font-bold text-slate-600 text-xs",children:[(0,P.jsx)(f6,{size:12,className:"text-teal-600"})," ",a.phone_number||"N/A"]}),(0,P.jsx)("div",{className:"text-[10px] text-slate-400 font-medium lowercase",children:a.email})]})}),(0,P.jsx)(gX,{children:(0,P.jsx)("div",{className:"flex gap-1 flex-wrap",children:a.enrolled_folders?.map((a,b)=>(0,P.jsxs)(dY,{className:"bg-blue-50 text-blue-700 border-none text-[9px] font-black uppercase",children:[a.year," ",a.title]},b))||(0,P.jsx)("span",{className:"text-xs text-slate-300 italic",children:"None"})})}),(0,P.jsx)(gX,{className:"text-center",children:(0,P.jsx)(dR,{variant:"ghost",size:"sm",onClick:()=>ax(a.id,"is_paid",a.is_paid),className:`rounded-full px-4 h-8 font-black text-[10px] tracking-widest ${a.is_paid?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:a.is_paid?"PAID":"PENDING"})}),(0,P.jsx)(gX,{className:"text-right pr-8",children:(0,P.jsxs)(jO,{children:[(0,P.jsx)(jP,{asChild:!0,children:(0,P.jsx)(dR,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,P.jsx)(jZ,{size:18})})}),(0,P.jsxs)(jQ,{align:"end",className:"w-56 p-2 rounded-2xl shadow-2xl",children:[d.map(b=>{let c=a.enrolled_folders?.some(a=>a.id===b.id);return(0,P.jsxs)(jR,{onClick:()=>au(a.id,b.id),className:"flex justify-between items-center text-xs font-bold px-3",children:[(0,P.jsxs)("span",{children:[b.year," ",b.title]}),c&&(0,P.jsx)(jN,{size:14,className:"text-blue-600"})]},b.id)}),(0,P.jsx)("div",{className:"h-px bg-slate-100 my-2"}),(0,P.jsxs)(jR,{className:"gap-2 font-bold",onClick:()=>ax(a.id,"is_suspended",a.is_suspended),children:[(0,P.jsx)(j$,{size:16})," ",a.is_suspended?"Activate":"Suspend"]}),(0,P.jsxs)(jR,{className:"text-red-600 gap-2 font-bold",onClick:()=>am(a.id),children:[(0,P.jsx)(jT,{size:16})," Delete Account"]})]})]})})]},a.id))})]})})]}),"staff"===b&&(0,P.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in duration-500",children:[(0,P.jsx)("header",{children:(0,P.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter text-slate-800 uppercase leading-none",children:"Administrators"})}),(0,P.jsxs)(dS,{className:"p-8 rounded-[2.5rem] shadow-xl border-none bg-white",children:[(0,P.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-end",children:[(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Full Name"}),(0,P.jsx)(f9,{value:L.fullName,onChange:a=>M({...L,fullName:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Email"}),(0,P.jsx)(f9,{value:L.email,onChange:a=>M({...L,email:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Password"}),(0,P.jsx)(f9,{type:"password",value:L.password,onChange:a=>M({...L,password:a.target.value})})]})]}),(0,P.jsx)(dR,{className:"w-full mt-6 py-6 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl",onClick:al,children:"Register New Admin"})]}),(0,P.jsx)(dS,{className:"rounded-[2.5rem] overflow-hidden border-none shadow-md bg-white",children:(0,P.jsxs)(gS,{children:[(0,P.jsx)(gT,{className:"bg-slate-900",children:(0,P.jsxs)(gV,{children:[(0,P.jsx)(gW,{className:"text-white py-6 pl-10 font-black uppercase text-[10px] tracking-widest",children:"Admin Name"}),(0,P.jsx)(gW,{className:"text-white text-right pr-10 font-black uppercase text-[10px] tracking-widest",children:"Actions"})]})}),(0,P.jsx)(gU,{children:h.map(a=>(0,P.jsxs)(gV,{className:"border-slate-50 hover:bg-slate-50",children:[(0,P.jsxs)(gX,{className:"py-6 pl-10",children:[(0,P.jsx)("div",{className:"font-black uppercase text-sm italic",children:a.full_name}),(0,P.jsx)("div",{className:"text-[10px] font-bold text-slate-400",children:a.email})]}),(0,P.jsx)(gX,{className:"text-right pr-10",children:(0,P.jsx)(dR,{variant:"ghost",className:"text-rose-500 font-black text-[10px] uppercase",onClick:()=>an(a.id),children:"Revoke"})})]},a.id))})]})})]}),"inquiries"===b&&(0,P.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in duration-500",children:[(0,P.jsx)("header",{children:(0,P.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter text-slate-800 uppercase leading-none",children:"Student Inquiries"})}),(0,P.jsxs)("div",{className:"grid gap-6",children:[D.map(a=>(0,P.jsxs)(dS,{className:`p-6 rounded-[2rem] border-none shadow-xl bg-white ${!a.is_resolved?"ring-2 ring-teal-500":""}`,children:[(0,P.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"font-black text-slate-800 uppercase text-lg",children:a.student_name}),(0,P.jsx)("p",{className:"text-[10px] font-bold text-slate-400",children:new Date(a.created_at).toLocaleString()})]}),a.is_resolved?(0,P.jsx)(dY,{className:"bg-teal-500 text-white",children:"Replied"}):(0,P.jsx)(dY,{className:"bg-rose-500 text-white animate-pulse",children:"Pending"})]}),(0,P.jsxs)("p",{className:"text-slate-600 font-medium mb-6 bg-slate-50 p-4 rounded-2xl border",children:["Q: ",a.question_text]}),a.is_resolved?(0,P.jsxs)("div",{className:"p-4 bg-teal-50 rounded-2xl border border-teal-100",children:[(0,P.jsx)("p",{className:"text-[10px] font-black text-teal-700 uppercase mb-1",children:"Reply:"}),(0,P.jsxs)("p",{className:"text-sm font-medium text-slate-700 italic",children:['"',a.admin_reply,'"']})]}):(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsx)(f9,{placeholder:"Type your reply...",className:"h-12 rounded-xl",value:F[a.id]||"",onChange:b=>G({...F,[a.id]:b.target.value})}),(0,P.jsx)(dR,{onClick:()=>ai(a.id),className:"bg-teal-600 h-12 px-8 rounded-xl font-bold uppercase text-xs tracking-widest text-white",children:"Deliver Reply"})]})]},a.id)),0===D.length&&(0,P.jsx)("div",{className:"py-20 text-center text-slate-300 font-bold uppercase tracking-widest italic border-4 border-dashed rounded-[3rem]",children:"No student questions found."})]})]}),"classes"===b&&l&&(0,P.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,P.jsxs)(dR,{variant:"ghost",onClick:()=>m(null),className:"gap-2 font-bold",children:[(0,P.jsx)(jW,{size:16})," Folders"]}),(0,P.jsxs)("div",{className:"flex justify-between items-center bg-white p-8 rounded-[2.5rem] border shadow-sm",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h1",{className:"text-4xl font-black italic uppercase tracking-tighter text-slate-800",children:l.title}),(0,P.jsxs)("p",{className:"text-teal-600 font-bold uppercase text-[10px] tracking-widest",children:[l.institute_name,"  ",l.year]})]}),(0,P.jsxs)("div",{className:"flex gap-2",children:[(0,P.jsxs)(dR,{variant:"outline",className:"rounded-xl font-bold",onClick:()=>ac(l),children:[(0,P.jsx)(j1,{className:"mr-2 size-4"})," Edit"]}),(0,P.jsx)(dR,{variant:"destructive",size:"icon",className:"rounded-xl",onClick:()=>ar(l.id),children:(0,P.jsx)(jT,{size:18})})]})]}),(0,P.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,P.jsxs)("div",{className:"space-y-8",children:[(0,P.jsxs)(dS,{className:"p-6 rounded-[2.5rem] bg-white shadow-xl border-t-8 border-slate-900",children:[(0,P.jsxs)(dU,{className:"flex gap-2 items-center mb-4 italic uppercase text-lg text-slate-800",children:[(0,P.jsx)(f7,{size:20})," Message Enrolled Students"]}),(0,P.jsx)(g9,{placeholder:"Post an update...",className:"mb-4 rounded-2xl bg-slate-50 border-none p-4 font-medium",value:z,onChange:a=>A(a.target.value)}),(0,P.jsxs)(dR,{className:"w-full font-black uppercase text-xs tracking-widest bg-teal-600 text-white h-14 rounded-2xl shadow-lg",onClick:aj,children:[(0,P.jsx)(g3,{size:14,className:"mr-2"})," Post Message"]}),(0,P.jsx)("div",{className:"mt-8 space-y-3 max-h-64 overflow-y-auto pr-2 custom-scrollbar",children:B.map(a=>(0,P.jsxs)("div",{className:"p-4 bg-slate-50 rounded-2xl border",children:[(0,P.jsxs)("div",{className:"flex justify-between text-[9px] font-black text-slate-400 uppercase mb-1",children:[(0,P.jsx)("span",{children:a.sender_name}),(0,P.jsx)("span",{children:new Date(a.created_at).toLocaleDateString()})]}),(0,P.jsx)("p",{className:"text-sm font-medium text-slate-700",children:a.message_text})]},a.id))})]}),(0,P.jsxs)(dS,{className:"p-6 rounded-[2.5rem] bg-white shadow-md space-y-4",children:[(0,P.jsxs)(dU,{className:"flex gap-2 items-center italic uppercase text-lg text-slate-800",children:[(0,P.jsx)(j0,{size:20})," Upload Materials"]}),(0,P.jsx)(f9,{placeholder:"Title",className:"h-12 rounded-xl",value:ad.title,onChange:a=>ae({...ad,title:a.target.value})}),"video"===ad.type?(0,P.jsx)(f9,{placeholder:"Link",className:"h-12 rounded-xl",value:ad.url,onChange:a=>ae({...ad,url:a.target.value})}):(0,P.jsxs)("div",{className:"border-2 border-dashed p-6 rounded-[1.5rem] text-center bg-slate-50 relative",children:[(0,P.jsx)("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",id:"file-up",onChange:av}),(0,P.jsx)(g8,{htmlFor:"file-up",className:"cursor-pointer font-black uppercase text-[10px] tracking-widest text-slate-400",children:x?"Wait...":ad.url?"File Attached ":"Select PDF"})]}),(0,P.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,P.jsx)(dR,{variant:"video"===ad.type?"default":"outline",className:"flex-1 rounded-xl",onClick:()=>ae(a=>({...a,type:"video",url:""})),children:"Video URL"}),(0,P.jsx)(dR,{variant:"note"===ad.type?"default":"outline",className:"flex-1 rounded-xl",onClick:()=>ae(a=>({...a,type:"note",url:""})),children:"PDF Handout"})]}),(0,P.jsx)(dR,{className:"w-full py-7 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl shadow-xl",onClick:aw,disabled:x,children:"Confirm Upload"})]})]}),(0,P.jsxs)("div",{className:"space-y-8",children:[(0,P.jsxs)(dS,{className:"p-8 rounded-[2.5rem] bg-white shadow-md border-none",children:[(0,P.jsxs)(dU,{className:"mb-6 italic uppercase text-lg text-slate-800 flex justify-between",children:["Folder Content ",(0,P.jsx)(dY,{className:"bg-slate-100 text-slate-500 border-none font-bold",children:n.length})]}),(0,P.jsx)(gS,{children:(0,P.jsx)(gU,{children:n.map(a=>(0,P.jsxs)(gV,{className:"group border-slate-50 hover:bg-slate-50",children:[(0,P.jsx)(gX,{className:"py-4 font-black uppercase text-xs tracking-tight text-slate-700",children:(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)("div",{className:`p-2 rounded-lg ${"video"===a.type?"bg-blue-50 text-blue-500":"bg-orange-50 text-orange-500"}`,children:"video"===a.type?(0,P.jsx)(jU,{size:16}):(0,P.jsx)(gZ,{size:16})}),a.title]})}),(0,P.jsx)(gX,{children:(0,P.jsx)("a",{href:a.url,target:"_blank",className:"p-2 bg-slate-100 rounded-lg inline-block hover:bg-teal-500 text-slate-700 transition-all",children:(0,P.jsx)(j5,{size:14})})}),(0,P.jsx)(gX,{className:"text-right pr-0",children:(0,P.jsx)(dR,{variant:"ghost",size:"icon",className:"text-rose-500 opacity-0 group-hover:opacity-100 transition-all",onClick:()=>as(a.id),children:(0,P.jsx)(jT,{size:16})})})]},a.id))})})]}),(0,P.jsxs)(dS,{className:"p-8 rounded-[2.5rem] bg-white shadow-xl",children:[(0,P.jsxs)(dU,{className:"flex items-center gap-2 italic uppercase text-lg text-slate-800 mb-6",children:[(0,P.jsx)(fT,{className:"text-yellow-500"})," Marks Console"]}),(0,P.jsxs)("div",{className:"mb-6 p-4 bg-slate-50 rounded-2xl border border-dashed border-teal-500/30",children:[(0,P.jsx)(g8,{className:"text-[9px] font-black uppercase text-teal-600 tracking-widest ml-1",children:"Current Exam"}),(0,P.jsx)(f9,{placeholder:"Unit Test #01",value:N,onChange:a=>O(a.target.value),className:"mt-1 font-black uppercase h-12 bg-white border-none shadow-sm"})]}),(0,P.jsxs)(gS,{children:[(0,P.jsx)(gT,{children:(0,P.jsxs)(gV,{className:"hover:bg-transparent",children:[(0,P.jsx)(gW,{className:"font-black uppercase text-[10px]",children:"Student"}),(0,P.jsx)(gW,{className:"font-black uppercase text-[10px]",children:"Score %"}),(0,P.jsx)(gW,{className:"text-right font-black uppercase text-[10px]",children:"Action"})]})}),(0,P.jsx)(gU,{children:r.map(a=>{let b=T.find(b=>b.student_id===a.id);return(0,P.jsxs)(gV,{className:"border-slate-50",children:[(0,P.jsx)(gX,{className:"font-bold text-xs uppercase text-slate-700",children:a.full_name}),(0,P.jsx)(gX,{children:(0,P.jsx)(f9,{type:"number",className:"w-16 h-10 font-black text-teal-600 bg-slate-50 border-none shadow-inner",placeholder:"0",value:R[a.id]||"",onChange:b=>S({...R,[a.id]:b.target.value})})}),(0,P.jsxs)(gX,{className:"text-right flex gap-1 justify-end pt-5",children:[(0,P.jsx)(dR,{size:"sm",variant:"outline",className:"h-10 px-4 rounded-xl font-bold uppercase text-[10px] border-2",onClick:()=>aC(a.id,a.full_name,a.school_name),children:"Add"}),b&&b.is_public&&(0,P.jsx)(dR,{size:"sm",variant:"ghost",className:"h-10 w-10 p-0",onClick:()=>aD(b.id),children:(0,P.jsx)(j3,{size:14,className:"text-rose-500"})})]})]},a.id)})})]})]})]})]})]}),"classes"===b&&!l&&(0,P.jsxs)("div",{className:"space-y-6",children:[(0,P.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter text-slate-800 uppercase leading-none",children:"Course Management"}),(0,P.jsx)(dS,{className:"p-8 border-dashed border-2 bg-white/50 rounded-[2.5rem]",children:(0,P.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Year"}),(0,P.jsx)(f9,{placeholder:"2026",value:_.year,onChange:a=>aa({..._,year:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Course Name"}),(0,P.jsx)(f9,{placeholder:"Logic",value:_.title,onChange:a=>aa({..._,title:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Institute"}),(0,P.jsx)(f9,{placeholder:"Sakya",value:_.institute_name,onChange:a=>aa({..._,institute_name:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Type"}),(0,P.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:_.type,onChange:a=>aa({..._,type:a.target.value}),children:[(0,P.jsx)("option",{value:"Theory",children:"Theory"}),(0,P.jsx)("option",{value:"Revision",children:"Revision"})]})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Category"}),(0,P.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:_.class_category,onChange:a=>aa({..._,class_category:a.target.value}),children:[(0,P.jsx)("option",{value:"Group",children:"Group Class"}),(0,P.jsx)("option",{value:"Hall",children:"Hall Class"})]})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Day"}),(0,P.jsx)(f9,{placeholder:"Sunday",value:_.class_day,onChange:a=>aa({..._,class_day:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Time"}),(0,P.jsx)(f9,{placeholder:"8:30 AM",value:_.class_time,onChange:a=>aa({..._,class_time:a.target.value})})]}),(0,P.jsx)(dR,{onClick:ap,className:"w-full mt-auto py-6 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl shadow-xl",children:"Create New Folder"})]})}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 pt-10",children:d.map(a=>(0,P.jsx)(dS,{className:"hover:border-teal-500 cursor-pointer transition-all shadow-xl group relative rounded-[2.5rem] overflow-hidden bg-white border border-slate-100",onClick:()=>m(a),children:(0,P.jsxs)(dT,{className:"p-8",children:[(0,P.jsxs)(dY,{variant:"secondary",className:"w-fit mb-3 font-bold",children:[a.year," ",a.type]}),(0,P.jsx)(dU,{className:"text-2xl font-black italic uppercase tracking-tighter text-slate-800 leading-tight",children:a.title}),(0,P.jsxs)("div",{className:"mt-4 space-y-1 text-slate-500",children:[(0,P.jsxs)("p",{className:"flex items-center gap-2 text-sm font-bold",children:[(0,P.jsx)(j_,{size:14,className:"text-teal-600"})," ",a.institute_name]}),(0,P.jsxs)("p",{className:"flex items-center gap-2 text-xs font-medium",children:[(0,P.jsx)(fZ,{size:14})," ",a.class_day," @ ",a.class_time]})]})]})},a.id))})]}),"gallery"===b&&(0,P.jsxs)("div",{className:"max-w-6xl mx-auto space-y-10",children:[(0,P.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter uppercase text-slate-800",children:"Visual Archive"}),(0,P.jsx)(dS,{className:"p-8 border-dashed border-2 rounded-[2rem] bg-white",children:(0,P.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Album Name"}),(0,P.jsx)(f9,{value:V,onChange:a=>W(a.target.value)})]}),(0,P.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-8 text-center bg-zinc-50 relative",children:[(0,P.jsx)("input",{type:"file",multiple:!0,className:"absolute inset-0 opacity-0 cursor-pointer",onChange:aE}),(0,P.jsx)(j2,{className:"mx-auto size-10 text-zinc-400 mb-2"}),(0,P.jsx)("p",{className:"font-bold text-slate-400 uppercase text-xs tracking-widest",children:x?"Uploading...":"Click to Add Images"})]}),(0,P.jsx)(dR,{className:"w-full py-6 bg-slate-900 text-white rounded-2xl shadow-xl font-bold uppercase tracking-widest",onClick:aF,children:"Save to Gallery"})]}),(0,P.jsx)("div",{className:"grid grid-cols-4 gap-2 h-fit",children:X.map((a,b)=>(0,P.jsx)("img",{src:a,className:"size-20 object-cover rounded-xl border shadow-sm"},b))})]})}),(0,P.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-10",children:j.map(a=>(0,P.jsxs)(dS,{className:"relative group overflow-hidden rounded-[2.5rem] shadow-xl border-none",children:[(0,P.jsx)("img",{src:a.image_urls[0],className:"h-56 w-full object-cover transition-transform group-hover:scale-110 duration-700"}),(0,P.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-8",children:(0,P.jsx)("h3",{className:"text-white font-black uppercase italic text-xl",children:a.name})}),(0,P.jsx)(dR,{variant:"destructive",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all rounded-full shadow-lg",onClick:()=>aG(a.id,a.image_urls),children:(0,P.jsx)(jT,{size:16})})]},a.id))})]}),"notices"===b&&(0,P.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in duration-500",children:[(0,P.jsx)("header",{children:(0,P.jsx)("h1",{className:"text-4xl font-black italic tracking-tighter uppercase text-slate-800",children:"Public Announcements"})}),(0,P.jsx)(dS,{className:"p-8 rounded-[2.5rem] shadow-xl border-none bg-white",children:(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Notice Subject"}),(0,P.jsx)(f9,{value:J.title,onChange:a=>K({...J,title:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Content"}),(0,P.jsx)(g9,{rows:4,value:J.content,onChange:a=>K({...J,content:a.target.value})})]}),(0,P.jsx)(dR,{className:"w-full py-6 font-black bg-slate-900 text-white rounded-2xl shadow-lg",onClick:ay,children:"Deploy to Portal"})]})}),(0,P.jsx)("div",{className:"grid gap-4",children:f.map(a=>(0,P.jsxs)(dS,{className:"p-6 rounded-3xl flex justify-between items-center shadow-sm border-none bg-white",children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("h3",{className:"font-black uppercase italic tracking-tight",children:a.title}),(0,P.jsx)("p",{className:"text-[10px] text-zinc-400 font-bold mb-2",children:new Date(a.created_at).toLocaleString()}),(0,P.jsx)("p",{className:"text-sm text-zinc-500 max-w-xl leading-relaxed",children:a.content})]}),(0,P.jsx)(dR,{variant:"ghost",size:"icon",className:"text-rose-500 rounded-full hover:bg-rose-50",onClick:()=>az(a.id),children:(0,P.jsx)(jT,{size:18})})]},a.id))})]}),(0,P.jsx)(fK,{open:H,onOpenChange:I,children:(0,P.jsxs)(fN,{className:"rounded-[2.5rem] max-w-lg p-12 border-none shadow-2xl bg-white",children:[(0,P.jsxs)(fO,{className:"mb-6",children:[(0,P.jsx)(fP,{className:"text-3xl font-black italic tracking-tighter uppercase text-slate-800",children:"Enroll Student"}),(0,P.jsx)(fQ,{className:"font-bold text-slate-400 uppercase text-[10px] tracking-widest",children:"Initialize a new logic portal account."})]}),(0,P.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,P.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,P.jsx)(g8,{children:"Full Name"}),(0,P.jsx)(f9,{value:Z.fullName,onChange:a=>$({...Z,fullName:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Email Address"}),(0,P.jsx)(f9,{value:Z.email,onChange:a=>$({...Z,email:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Password"}),(0,P.jsx)(f9,{type:"password",value:Z.password,onChange:a=>$({...Z,password:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Exam Year"}),(0,P.jsx)(f9,{placeholder:"e.g. 2026",value:Z.academicYear,onChange:a=>$({...Z,academicYear:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{children:"Phone Number"}),(0,P.jsx)(f9,{value:Z.phoneNumber,onChange:a=>$({...Z,phoneNumber:a.target.value})})]}),(0,P.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,P.jsx)(g8,{children:"School Name"}),(0,P.jsx)(f9,{value:Z.schoolName,onChange:a=>$({...Z,schoolName:a.target.value})})]})]}),(0,P.jsx)(dR,{className:"w-full py-7 font-black uppercase text-xs tracking-widest bg-slate-900 text-white rounded-2xl mt-6 shadow-xl",onClick:ao,children:"Create & Authenticate"})]})}),ab&&(0,P.jsx)(fK,{open:!!ab,onOpenChange:()=>ac(null),children:(0,P.jsxs)(fN,{className:"rounded-3xl max-w-lg p-12 shadow-2xl border-none bg-white",children:[(0,P.jsx)(fO,{children:(0,P.jsx)(fP,{className:"text-2xl font-black italic uppercase text-slate-800",children:"Modify Folder"})}),(0,P.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4",children:[(0,P.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Title"}),(0,P.jsx)(f9,{value:ab.title||"",onChange:a=>ac({...ab,title:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Year"}),(0,P.jsx)(f9,{value:ab.year||"",onChange:a=>ac({...ab,year:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Institute"}),(0,P.jsx)(f9,{value:ab.institute_name||"",onChange:a=>ac({...ab,institute_name:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Day"}),(0,P.jsx)(f9,{value:ab.class_day||"",onChange:a=>ac({...ab,class_day:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Time"}),(0,P.jsx)(f9,{value:ab.class_time||"",onChange:a=>ac({...ab,class_time:a.target.value})})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Type"}),(0,P.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:ab.type||"",onChange:a=>ac({...ab,type:a.target.value}),children:[(0,P.jsx)("option",{value:"Theory",children:"Theory"}),(0,P.jsx)("option",{value:"Revision",children:"Revision"})]})]}),(0,P.jsxs)("div",{className:"space-y-1",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Category"}),(0,P.jsxs)("select",{className:"flex h-10 w-full rounded-md border bg-white px-3 py-2 text-sm",value:ab.class_category||"",onChange:a=>ac({...ab,class_category:a.target.value}),children:[(0,P.jsx)("option",{value:"Group",children:"Group Class"}),(0,P.jsx)("option",{value:"Hall",children:"Hall Class"})]})]})]}),(0,P.jsx)(dR,{onClick:aq,className:"w-full py-7 font-black bg-slate-900 text-white rounded-2xl uppercase text-[10px] tracking-widest",children:"Commit Changes"})]})})]})]})}let j7=fI("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),j8=fI("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function j9({onNavigate:a}){let[b,c]=(0,Q.useState)(""),[d,e]=(0,Q.useState)(""),[f,g]=(0,Q.useState)(!1),[h,i]=(0,Q.useState)(!1),[j,k]=(0,Q.useState)(null),l=async c=>{c.preventDefault(),g(!0),k(null);let e=b.trim().toLowerCase();try{let{data:b,error:c}=await cE.auth.signInWithPassword({email:e,password:d});if(c)throw c;if("lakruwanshashika21@gmail.com"===e)return void a("admin");let{data:f,error:g}=await cE.from("profiles").select("role").eq("id",b.user.id).single();if(g||f?.role!=="admin")throw await cE.auth.signOut(),Error("Access denied. Authorized personnel only.");a("admin")}catch(a){a.message?.includes("500")||"PGRST301"===a.code?k("Server Sync Error. If you are the Super Admin, please refresh and try once more."):k(a.message)}finally{g(!1)}},m=async()=>{if(!b)return void alert("Please enter your admin email first.");i(!0);try{let{error:a}=await cE.auth.resetPasswordForEmail(b.trim(),{redirectTo:`${window.location.origin}/#type=recovery`});if(a)throw a;alert("Admin recovery link sent to your inbox.")}catch(a){alert(a.message)}finally{i(!1)}};return(0,P.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-[#F8FAFC] p-6 relative",children:[(0,P.jsxs)(dR,{variant:"ghost",className:"absolute top-8 left-8 gap-2 font-bold text-zinc-500 hover:text-slate-900 transition-colors",onClick:()=>a("home"),children:[(0,P.jsx)(jW,{size:18})," Exit Portal"]}),(0,P.jsxs)(dS,{className:"w-full max-w-md rounded-[2.5rem] shadow-2xl border-none bg-white overflow-hidden",children:[(0,P.jsx)("div",{className:"h-3 bg-slate-900 w-full"}),(0,P.jsxs)(dT,{className:"pt-10 pb-6 text-center",children:[(0,P.jsx)("div",{className:"size-20 bg-slate-900/5 rounded-[1.5rem] flex items-center justify-center mx-auto mb-6",children:(0,P.jsx)(j4,{className:"text-slate-900 size-12"})}),(0,P.jsx)(dU,{className:"text-4xl font-black italic uppercase tracking-tighter text-slate-800",children:"Admin Login"}),(0,P.jsx)(dV,{className:"font-bold text-zinc-400 uppercase text-[10px] tracking-widest mt-2",children:"Secure Infrastructure Access"})]}),(0,P.jsxs)(dW,{className:"px-10 pb-12",children:[(0,P.jsxs)("form",{onSubmit:l,className:"space-y-5",children:[(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(g8,{className:"text-[11px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"Admin Email"}),(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(f5,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,P.jsx)(f9,{type:"email",placeholder:"admin@logic.com",className:"pl-12 h-14 rounded-2xl bg-zinc-50 border-none focus-visible:ring-2 ring-slate-900 transition-all text-base",value:b,onChange:a=>c(a.target.value),required:!0})]})]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,P.jsx)(g8,{className:"text-[11px] font-black uppercase tracking-widest text-zinc-400",children:"Password"}),(0,P.jsx)("button",{type:"button",onClick:m,className:"text-[10px] font-black text-slate-900 hover:underline uppercase tracking-tighter transition-all",disabled:h,children:h?"Sending...":"Recover Key?"})]}),(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(g1,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,P.jsx)(f9,{type:"password",placeholder:"",className:"pl-12 h-14 rounded-2xl bg-zinc-50 border-none focus-visible:ring-2 ring-slate-900 transition-all text-base",value:d,onChange:a=>e(a.target.value),required:!0})]})]}),j&&(0,P.jsxs)("div",{className:"bg-rose-50 border border-rose-100 text-rose-600 p-4 rounded-2xl flex items-start gap-3 animate-in fade-in zoom-in duration-300",children:[(0,P.jsx)(j8,{className:"size-5 mt-0.5 shrink-0"}),(0,P.jsx)("p",{className:"text-xs font-bold leading-relaxed",children:j})]}),(0,P.jsx)(dR,{type:"submit",className:"w-full h-16 rounded-2xl bg-slate-900 text-white font-black text-xl shadow-xl shadow-slate-200 mt-4 active:scale-95 transition-all",disabled:f,children:f?(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsx)(j7,{className:"animate-spin size-5"}),(0,P.jsx)("span",{children:"Verifying..."})]}):"Verify & Enter"})]}),(0,P.jsx)("div",{className:"mt-8 text-center",children:(0,P.jsx)("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-[0.3em]",children:"Authorized Personnel Only"})})]})]})]})}function ka({onNavigate:a}){let[b,c]=(0,Q.useState)(""),[d,e]=(0,Q.useState)(""),[f,g]=(0,Q.useState)(!1),[h,i]=(0,Q.useState)(!1);async function j(c){c.preventDefault(),g(!0);try{let{data:c,error:e}=await cE.auth.signInWithPassword({email:b.trim(),password:d});if(e)throw e;let{data:f,error:g}=await cE.from("profiles").select("role").eq("id",c.user.id).single();if(g||f?.role!=="student"){await cE.auth.signOut(),alert("Access Denied: This portal is reserved for registered students only.");return}a("student-dashboard")}catch(a){alert("Login Error: "+a.message)}finally{g(!1)}}async function k(){if(!b)return void alert("Please enter your email address first so we can send a reset link.");i(!0);try{let{error:a}=await cE.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/#type=recovery`});if(a)throw a;alert("Verification email sent! Please check your inbox to reset your password.")}catch(a){alert("Error: "+a.message)}finally{i(!1)}}return(0,P.jsxs)("div",{className:"min-h-screen bg-[#F8FAFC] dark:bg-zinc-950 flex flex-col items-center justify-center p-6 relative",children:[(0,P.jsxs)(dR,{variant:"ghost",className:"absolute top-8 left-8 gap-2 font-bold text-zinc-500 hover:text-primary transition-colors",onClick:()=>a("home"),children:[(0,P.jsx)(jW,{size:18})," Back to Homepage"]}),(0,P.jsxs)(dS,{className:"w-full max-w-md border-none shadow-2xl rounded-[2.5rem] overflow-hidden bg-white dark:bg-zinc-900",children:[(0,P.jsx)("div",{className:"h-3 bg-primary w-full"}),(0,P.jsxs)(dT,{className:"pt-10 pb-6 text-center",children:[(0,P.jsx)("div",{className:"size-20 bg-primary/10 rounded-[1.5rem] flex items-center justify-center mx-auto mb-6",children:(0,P.jsx)(g$,{className:"size-12 text-primary"})}),(0,P.jsx)(dU,{className:"text-4xl font-black tracking-tighter uppercase italic text-zinc-900 dark:text-white",children:"Student Login"}),(0,P.jsx)(dV,{className:"text-zinc-500 font-medium text-lg mt-2",children:"Access your recordings and materials."})]}),(0,P.jsxs)(dW,{className:"space-y-6 pb-12 px-10",children:[(0,P.jsxs)("form",{onSubmit:j,className:"space-y-5",children:[(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(g8,{className:"text-[11px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"Registered Email"}),(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(f5,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,P.jsx)(f9,{type:"email",placeholder:"student@example.com",className:"pl-12 h-14 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border-none focus-visible:ring-2 ring-primary transition-all text-base",value:b,onChange:a=>c(a.target.value),required:!0})]})]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,P.jsx)(g8,{className:"text-[11px] font-black uppercase tracking-widest text-zinc-400",children:"Password"}),(0,P.jsx)("button",{type:"button",onClick:k,className:"text-[10px] font-black text-primary hover:underline uppercase tracking-tighter transition-all",disabled:h,children:h?"Processing...":"Forgot Key?"})]}),(0,P.jsxs)("div",{className:"relative",children:[(0,P.jsx)(g1,{className:"absolute left-4 top-1/2 -translate-y-1/2 size-5 text-zinc-400"}),(0,P.jsx)(f9,{type:"password",placeholder:"",className:"pl-12 h-14 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border-none focus-visible:ring-2 ring-primary transition-all text-base",value:d,onChange:a=>e(a.target.value),required:!0})]})]}),(0,P.jsx)(dR,{type:"submit",className:"w-full h-15 rounded-2xl font-black text-xl shadow-xl shadow-primary/20 mt-6 active:scale-95 transition-transform",disabled:f,children:f?(0,P.jsxs)("div",{className:"flex items-center gap-2",children:[(0,P.jsx)(j7,{className:"animate-spin size-5"}),(0,P.jsx)("span",{children:"Verifying..."})]}):"Enter Dashboard"})]}),(0,P.jsx)("div",{className:"text-center pt-4 border-t border-zinc-100 dark:border-zinc-800",children:(0,P.jsxs)("p",{className:"text-xs text-zinc-400 font-medium",children:["Don't have an account yet? ",(0,P.jsx)("br",{}),(0,P.jsx)("span",{className:"text-primary font-bold",children:"Contact the Administrator to get registered."})]})})]})]}),(0,P.jsxs)("div",{className:"mt-12 flex flex-col items-center gap-2",children:[(0,P.jsx)("p",{className:"text-[10px] text-zinc-400 font-black uppercase tracking-[0.3em]",children:"Secure Access Protocol v2.5"}),(0,P.jsx)("p",{className:"text-[9px] text-zinc-300 uppercase font-bold",children:" 2025 Education Platform Design"})]})]})}let kb=fI("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),kc=fI("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function kd({onNavigate:a}){let[b,c]=(0,Q.useState)(""),[d,e]=(0,Q.useState)(""),[f,g]=(0,Q.useState)(!1),[h,i]=(0,Q.useState)(!1),[j,k]=(0,Q.useState)(!0),[l,m]=(0,Q.useState)(!1);async function n(c){if(c.preventDefault(),b.length<6)return alert("Security requirement: Password must be at least 6 characters.");if(b!==d)return alert("Validation failed: Passwords do not match!");g(!0);try{let{error:c}=await cE.auth.updateUser({password:b});if(c)throw c;i(!0),setTimeout(()=>a("home"),3e3)}catch(a){alert("System Error: "+a.message+" (Please try requesting a new link from the login page)")}finally{g(!1)}}return((0,Q.useEffect)(()=>{let a=!0;!async function(){await new Promise(a=>setTimeout(a,1e3));let{data:{session:b}}=await cE.auth.getSession();if(a){let a=window.location.hash.includes("type=recovery");b||a?m(!0):m(!1),k(!1)}}();let{data:{subscription:b}}=cE.auth.onAuthStateChange(a=>{"PASSWORD_RECOVERY"===a&&(m(!0),k(!1))});return()=>{a=!1,b.unsubscribe()}},[]),j)?(0,P.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 p-6",children:(0,P.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,P.jsx)(j7,{className:"animate-spin size-12 text-primary opacity-20"}),(0,P.jsx)("p",{className:"font-black uppercase tracking-[0.2em] text-[10px] text-zinc-400 italic animate-pulse",children:"Authenticating Security Token..."})]})}):l||h?h?(0,P.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 p-6",children:(0,P.jsxs)(dS,{className:"max-w-md w-full text-center p-12 rounded-[3rem] shadow-2xl border-none",children:[(0,P.jsx)("div",{className:"size-24 bg-emerald-50 rounded-[2rem] flex items-center justify-center mx-auto mb-8",children:(0,P.jsx)(kb,{className:"size-14 text-emerald-500"})}),(0,P.jsx)(dU,{className:"text-4xl font-black uppercase italic tracking-tighter",children:"Access Restored"}),(0,P.jsxs)("p",{className:"text-zinc-500 font-bold mt-4 leading-relaxed uppercase text-[10px] tracking-widest",children:["Your credentials have been updated. ",(0,P.jsx)("br",{})," Initializing portal redirection..."]})]})}):(0,P.jsx)("div",{className:"min-h-screen bg-zinc-50 flex items-center justify-center p-6",children:(0,P.jsxs)(dS,{className:"w-full max-w-md rounded-[3rem] shadow-2xl border-none bg-white overflow-hidden",children:[(0,P.jsx)("div",{className:"h-4 bg-primary w-full"}),(0,P.jsxs)(dT,{className:"pt-14 px-12 text-center",children:[(0,P.jsx)("div",{className:"size-20 bg-zinc-50 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-inner",children:(0,P.jsx)(g1,{className:"text-primary size-10"})}),(0,P.jsx)(dU,{className:"text-4xl font-black tracking-tighter uppercase italic text-zinc-900 leading-none",children:"Secure Portal"}),(0,P.jsx)(dV,{className:"text-zinc-400 font-bold uppercase text-[9px] tracking-[0.3em] mt-4 italic",children:"Define your new access key"})]}),(0,P.jsx)(dW,{className:"px-12 pb-16",children:(0,P.jsxs)("form",{onSubmit:n,className:"space-y-6",children:[(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"New Password"}),(0,P.jsx)(f9,{type:"password",placeholder:"",value:b,onChange:a=>c(a.target.value),className:"h-16 rounded-[1.25rem] bg-zinc-50 border-none px-6 focus-visible:ring-2 ring-primary transition-all text-lg",required:!0,minLength:6})]}),(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(g8,{className:"text-[10px] font-black uppercase tracking-widest ml-1 text-zinc-400",children:"Verify Password"}),(0,P.jsx)(f9,{type:"password",placeholder:"",value:d,onChange:a=>e(a.target.value),className:"h-16 rounded-[1.25rem] bg-zinc-50 border-none px-6 focus-visible:ring-2 ring-primary transition-all text-lg",required:!0})]}),(0,P.jsx)(dR,{type:"submit",className:"w-full h-16 rounded-[1.25rem] font-black text-xl shadow-xl shadow-primary/20 mt-6 active:scale-[0.98] transition-all bg-primary text-white",disabled:f,children:f?(0,P.jsxs)("div",{className:"flex items-center gap-3",children:[(0,P.jsx)(j7,{className:"animate-spin size-6"}),(0,P.jsx)("span",{className:"uppercase text-xs tracking-widest",children:"Applying..."})]}):"Update Access"})]})})]})}):(0,P.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 p-6",children:(0,P.jsxs)(dS,{className:"max-w-md w-full text-center p-12 rounded-[3rem] shadow-2xl border-none",children:[(0,P.jsx)(kc,{className:"size-20 text-rose-500 mx-auto mb-6 opacity-80"}),(0,P.jsx)(dU,{className:"text-3xl font-black uppercase tracking-tight italic",children:"Link Expired"}),(0,P.jsx)(dV,{className:"mt-4 font-medium text-zinc-500 leading-relaxed",children:"The security token has either been used or timed out. For your security, reset links are single-use."}),(0,P.jsx)(dR,{className:"mt-10 w-full rounded-2xl h-16 font-black uppercase tracking-widest text-xs shadow-lg",onClick:()=>a("student"),children:"Request New Link"})]})})}function ke(){let[a,b]=(0,Q.useState)("home");(0,Q.useEffect)(()=>{window.location.hash.includes("type=recovery")&&b("reset-password");let{data:{subscription:a}}=cE.auth.onAuthStateChange(async(a,c)=>{"PASSWORD_RECOVERY"===a&&b("reset-password")});return()=>{a.unsubscribe()}},[]);let c=a=>{b(a),window.scrollTo(0,0)};return(0,P.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:["home"===a&&(0,P.jsx)(f8,{onNavigate:c}),"student"===a&&(0,P.jsx)(ka,{onNavigate:c}),"reset-password"===a&&(0,P.jsx)(kd,{onNavigate:c}),"admin-login"===a&&(0,P.jsx)(j9,{onNavigate:c}),"student-dashboard"===a&&(0,P.jsx)(g5,{onNavigate:c}),"admin"===a&&(0,P.jsx)(j6,{onNavigate:c})]})}a.s(["default",()=>ke],92657)}];

//# sourceMappingURL=my-lms-project_src_app_page_tsx_94847a3f._.js.map